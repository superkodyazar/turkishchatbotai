<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatBot - Matematik + Kod + Wikipedia + G√∂rsel Analiz</title>

    <!-- TensorFlow.js - G√∂rsel Analiz i√ßin -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.11.0/dist/tf.min.js"></script>

    <!-- MobileNet - G√∂rsel Sƒ±nƒ±flandƒ±rma -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/mobilenet@2.1.0/dist/mobilenet.min.js"></script>

    <!-- COCO-SSD - Nesne Tespiti -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd@2.2.3/dist/coco-ssd.min.js"></script>

    <!-- Tesseract.js - OCR (Metin Tanƒ±ma) -->
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4.1.1/dist/tesseract.min.js"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0f0f23;
            --bg-secondary: #1a1a35;
            --bg-tertiary: #16213e;
            --accent-primary: #667eea;
            --accent-secondary: #764ba2;
            --accent-cyan: #4facfe;
            --accent-green: #00f2fe;
            --text-primary: #e8eaed;
            --text-secondary: #9aa0a6;
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.2);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.4);
            --shadow-glow: 0 0 20px rgba(102, 126, 234, 0.3);
        }

        /* Light Mode */
        [data-theme="light"] {
            --bg-primary: #f5f7fa;
            --bg-secondary: #e8ecf1;
            --bg-tertiary: #dde2e8;
            --text-primary: #1a1a2e;
            --text-secondary: #5a5a72;
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.16);
            --shadow-glow: 0 0 20px rgba(102, 126, 234, 0.2);
        }

        /* Light Mode - Specific Overrides */
        [data-theme="light"] .code-block-wrapper {
            background: rgba(255, 255, 255, 0.8);
            border-color: rgba(102, 126, 234, 0.3);
        }

        [data-theme="light"] .code-header {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(79, 172, 254, 0.08));
        }

        [data-theme="light"] .sidebar {
            background: rgba(255, 255, 255, 0.7);
        }

        [data-theme="light"] .input-wrapper {
            background: rgba(255, 255, 255, 0.8);
        }

        [data-theme="light"] .message.user {
            background: rgba(102, 126, 234, 0.12);
        }

        [data-theme="light"] .message.bot {
            background: rgba(79, 172, 254, 0.08);
        }

        [data-theme="light"] .welcome-screen h1 {
            color: transparent;
        }

        [data-theme="light"] .sidebar-footer {
            background: rgba(102, 126, 234, 0.08);
            border-color: rgba(102, 126, 234, 0.25);
        }

        [data-theme="light"] .chat-history-item {
            background: rgba(102, 126, 234, 0.08);
            border-color: rgba(102, 126, 234, 0.2);
        }

        [data-theme="light"] .chat-history-item:hover {
            background: rgba(102, 126, 234, 0.15);
        }

        [data-theme="light"] .chat-history-item.active {
            background: rgba(102, 126, 234, 0.25);
        }

        [data-theme="light"] .theme-toggle {
            background: rgba(102, 126, 234, 0.12);
            border-color: rgba(102, 126, 234, 0.25);
        }

        [data-theme="light"] body::before {
            background-image:
                radial-gradient(circle at 20% 50%, rgba(102, 126, 234, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(79, 172, 254, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(118, 75, 162, 0.06) 0%, transparent 50%);
        }

        [data-theme="light"] .example-card {
            background: rgba(255, 255, 255, 0.6);
            border-color: rgba(102, 126, 234, 0.3);
        }

        [data-theme="light"] .example-card:hover {
            background: rgba(255, 255, 255, 0.8);
        }

        [data-theme="light"] ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.3);
        }

        [data-theme="light"] ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, rgba(102, 126, 234, 0.6), rgba(118, 75, 162, 0.6));
            border-color: rgba(255, 255, 255, 0.3);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Inter', sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 50%, var(--bg-tertiary) 100%);
            background-attachment: fixed;
            color: var(--text-primary);
            height: 100vh;
            overflow: hidden;
            position: relative;
        }

        /* Animated Background Pattern */
        body::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background-image:
                radial-gradient(circle at 20% 50%, rgba(102, 126, 234, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(79, 172, 254, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(118, 75, 162, 0.03) 0%, transparent 50%);
            animation: backgroundPulse 15s ease-in-out infinite;
            pointer-events: none;
        }

        @keyframes backgroundPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        .container {
            display: flex;
            height: 100vh;
        }

        .sidebar {
            width: 280px;
            background: rgba(26, 26, 53, 0.7);
            backdrop-filter: blur(20px);
            display: flex;
            flex-direction: column;
            padding: 20px;
            border-right: 1px solid rgba(102, 126, 234, 0.1);
            box-shadow: var(--shadow-md);
            position: relative;
            z-index: 10;
        }

        .new-chat-btn {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 18px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            border: none;
            border-radius: 12px;
            color: white;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            margin-bottom: 20px;
            box-shadow: var(--shadow-sm);
            position: relative;
            overflow: hidden;
        }

        .new-chat-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .new-chat-btn:hover::before {
            left: 100%;
        }

        .new-chat-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-glow), var(--shadow-md);
        }

        .new-chat-btn:active {
            transform: translateY(0);
        }

        .sidebar-footer {
            padding: 16px;
            border-top: 1px solid rgba(102, 126, 234, 0.2);
            font-size: 11px;
            color: var(--text-secondary);
            margin-top: auto;
            background: rgba(102, 126, 234, 0.05);
            border-radius: 12px;
            line-height: 1.6;
            animation: fadeInUp 0.6s ease-out 0.3s both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .chat-container {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .message-wrapper {
            width: 100%;
            max-width: 800px;
            margin-bottom: 20px;
        }

        .message {
            display: flex;
            gap: 20px;
            padding: 24px;
            animation: messageSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        @keyframes messageSlideIn {
            from {
                opacity: 0;
                transform: translateY(20px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .message.user {
            background: rgba(102, 126, 234, 0.08);
            border-left: 3px solid var(--accent-primary);
        }

        .message.bot {
            background: rgba(79, 172, 254, 0.06);
            border-left: 3px solid var(--accent-cyan);
        }

        .message-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
            box-shadow: var(--shadow-sm);
            transition: all 0.3s ease;
        }

        .message:hover .message-avatar {
            transform: scale(1.1) rotate(5deg);
        }

        .message.user .message-avatar {
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            animation: avatarPulse 2s ease-in-out infinite;
        }

        .message.bot .message-avatar {
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-green));
            animation: avatarPulse 2s ease-in-out infinite 0.5s;
        }

        @keyframes avatarPulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(102, 126, 234, 0.4); }
            50% { box-shadow: 0 0 0 10px rgba(102, 126, 234, 0); }
        }

        .message-content {
            flex: 1;
            line-height: 1.6;
            font-size: 16px;
            color: var(--text-primary);
        }

        .code-block-wrapper {
            position: relative;
            margin: 20px 0;
            border-radius: 14px;
            overflow: hidden;
            background: rgba(15, 15, 35, 0.8);
            border: 1px solid rgba(102, 126, 234, 0.2);
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
        }

        .code-block-wrapper:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-glow), var(--shadow-lg);
            border-color: var(--accent-primary);
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.15), rgba(79, 172, 254, 0.1));
            border-bottom: 1px solid rgba(102, 126, 234, 0.2);
            backdrop-filter: blur(10px);
        }

        .code-language {
            font-size: 12px;
            color: var(--accent-cyan);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .copy-btn {
            padding: 6px 14px;
            background: rgba(102, 126, 234, 0.2);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .copy-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .copy-btn:hover::before {
            width: 200px;
            height: 200px;
        }

        .copy-btn:hover {
            background: rgba(102, 126, 234, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .copy-btn.copied {
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-green));
            border-color: var(--accent-green);
            color: white;
        }

        .code-content {
            padding: 16px;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            line-height: 1.5;
        }

        .code-content code {
            color: var(--text-primary);
        }

        .message-content code:not(.code-content code) {
            background: rgba(102, 126, 234, 0.15);
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Consolas', monospace;
            font-size: 14px;
            color: var(--accent-primary);
        }

        .message-content strong {
            color: var(--text-primary);
            font-weight: 700;
        }

        .welcome-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            text-align: center;
            padding: 20px;
        }

        .welcome-screen h1 {
            font-size: 48px;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-primary), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientShift 3s ease-in-out infinite;
            font-weight: 700;
            letter-spacing: -1px;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .welcome-examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 16px;
            margin-top: 40px;
            max-width: 950px;
        }

        .example-card {
            background: rgba(102, 126, 234, 0.08);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(102, 126, 234, 0.2);
            position: relative;
            overflow: hidden;
        }

        .example-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-cyan));
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .example-card:hover::before {
            opacity: 0.1;
        }

        .example-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: var(--shadow-glow), var(--shadow-lg);
            border-color: var(--accent-primary);
        }

        .example-card h3 {
            font-size: 15px;
            margin-bottom: 8px;
            position: relative;
            z-index: 1;
            font-weight: 600;
        }

        .example-card p {
            font-size: 13px;
            color: var(--text-secondary);
            position: relative;
            z-index: 1;
        }

        .input-area {
            position: sticky;
            bottom: 0;
            background: #343541;
            padding: 20px;
            border-top: 1px solid #444654;
            display: flex;
            justify-content: center;
        }

        .input-wrapper {
            width: 100%;
            max-width: 800px;
            display: flex;
            align-items: center;
            background: rgba(26, 26, 53, 0.6);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(102, 126, 234, 0.2);
            border-radius: 16px;
            padding: 14px 18px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: var(--shadow-sm);
        }

        .input-wrapper:focus-within {
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.15), var(--shadow-md);
            transform: translateY(-2px);
        }

        #userInput {
            flex: 1;
            background: transparent;
            border: none;
            outline: none;
            color: var(--text-primary);
            font-size: 16px;
            resize: none;
            max-height: 200px;
            line-height: 1.5;
        }

        #userInput::placeholder {
            color: var(--text-secondary);
        }

        #sendButton {
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            color: #fff;
            border: none;
            width: 38px;
            height: 38px;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: var(--shadow-sm);
            position: relative;
            overflow: hidden;
        }

        #sendButton::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        #sendButton:hover::before {
            width: 300px;
            height: 300px;
        }

        #sendButton:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-glow), var(--shadow-md);
        }

        #sendButton:active {
            transform: scale(0.95);
        }

        #sendButton:disabled {
            background: rgba(86, 88, 105, 0.5);
            cursor: not-allowed;
            transform: none;
        }

        /* G√∂rsel Y√ºkleme Stilleri */
        .image-upload-btn {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 8px;
        }

        .image-upload-btn:hover {
            background: rgba(102, 126, 234, 0.1);
            color: var(--accent-primary);
            transform: scale(1.05);
        }

        .image-preview-container {
            position: relative;
            max-width: 300px;
            margin: 10px 0;
            border-radius: 12px;
            overflow: hidden;
            background: rgba(26, 26, 53, 0.4);
            border: 2px solid rgba(102, 126, 234, 0.3);
        }

        .image-preview {
            width: 100%;
            display: block;
            max-height: 300px;
            object-fit: contain;
        }

        .image-remove-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(239, 68, 68, 0.9);
            color: white;
            border: none;
            border-radius: 50%;
            width: 28px;
            height: 28px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .image-remove-btn:hover {
            background: rgba(220, 38, 38, 1);
            transform: scale(1.1);
        }

        .settings-btn {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 8px;
        }

        .settings-btn:hover {
            background: rgba(102, 126, 234, 0.1);
            color: var(--accent-primary);
            transform: rotate(45deg);
        }

        .settings-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .settings-modal.active {
            display: flex;
        }

        .settings-content {
            background: var(--bg-secondary);
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            box-shadow: var(--shadow-lg);
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-30px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .settings-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .settings-header h2 {
            color: var(--text-primary);
            font-size: 24px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .settings-close {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            font-size: 28px;
            cursor: pointer;
            transition: all 0.3s;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
        }

        .settings-close:hover {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            transform: rotate(90deg);
        }

        .settings-group {
            margin-bottom: 25px;
        }

        .settings-group label {
            display: block;
            color: var(--text-primary);
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .settings-group input {
            width: 100%;
            background: rgba(26, 26, 53, 0.6);
            border: 2px solid rgba(102, 126, 234, 0.2);
            border-radius: 12px;
            padding: 12px 16px;
            color: var(--text-primary);
            font-size: 14px;
            transition: all 0.3s;
        }

        .settings-group input:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.15);
        }

        .settings-group input::placeholder {
            color: var(--text-secondary);
        }

        .settings-info {
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 8px;
            line-height: 1.5;
        }

        .settings-info a {
            color: var(--accent-cyan);
            text-decoration: none;
        }

        .settings-info a:hover {
            text-decoration: underline;
        }

        .typing-indicator {
            display: none;
        }

        .typing-indicator.active {
            display: flex;
            gap: 20px;
            padding: 20px;
            background: #444654;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
        }

        .typing-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-primary));
            animation: typingBounce 1.4s ease-in-out infinite;
            box-shadow: 0 0 10px rgba(79, 172, 254, 0.5);
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typingBounce {
            0%, 60%, 100% {
                transform: translateY(0) scale(1);
                opacity: 0.7;
            }
            30% {
                transform: translateY(-15px) scale(1.2);
                opacity: 1;
                box-shadow: 0 0 20px rgba(79, 172, 254, 0.8);
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(26, 26, 53, 0.3);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, var(--accent-primary), var(--accent-secondary));
            border-radius: 10px;
            border: 2px solid rgba(26, 26, 53, 0.3);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, var(--accent-cyan), var(--accent-primary));
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.5);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .sidebar {
                width: 0;
                padding: 0;
                border: none;
                overflow: hidden;
            }

            .welcome-screen h1 {
                font-size: 32px;
            }

            .welcome-examples {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .message {
                padding: 16px;
            }

            .input-wrapper {
                border-radius: 12px;
            }
        }

        /* Loading Animation for Cards */
        .example-card {
            animation: cardFadeIn 0.6s ease-out both;
        }

        .example-card:nth-child(1) { animation-delay: 0.1s; }
        .example-card:nth-child(2) { animation-delay: 0.2s; }
        .example-card:nth-child(3) { animation-delay: 0.3s; }
        .example-card:nth-child(4) { animation-delay: 0.4s; }

        @keyframes cardFadeIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Smooth Transitions */
        * {
            transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
        }

        button, a, .example-card, .message-avatar, .code-block-wrapper {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        }

        /* Theme Toggle Button */
        .theme-toggle {
            padding: 10px;
            background: rgba(102, 126, 234, 0.1);
            border: 1px solid rgba(102, 126, 234, 0.2);
            border-radius: 10px;
            cursor: pointer;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 13px;
            color: var(--text-secondary);
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .theme-toggle:hover {
            background: rgba(102, 126, 234, 0.2);
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }

        .theme-icon {
            font-size: 18px;
        }

        /* Chat History List */
        .chat-history {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 20px;
        }

        .chat-history-item {
            padding: 12px;
            margin-bottom: 8px;
            background: rgba(102, 126, 234, 0.05);
            border: 1px solid rgba(102, 126, 234, 0.1);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 13px;
            color: var(--text-secondary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 8px;
        }

        .chat-history-item-text {
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .chat-delete-btn {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            font-size: 14px;
            opacity: 0;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .chat-history-item:hover .chat-delete-btn {
            opacity: 1;
        }

        .chat-delete-btn:hover {
            background: rgba(255, 0, 0, 0.1);
            color: #ff4444;
            transform: scale(1.1);
        }

        .chat-history-item:hover {
            background: rgba(102, 126, 234, 0.15);
            border-color: rgba(102, 126, 234, 0.3);
            transform: translateX(5px);
        }

        .chat-history-item.active {
            background: rgba(102, 126, 234, 0.2);
            border-color: var(--accent-primary);
            color: var(--text-primary);
        }

        .chat-history-title {
            font-size: 11px;
            color: var(--text-secondary);
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 700;
            opacity: 0.7;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <button class="new-chat-btn" onclick="chatUI.newChat()">
                <span>‚ûï</span>
                <span>Yeni Sohbet</span>
            </button>

            <button class="theme-toggle" onclick="chatUI.toggleTheme()" id="themeToggle">
                <span class="theme-icon" id="themeIcon">üåô</span>
                <span id="themeText">Aydƒ±nlƒ±k Mod</span>
            </button>

            <div class="chat-history-title">SOHBET GE√áMƒ∞≈ûƒ∞</div>
            <div class="chat-history" id="chatHistory"></div>

            <div class="sidebar-footer">
                ü§ñ <strong>ChatBot</strong> - Geli≈ümi≈ü AI Asistan<br>
                üíª Yazƒ±lƒ±m Geli≈ütirme<br>
                üî¢ Matematiksel Hesaplamalar<br>
                üìö √áoklu Kaynak Ara≈ütƒ±rma
            </div>
        </div>

        <div class="main-content">
            <div class="chat-container" id="chatContainer">
                <div class="welcome-screen" id="welcomeScreen">
                    <h1>ü§ñ ChatBot</h1>
                    <p style="color: var(--text-secondary); font-size: 18px; margin-top: 10px; font-weight: 500;">Geli≈ümi≈ü Yapay Zeka Asistanƒ±</p>
                    <p style="color: var(--text-secondary); font-size: 14px; margin-top: 8px; opacity: 0.8;">Matematik ‚Ä¢ Yazƒ±lƒ±m Geli≈ütirme ‚Ä¢ Bilgi Ara≈ütƒ±rmasƒ±</p>

                    <div class="welcome-examples">
                        <div class="example-card" onclick="chatUI.useExample('1 artƒ± 1 ka√ß eder?')">
                            <h3>üî¢ Matematiksel Hesaplama</h3>
                            <p>Aritmetik i≈ülemler</p>
                        </div>
                        <div class="example-card" onclick="chatUI.useExample('Python ile merhaba d√ºnya')">
                            <h3>üíª Python Geli≈ütirme</h3>
                            <p>Kod √∂rnekleri ve ≈üablonlar</p>
                        </div>
                        <div class="example-card" onclick="chatUI.useExample('T√ºrkiye ne zaman kuruldu?')">
                            <h3>üìö Bilgi Ara≈ütƒ±rmasƒ±</h3>
                            <p>√áoklu kaynak analizi</p>
                        </div>
                        <div class="example-card" onclick="chatUI.useExample('JavaScript ile array olu≈ütur')">
                            <h3>üü® JavaScript Programlama</h3>
                            <p>Modern ES6+ √∂rnekleri</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="input-area">
                <div id="imagePreviewWrapper"></div>
                <div class="input-wrapper">
                    <button class="settings-btn" id="settingsBtn" title="Ayarlar">‚öôÔ∏è</button>
                    <button class="image-upload-btn" id="imageUploadBtn" title="G√∂rsel Y√ºkle">üñºÔ∏è</button>
                    <input type="file" id="imageInput" accept="image/*" style="display: none;">
                    <textarea id="userInput" placeholder="Mesajƒ±nƒ±zƒ± yazƒ±n..." rows="1"></textarea>
                    <button id="sendButton">‚ñ≤</button>
                </div>
            </div>

            <!-- API Ayarlarƒ± Modal -->
            <div class="settings-modal" id="settingsModal">
                <div class="settings-content">
                    <div class="settings-header">
                        <h2>‚öôÔ∏è G√∂rsel Analiz Ayarlarƒ±</h2>
                        <button class="settings-close" id="settingsCloseBtn">√ó</button>
                    </div>

                    <!-- Analiz Modu Se√ßimi -->
                    <div class="settings-group">
                        <label>
                            <span>üîå Analiz Modu</span>
                        </label>
                        <div style="display: flex; gap: 15px; margin-top: 10px;">
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; flex: 1; padding: 12px; background: rgba(26, 26, 53, 0.4); border-radius: 10px; border: 2px solid rgba(102, 126, 234, 0.2);">
                                <input type="radio" name="analysisMode" value="offline" id="offlineMode" checked style="cursor: pointer;">
                                <span>üöÄ Offline (√úcretsiz, Hƒ±zlƒ±)</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; flex: 1; padding: 12px; background: rgba(26, 26, 53, 0.4); border-radius: 10px; border: 2px solid rgba(102, 126, 234, 0.2);">
                                <input type="radio" name="analysisMode" value="online" id="onlineMode" style="cursor: pointer;">
                                <span>‚òÅÔ∏è Online (API Gerekli)</span>
                            </label>
                        </div>
                        <div class="settings-info">
                            <strong>Offline:</strong> Tarayƒ±cƒ±nƒ±zda √ßalƒ±≈üƒ±r, API gerekmez. Nesne tespiti, sƒ±nƒ±flandƒ±rma ve OCR yapabilir.<br>
                            <strong>Online:</strong> Daha geli≈ümi≈ü AI analizi i√ßin OpenAI/Claude API kullanƒ±r.
                        </div>
                    </div>

                    <!-- API Keys (Online mod i√ßin) -->
                    <div id="apiKeysSection" style="display: none;">
                        <div class="settings-group">
                            <label>
                                <span>ü§ñ OpenAI API Key</span>
                            </label>
                            <input type="password" id="openaiApiKey" placeholder="sk-...">
                            <div class="settings-info">
                                OpenAI GPT-4 Vision API key'inizi girin.
                                <a href="https://platform.openai.com/api-keys" target="_blank">Buradan alabilirsiniz</a>
                            </div>
                        </div>

                        <div class="settings-group">
                            <label>
                                <span>üîÆ Anthropic API Key (Claude Vision)</span>
                            </label>
                            <input type="password" id="anthropicApiKey" placeholder="sk-ant-...">
                            <div class="settings-info">
                                Anthropic Claude Vision API key'inizi girin.
                                <a href="https://console.anthropic.com/" target="_blank">Buradan alabilirsiniz</a>
                            </div>
                        </div>
                    </div>

                    <div class="settings-info" style="margin-top: 20px; padding: 15px; background: rgba(102, 126, 234, 0.1); border-radius: 12px; border-left: 4px solid var(--accent-primary);">
                        <strong>‚ÑπÔ∏è Offline Mod √ñzellikleri:</strong><br>
                        ‚Ä¢ üéØ <strong>Nesne Tespiti:</strong> G√∂rseldeki nesneleri bulur (kedi, k√∂pek, araba, vb.)<br>
                        ‚Ä¢ üè∑Ô∏è <strong>Sƒ±nƒ±flandƒ±rma:</strong> G√∂rselin ne olduƒüunu tanƒ±mlar (1000+ kategori)<br>
                        ‚Ä¢ üìù <strong>OCR:</strong> G√∂rseldeki yazƒ±larƒ± okur (T√ºrk√ße dahil 100+ dil)<br>
                        ‚Ä¢ üíæ T√ºm i≈ülemler tarayƒ±cƒ±nƒ±zda yapƒ±lƒ±r, internet gerektirmez!
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // G√ñRSEL ANALƒ∞Z MOTORUƒ∞ - Online (API) & Offline (TensorFlow.js)
        class ImageVision {
            constructor() {
                this.openaiApiKey = localStorage.getItem('openaiApiKey') || '';
                this.anthropicApiKey = localStorage.getItem('anthropicApiKey') || '';
                this.offlineMode = localStorage.getItem('analysisMode') !== 'online'; // Default: offline

                // Offline modeller (lazy loading)
                this.mobileNetModel = null;
                this.cocoSsdModel = null;
                this.modelsLoading = false;
            }

            // Mod deƒüi≈ütirme
            setMode(mode) {
                this.offlineMode = (mode === 'offline');
                localStorage.setItem('analysisMode', mode);
            }

            // API anahtarlarƒ±nƒ± kaydet
            saveApiKeys(openaiKey, anthropicKey) {
                this.openaiApiKey = openaiKey;
                this.anthropicApiKey = anthropicKey;
                localStorage.setItem('openaiApiKey', openaiKey);
                localStorage.setItem('anthropicApiKey', anthropicKey);
            }

            // API anahtarlarƒ±nƒ± y√ºkle
            loadApiKeys() {
                return {
                    openai: this.openaiApiKey,
                    anthropic: this.anthropicApiKey
                };
            }

            // Offline modelleri y√ºkle (ilk kullanƒ±mda)
            async loadOfflineModels() {
                if (this.mobileNetModel && this.cocoSsdModel) {
                    return; // Zaten y√ºkl√º
                }

                if (this.modelsLoading) {
                    // Modeller y√ºklenirken bekle
                    while (this.modelsLoading) {
                        await new Promise(resolve => setTimeout(resolve, 100));
                    }
                    return;
                }

                this.modelsLoading = true;
                console.log('üîÑ Offline AI modelleri y√ºkleniyor... (ƒ∞lk sefer 30-60 saniye s√ºrebilir)');

                try {
                    // MobileNet ve COCO-SSD'yi paralel y√ºkle
                    [this.mobileNetModel, this.cocoSsdModel] = await Promise.all([
                        mobilenet.load(),
                        cocoSsd.load()
                    ]);
                    console.log('‚úÖ Offline modeller ba≈üarƒ±yla y√ºklendi!');
                } catch (error) {
                    console.error('‚ùå Model y√ºkleme hatasƒ±:', error);
                    throw new Error('Offline modeller y√ºklenemedi. L√ºtfen internet baƒülantƒ±nƒ±zƒ± kontrol edin ve sayfayƒ± yenileyin.');
                } finally {
                    this.modelsLoading = false;
                }
            }

            // OFFLINE: Nesne Tespiti (COCO-SSD)
            async detectObjects(imageElement) {
                await this.loadOfflineModels();
                const predictions = await this.cocoSsdModel.detect(imageElement);

                let result = 'üéØ **Tespit Edilen Nesneler:**\n\n';

                if (predictions.length === 0) {
                    result += '‚ùå G√∂rselde tanƒ±nabilir nesne bulunamadƒ±.\n';
                } else {
                    predictions.forEach((pred, i) => {
                        const confidence = (pred.score * 100).toFixed(1);
                        const className = this.translateObjectClass(pred.class);
                        result += `${i + 1}. **${className}** - %${confidence} g√ºvenilirlik\n`;
                    });
                }

                return result;
            }

            // OFFLINE: G√∂rsel Sƒ±nƒ±flandƒ±rma (MobileNet)
            async classifyImage(imageElement) {
                await this.loadOfflineModels();
                const predictions = await this.mobileNetModel.classify(imageElement);

                let result = 'üè∑Ô∏è **G√∂rsel Sƒ±nƒ±flandƒ±rma:**\n\n';

                predictions.slice(0, 5).forEach((pred, i) => {
                    const confidence = (pred.probability * 100).toFixed(1);
                    const className = this.translateImageClass(pred.className);
                    result += `${i + 1}. **${className}** - %${confidence}\n`;
                });

                return result;
            }

            // OFFLINE: OCR - Metin Tanƒ±ma (Tesseract.js)
            async extractText(imageFile) {
                console.log('üìù OCR i≈ülemi ba≈ülatƒ±lƒ±yor...');

                try {
                    const result = await Tesseract.recognize(
                        imageFile,
                        'tur+eng', // T√ºrk√ße + ƒ∞ngilizce
                        {
                            logger: m => {
                                if (m.status === 'recognizing text') {
                                    console.log(`OCR ƒ∞lerlemesi: ${(m.progress * 100).toFixed(0)}%`);
                                }
                            }
                        }
                    );

                    const text = result.data.text.trim();

                    if (!text || text.length < 3) {
                        return 'üìù **Metin Tanƒ±ma (OCR):**\n\n‚ùå G√∂rselde okunabilir metin bulunamadƒ±.';
                    }

                    return `üìù **Tespit Edilen Metin:**\n\n${text}\n\nüìä G√ºvenilirlik: %${(result.data.confidence).toFixed(1)}`;
                } catch (error) {
                    console.error('OCR Hatasƒ±:', error);
                    return '‚ùå **OCR Hatasƒ±:** Metin tanƒ±ma i≈ülemi ba≈üarƒ±sƒ±z oldu.';
                }
            }

            // OFFLINE: Kapsamlƒ± Analiz (Her √º√ß y√∂ntem)
            async analyzeOffline(imageFile) {
                try {
                    // G√∂rseli HTML Image elementi olarak y√ºkle
                    const imageElement = await this.loadImageElement(imageFile);

                    console.log('üöÄ Offline analiz ba≈ülatƒ±lƒ±yor...');

                    // T√ºm analizleri paralel √ßalƒ±≈ütƒ±r
                    const [objects, classification, ocrText] = await Promise.all([
                        this.detectObjects(imageElement),
                        this.classifyImage(imageElement),
                        this.extractText(imageFile)
                    ]);

                    const fullResult = `ü§ñ **Offline AI G√∂rsel Analizi**\n\n` +
                        `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\n` +
                        `${classification}\n\n` +
                        `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\n` +
                        `${objects}\n\n` +
                        `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\n` +
                        `${ocrText}\n\n` +
                        `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\n` +
                        `üí° **Not:** Bu analiz tamamen tarayƒ±cƒ±nƒ±zda yapƒ±ldƒ±. API kullanƒ±lmadƒ±!`;

                    return {
                        text: fullResult,
                        source: 'Offline AI (TensorFlow.js + Tesseract)',
                        success: true
                    };

                } catch (error) {
                    console.error('Offline analiz hatasƒ±:', error);
                    return {
                        text: `‚ùå **Offline Analiz Hatasƒ±:** ${error.message}`,
                        source: 'Offline AI',
                        success: false
                    };
                }
            }

            // Yardƒ±mcƒ±: File -> Image Element
            loadImageElement(file) {
                return new Promise((resolve, reject) => {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const img = new Image();
                        img.onload = () => resolve(img);
                        img.onerror = reject;
                        img.src = e.target.result;
                    };
                    reader.onerror = reject;
                    reader.readAsDataURL(file);
                });
            }

            // Nesne sƒ±nƒ±flarƒ±nƒ± T√ºrk√ßele≈ütir
            translateObjectClass(className) {
                const translations = {
                    'person': 'ƒ∞nsan',
                    'bicycle': 'Bisiklet',
                    'car': 'Araba',
                    'motorcycle': 'Motosiklet',
                    'airplane': 'U√ßak',
                    'bus': 'Otob√ºs',
                    'train': 'Tren',
                    'truck': 'Kamyon',
                    'boat': 'Tekne',
                    'traffic light': 'Trafik I≈üƒ±ƒüƒ±',
                    'fire hydrant': 'Yangƒ±n Musluƒüu',
                    'stop sign': 'Dur ƒ∞≈üareti',
                    'parking meter': 'Parkometre',
                    'bench': 'Bank',
                    'bird': 'Ku≈ü',
                    'cat': 'Kedi',
                    'dog': 'K√∂pek',
                    'horse': 'At',
                    'sheep': 'Koyun',
                    'cow': 'ƒ∞nek',
                    'elephant': 'Fil',
                    'bear': 'Ayƒ±',
                    'zebra': 'Zebra',
                    'giraffe': 'Z√ºrafa',
                    'backpack': 'Sƒ±rt √áantasƒ±',
                    'umbrella': '≈ûemsiye',
                    'handbag': 'El √áantasƒ±',
                    'tie': 'Kravat',
                    'suitcase': 'Bavul',
                    'frisbee': 'Frizbi',
                    'skis': 'Kayak',
                    'snowboard': 'Snowboard',
                    'sports ball': 'Spor Topu',
                    'kite': 'U√ßurtma',
                    'baseball bat': 'Beyzbol Sopasƒ±',
                    'baseball glove': 'Beyzbol Eldiveni',
                    'skateboard': 'Kaykay',
                    'surfboard': 'S√∂rf Tahtasƒ±',
                    'tennis racket': 'Tenis Raketi',
                    'bottle': '≈ûi≈üe',
                    'wine glass': '≈ûarap Kadehi',
                    'cup': 'Fincan',
                    'fork': '√áatal',
                    'knife': 'Bƒ±√ßak',
                    'spoon': 'Ka≈üƒ±k',
                    'bowl': 'Kase',
                    'banana': 'Muz',
                    'apple': 'Elma',
                    'sandwich': 'Sandvi√ß',
                    'orange': 'Portakal',
                    'broccoli': 'Brokoli',
                    'carrot': 'Havu√ß',
                    'hot dog': 'Sosisli Sandvi√ß',
                    'pizza': 'Pizza',
                    'donut': 'Donut',
                    'cake': 'Kek',
                    'chair': 'Sandalye',
                    'couch': 'Kanepe',
                    'potted plant': 'Saksƒ± Bitkisi',
                    'bed': 'Yatak',
                    'dining table': 'Yemek Masasƒ±',
                    'toilet': 'Tuvalet',
                    'tv': 'Televizyon',
                    'laptop': 'Diz√ºst√º Bilgisayar',
                    'mouse': 'Fare',
                    'remote': 'Kumanda',
                    'keyboard': 'Klavye',
                    'cell phone': 'Cep Telefonu',
                    'microwave': 'Mikrodalga',
                    'oven': 'Fƒ±rƒ±n',
                    'toaster': 'Ekmek Kƒ±zartma Makinesi',
                    'sink': 'Lavabo',
                    'refrigerator': 'Buzdolabƒ±',
                    'book': 'Kitap',
                    'clock': 'Saat',
                    'vase': 'Vazo',
                    'scissors': 'Makas',
                    'teddy bear': 'Oyuncak Ayƒ±',
                    'hair drier': 'Sa√ß Kurutma Makinesi',
                    'toothbrush': 'Di≈ü Fƒ±r√ßasƒ±'
                };
                return translations[className] || className;
            }

            // G√∂rsel sƒ±nƒ±flarƒ±nƒ± T√ºrk√ßele≈ütir (basit √ßeviri)
            translateImageClass(className) {
                // MobileNet 1000+ kategori d√∂nd√ºr√ºr, hepsini √ßevirmek zor
                // En yaygƒ±n olanlarƒ± √ßevirelim
                const translations = {
                    'coffee mug': 'Kahve Fincanƒ±',
                    'laptop': 'Diz√ºst√º Bilgisayar',
                    'notebook': 'Not Defteri',
                    'cellular telephone': 'Cep Telefonu',
                    'screen': 'Ekran',
                    'desktop computer': 'Masa√ºst√º Bilgisayar',
                    'fountain pen': 'Dolma Kalem',
                    'ballpoint': 'T√ºkenmez Kalem',
                    'pencil': 'Kur≈üun Kalem'
                };
                return translations[className] || className;
            }

            // G√∂rseli Base64'e √ßevir
            async imageToBase64(file) {
                return new Promise((resolve, reject) => {
                    const reader = new FileReader();
                    reader.onload = () => {
                        const base64 = reader.result.split(',')[1]; // "data:image/png;base64," kƒ±smƒ±nƒ± √ßƒ±kar
                        resolve(base64);
                    };
                    reader.onerror = reject;
                    reader.readAsDataURL(file);
                });
            }

            // OpenAI GPT-4 Vision ile g√∂rsel analizi
            async analyzeWithOpenAI(base64Image, prompt, mimeType = 'image/jpeg') {
                if (!this.openaiApiKey) {
                    throw new Error('OpenAI API key bulunamadƒ±. L√ºtfen ayarlardan API key\'inizi girin.');
                }

                try {
                    const response = await fetch('https://api.openai.com/v1/chat/completions', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${this.openaiApiKey}`
                        },
                        body: JSON.stringify({
                            model: 'gpt-4o',
                            messages: [
                                {
                                    role: 'user',
                                    content: [
                                        {
                                            type: 'text',
                                            text: prompt || 'Bu g√∂rseli detaylƒ± bir ≈üekilde analiz et ve a√ßƒ±kla.'
                                        },
                                        {
                                            type: 'image_url',
                                            image_url: {
                                                url: `data:${mimeType};base64,${base64Image}`
                                            }
                                        }
                                    ]
                                }
                            ],
                            max_tokens: 1000
                        })
                    });

                    if (!response.ok) {
                        const error = await response.json();
                        throw new Error(error.error?.message || 'OpenAI API hatasƒ±');
                    }

                    const data = await response.json();
                    return {
                        text: data.choices[0].message.content,
                        source: 'OpenAI GPT-4 Vision',
                        success: true
                    };
                } catch (error) {
                    console.error('OpenAI API Error:', error);
                    return {
                        text: null,
                        source: 'OpenAI GPT-4 Vision',
                        success: false,
                        error: error.message
                    };
                }
            }

            // Anthropic Claude Vision ile g√∂rsel analizi
            async analyzeWithClaude(base64Image, prompt, mimeType = 'image/jpeg') {
                if (!this.anthropicApiKey) {
                    throw new Error('Anthropic API key bulunamadƒ±. L√ºtfen ayarlardan API key\'inizi girin.');
                }

                try {
                    const response = await fetch('https://api.anthropic.com/v1/messages', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'x-api-key': this.anthropicApiKey,
                            'anthropic-version': '2023-06-01'
                        },
                        body: JSON.stringify({
                            model: 'claude-3-5-sonnet-20241022',
                            max_tokens: 1024,
                            messages: [
                                {
                                    role: 'user',
                                    content: [
                                        {
                                            type: 'image',
                                            source: {
                                                type: 'base64',
                                                media_type: mimeType,
                                                data: base64Image
                                            }
                                        },
                                        {
                                            type: 'text',
                                            text: prompt || 'Bu g√∂rseli detaylƒ± bir ≈üekilde analiz et ve a√ßƒ±kla.'
                                        }
                                    ]
                                }
                            ]
                        })
                    });

                    if (!response.ok) {
                        const error = await response.json();
                        throw new Error(error.error?.message || 'Anthropic API hatasƒ±');
                    }

                    const data = await response.json();
                    return {
                        text: data.content[0].text,
                        source: 'Claude 3.5 Sonnet (Vision)',
                        success: true
                    };
                } catch (error) {
                    console.error('Anthropic API Error:', error);
                    return {
                        text: null,
                        source: 'Claude 3.5 Sonnet (Vision)',
                        success: false,
                        error: error.message
                    };
                }
            }

            // Ana g√∂rsel analiz fonksiyonu - Offline veya Online
            async analyzeImage(imageFile, prompt = '') {
                try {
                    // Offline mod aktifse
                    if (this.offlineMode) {
                        console.log('üöÄ Offline mod aktif - Tarayƒ±cƒ± tabanlƒ± analiz yapƒ±lƒ±yor...');
                        return await this.analyzeOffline(imageFile);
                    }

                    // Online mod - API kullan
                    console.log('‚òÅÔ∏è Online mod aktif - API ile analiz yapƒ±lƒ±yor...');

                    // G√∂rseli Base64'e √ßevir
                    const base64Image = await this.imageToBase64(imageFile);
                    const mimeType = imageFile.type;

                    // √ñncelik sƒ±rasƒ±: Claude > OpenAI
                    let result = null;

                    // √ñnce Claude'u dene
                    if (this.anthropicApiKey) {
                        console.log('üîÆ Claude Vision ile analiz ediliyor...');
                        result = await this.analyzeWithClaude(base64Image, prompt, mimeType);
                        if (result.success) {
                            return result;
                        }
                    }

                    // Claude ba≈üarƒ±sƒ±z olursa OpenAI'yi dene
                    if (this.openaiApiKey) {
                        console.log('ü§ñ OpenAI GPT-4 Vision ile analiz ediliyor...');
                        result = await this.analyzeWithOpenAI(base64Image, prompt, mimeType);
                        if (result.success) {
                            return result;
                        }
                    }

                    // Her ikisi de ba≈üarƒ±sƒ±z
                    if (result && !result.success) {
                        throw new Error(result.error);
                    }

                    throw new Error('G√∂rsel analizi yapƒ±lamadƒ±. Online mod i√ßin API anahtarlarƒ±nƒ±zƒ± girin veya Offline moda ge√ßin.');

                } catch (error) {
                    console.error('Image Analysis Error:', error);
                    return {
                        text: `‚ùå **Hata:** ${error.message}`,
                        source: 'Error',
                        success: false
                    };
                }
            }
        }

        // GELƒ∞≈ûMƒ∞≈û MATEMATƒ∞K MOTORU - T√ºrk√ße destekli
        class MathEngine {
            detectMath(text) {
                const normalized = text.toLowerCase();

                // T√ºrk√ße ve ƒ∞ngilizce matematik kelimeleri
                const mathWords = [
                    'artƒ±', 'eksi', '√ßarp', 'b√∂l√º', 'topla', '√ßƒ±kar',
                    'plus', 'minus', 'times', 'divide', 'ka√ß', 'eder',
                    'hesapla', 'calculate', 'k√∂k', 'karek√∂k', 'sqrt',
                    '√ºss√º', '√ºs', 'power', 'kare', 'k√ºp',
                    'fakt√∂riyel', 'factorial', 'mutlak', 'absolute',
                    'y√ºzde', 'percent', 'sin', 'cos', 'tan',
                    'log', 'ln', 'e', 'pi'
                ];

                // Matematik kelimesi + sayƒ± var mƒ±?
                if (mathWords.some(w => normalized.includes(w)) && /\d+/.test(text)) {
                    return true;
                }

                // Operat√∂r + sayƒ± pattern (geni≈ületilmi≈ü)
                if (/\d+\s*[\+\-\*\/x√ó√∑\^‚àö]\s*\d+/.test(text)) {
                    return true;
                }

                // √ñzel fonksiyon pattern
                if (/‚àö\d+|k√∂k\s*\d+|\d+\s*√ºss√º|\d+!/.test(normalized)) {
                    return true;
                }

                return false;
            }

            solve(text) {
                try {
                    const normalized = text.toLowerCase();

                    // 1. KAREK√ñK ƒ∞≈ûLEMLERƒ∞
                    let sqrtMatch = normalized.match(/(\d+(?:\.\d+)?)\s*(?:nin|nƒ±n|in|ƒ±n)?\s*(?:karek√∂k|k√∂k)√º?/);
                    if (!sqrtMatch) {
                        sqrtMatch = normalized.match(/(?:karek√∂k|k√∂k|sqrt)\s*(?:al)?\s*(\d+(?:\.\d+)?)/);
                    }
                    if (!sqrtMatch) {
                        sqrtMatch = text.match(/‚àö(\d+(?:\.\d+)?)/);
                    }
                    if (sqrtMatch) {
                        const num = parseFloat(sqrtMatch[1]);
                        if (num < 0) return "‚ùå **Matematiksel Hata**: Negatif sayƒ±nƒ±n karek√∂k√º reel sayƒ±larda tanƒ±msƒ±zdƒ±r!";
                        const result = Math.sqrt(num);
                        const formatted = result % 1 === 0 ? result : result.toFixed(4);
                        return `<strong>‚àö${num} = ${formatted}</strong>`;
                    }

                    // 2. √úS ALMA ƒ∞≈ûLEMLERƒ∞
                    let powerMatch = normalized.match(/(\d+(?:\.\d+)?)\s*(?:nin|nƒ±n|in|ƒ±n)?\s*(\d+)\s*(?:√ºss√º|√ºs|power)/);
                    if (!powerMatch) {
                        powerMatch = text.match(/(\d+(?:\.\d+)?)\s*[\^]\s*(\d+(?:\.\d+)?)/);
                    }
                    if (!powerMatch && (normalized.includes('kare') || normalized.includes('k√ºp'))) {
                        const numMatch = text.match(/(\d+(?:\.\d+)?)/);
                        if (numMatch) {
                            const num = parseFloat(numMatch[1]);
                            if (normalized.includes('kare')) {
                                const result = Math.pow(num, 2);
                                return `<strong>${num}¬≤ = ${result}</strong>`;
                            } else if (normalized.includes('k√ºp')) {
                                const result = Math.pow(num, 3);
                                return `<strong>${num}¬≥ = ${result}</strong>`;
                            }
                        }
                    }
                    if (powerMatch) {
                        const base = parseFloat(powerMatch[1]);
                        const exponent = parseFloat(powerMatch[2]);
                        const result = Math.pow(base, exponent);
                        const formatted = result % 1 === 0 ? result : result.toFixed(4);
                        return `<strong>${base}^${exponent} = ${formatted}</strong>`;
                    }

                    // 3. FAKT√ñRƒ∞YEL
                    let factMatch = text.match(/(\d+)!/);
                    if (!factMatch) {
                        factMatch = normalized.match(/(\d+)\s*(?:fakt√∂riyel|factorial)/);
                    }
                    if (factMatch) {
                        const num = parseInt(factMatch[1]);
                        if (num < 0) return "‚ùå **Matematiksel Hata**: Negatif sayƒ±nƒ±n fakt√∂riyeli tanƒ±msƒ±zdƒ±r!";
                        if (num > 170) return "‚ùå **Matematiksel Hata**: Sayƒ± √ßok b√ºy√ºk, fakt√∂riyel hesaplanamƒ±yor!";
                        const result = this.factorial(num);
                        return `<strong>${num}! = ${result}</strong>`;
                    }

                    // 4. MUTLAK DEƒûER
                    let absMatch = normalized.match(/(?:mutlak|absolute|abs)\s*(?:deƒüer)?\s*(?:al)?\s*\(?\s*(-?\d+(?:\.\d+)?)\s*\)?/);
                    if (absMatch) {
                        const num = parseFloat(absMatch[1]);
                        const result = Math.abs(num);
                        return `<strong>|${num}| = ${result}</strong>`;
                    }

                    // 5. Y√úZDE ƒ∞≈ûLEMLERƒ∞
                    let percentMatch = normalized.match(/(\d+(?:\.\d+)?)\s*(?:nin|nƒ±n)?\s*(?:y√ºzde|%)\s*(\d+(?:\.\d+)?)/);
                    if (percentMatch) {
                        const num = parseFloat(percentMatch[1]);
                        const percent = parseFloat(percentMatch[2]);
                        const result = (num * percent) / 100;
                        const formatted = result % 1 === 0 ? result : result.toFixed(2);
                        return `<strong>${num}'in %${percent}'i = ${formatted}</strong>`;
                    }

                    // 6. TRƒ∞GONOMETRƒ∞K FONKSƒ∞YONLAR (derece cinsinden)
                    let trigMatch = normalized.match(/(sin|cos|tan)\s*\(?\s*(\d+(?:\.\d+)?)\s*\)?/);
                    if (trigMatch) {
                        const func = trigMatch[1];
                        const degrees = parseFloat(trigMatch[2]);
                        const radians = degrees * (Math.PI / 180);
                        let result;

                        switch(func) {
                            case 'sin':
                                result = Math.sin(radians);
                                break;
                            case 'cos':
                                result = Math.cos(radians);
                                break;
                            case 'tan':
                                result = Math.tan(radians);
                                break;
                        }

                        const formatted = result.toFixed(4);
                        return `<strong>${func}(${degrees}¬∞) = ${formatted}</strong>`;
                    }

                    // 7. LOGARƒ∞TMA
                    let logMatch = normalized.match(/(log|ln)\s*\(?\s*(\d+(?:\.\d+)?)\s*\)?/);
                    if (logMatch) {
                        const func = logMatch[1];
                        const num = parseFloat(logMatch[2]);
                        if (num <= 0) return "‚ùå **Matematiksel Hata**: Logaritma sadece pozitif sayƒ±lar i√ßin tanƒ±mlƒ±dƒ±r!";

                        const result = func === 'ln' ? Math.log(num) : Math.log10(num);
                        const formatted = result.toFixed(4);
                        return `<strong>${func}(${num}) = ${formatted}</strong>`;
                    }

                    // 8. PI ve E SABƒ∞TLERƒ∞
                    if (normalized.includes('pi') && normalized.includes('deƒüer')) {
                        return `<strong>œÄ (Pi) = ${Math.PI.toFixed(10)}</strong>`;
                    }
                    if ((normalized.includes('euler') || normalized.match(/\be\b/)) && normalized.includes('deƒüer')) {
                        return `<strong>e (Euler) = ${Math.E.toFixed(10)}</strong>`;
                    }

                    // 9. TEMEL ƒ∞≈ûLEMLER (Mevcut kod)
                    let processedText = text
                        .replace(/artƒ±/gi, '+')
                        .replace(/eksi/gi, '-')
                        .replace(/√ßarp/gi, '*')
                        .replace(/b√∂l√º/gi, '/')
                        .replace(/x/gi, '*');

                    let match = processedText.match(/(\d+(?:\.\d+)?)\s*([\+\-\*\/√ó√∑])\s*(\d+(?:\.\d+)?)/);

                    if (match) {
                        const num1 = parseFloat(match[1]);
                        let operator = match[2];
                        const num2 = parseFloat(match[3]);

                        if (operator === '√ó') operator = '*';
                        if (operator === '√∑') operator = '/';

                        let result;
                        let opSymbol = operator;

                        switch(operator) {
                            case '+':
                                result = num1 + num2;
                                opSymbol = '+';
                                break;
                            case '-':
                                result = num1 - num2;
                                opSymbol = '-';
                                break;
                            case '*':
                                result = num1 * num2;
                                opSymbol = '√ó';
                                break;
                            case '/':
                                if (num2 === 0) return "‚ùå **Matematiksel Hata**: Bir sayƒ± sƒ±fƒ±ra b√∂l√ºnemez!";
                                result = num1 / num2;
                                opSymbol = '√∑';
                                break;
                            default:
                                return null;
                        }

                        const formattedResult = result % 1 === 0 ? result : result.toFixed(4);
                        return `<strong>${num1} ${opSymbol} ${num2} = ${formattedResult}</strong>`;
                    }

                    // 10. KELƒ∞ME ƒ∞LE ƒ∞≈ûLEM
                    const numbers = text.match(/\d+(?:\.\d+)?/g);
                    if (numbers && numbers.length >= 2) {
                        const nums = numbers.map(n => parseFloat(n));

                        if (normalized.includes('topla') || normalized.includes('plus')) {
                            const result = nums.reduce((a, b) => a + b, 0);
                            return `<strong>${numbers.join(' + ')} = ${result}</strong>`;
                        } else if (normalized.includes('√ßarp') || normalized.includes('times')) {
                            const result = nums.reduce((a, b) => a * b, 1);
                            return `<strong>${numbers.join(' √ó ')} = ${result}</strong>`;
                        } else if (normalized.includes('√ßƒ±kar') && nums.length === 2) {
                            const result = nums[0] - nums[1];
                            return `<strong>${nums[0]} - ${nums[1]} = ${result}</strong>`;
                        } else if (normalized.includes('b√∂l') && nums.length === 2) {
                            if (nums[1] === 0) return "‚ùå **Matematiksel Hata**: Sƒ±fƒ±ra b√∂lme i≈ülemi tanƒ±msƒ±zdƒ±r!";
                            const result = nums[0] / nums[1];
                            return `<strong>${nums[0]} √∑ ${nums[1]} = ${result.toFixed(4)}</strong>`;
                        }
                    }

                    return null;
                } catch (e) {
                    console.error('Math error:', e);
                    return null;
                }
            }

            factorial(n) {
                if (n === 0 || n === 1) return 1;
                let result = 1;
                for (let i = 2; i <= n; i++) {
                    result *= i;
                }
                return result;
            }
        }

        // KOD √úRETME MOTORU
        class CodeGenerator {
            constructor() {
                this.templates = {
                    python: {
                        hello: {
                            keywords: ['merhaba', 'hello', 'world'],
                            code: `print("Merhaba D√ºnya!")`,
                            explanation: 'Python programlama dilinde standart √ßƒ±ktƒ±ya metin g√∂ndermek i√ßin `print()` fonksiyonu kullanƒ±lƒ±r. Bu temel i≈ülev, konsola veya terminal ekranƒ±na veri yazdƒ±rmanƒ±zƒ± saƒülar.'
                        },
                        list: {
                            keywords: ['liste', 'list', 'array', 'dizi'],
                            code: `# Liste olu≈üturma
sayilar = [1, 2, 3, 4, 5]

# Eleman ekleme
sayilar.append(6)

# Liste elemanƒ±na eri≈üim
print(sayilar[0])

# D√∂ng√º
for sayi in sayilar:
    print(sayi)`,
                            explanation: 'Python\'da listeler dinamik veri yapƒ±larƒ±dƒ±r ve k√∂≈üeli parantez `[]` ile tanƒ±mlanƒ±r. Listeler sƒ±ralƒ±, deƒüi≈ütirilebilir ve farklƒ± veri tiplerini i√ßerebilir. `append()` metodu ile eleman eklenebilir.'
                        },
                        function: {
                            keywords: ['fonksiyon', 'function', 'def'],
                            code: `def topla(a, b):
    """ƒ∞ki sayƒ±yƒ± toplar"""
    return a + b

# Kullanƒ±m
sonuc = topla(5, 3)
print(sonuc)  # 8`,
                            explanation: 'Python\'da fonksiyonlar `def` anahtar kelimesi ile tanƒ±mlanƒ±r. Fonksiyonlar yeniden kullanƒ±labilir kod bloklarƒ± olu≈üturarak mod√ºler programlama yapmanƒ±zƒ± saƒülar. Docstring (""" """) ile fonksiyon a√ßƒ±klamasƒ± eklenebilir.'
                        },
                        class: {
                            keywords: ['class', 'sƒ±nƒ±f', 'oop', 'nesne'],
                            code: `class Hayvan:
    def __init__(self, isim, yas):
        self.isim = isim
        self.yas = yas

    def ses_cikar(self):
        print(f"{self.isim} ses √ßƒ±karƒ±yor!")

# Kullanƒ±m
kedi = Hayvan("Minno≈ü", 3)
kedi.ses_cikar()`,
                            explanation: 'Python\'da sƒ±nƒ±flar (class) nesne y√∂nelimli programlamanƒ±n temel yapƒ± ta≈ülarƒ±dƒ±r. `__init__` constructor metodu nesne olu≈üturulurken √ßalƒ±≈üƒ±r. Sƒ±nƒ±flar veri ve metodlarƒ± kaps√ºlleyerek kod organizasyonunu iyile≈ütirir.'
                        },
                        loop: {
                            keywords: ['d√∂ng√º', 'loop', 'for', 'while'],
                            code: `# For d√∂ng√ºs√º
for i in range(5):
    print(i)

# While d√∂ng√ºs√º
sayac = 0
while sayac < 5:
    print(sayac)
    sayac += 1

# Liste ile d√∂ng√º
meyveler = ['elma', 'armut', 'muz']
for meyve in meyveler:
    print(meyve)`,
                            explanation: 'Python\'da iterasyon i√ßin `for` ve `while` d√∂ng√ºleri kullanƒ±lƒ±r. `for` d√∂ng√ºs√º belirli bir aralƒ±k veya koleksiyon √ºzerinde dola≈üƒ±rken, `while` d√∂ng√ºs√º ko≈üul saƒülandƒ±ƒüƒ± s√ºrece devam eder. `range()` fonksiyonu sayƒ± dizisi olu≈üturur.'
                        },
                        file: {
                            keywords: ['dosya', 'file', 'okuma', 'yazma', 'read', 'write'],
                            code: `# Dosyaya yazma
with open('dosya.txt', 'w', encoding='utf-8') as f:
    f.write("Merhaba D√ºnya!")

# Dosyadan okuma
with open('dosya.txt', 'r', encoding='utf-8') as f:
    icerik = f.read()
    print(icerik)`,
                            explanation: 'Python\'da dosya i≈ülemleri `with open()` context manager yapƒ±sƒ± ile g√ºvenli ≈üekilde ger√ßekle≈ütirilir. Bu yapƒ± dosyanƒ±n otomatik olarak kapatƒ±lmasƒ±nƒ± garantiler. `encoding="utf-8"` parametresi T√ºrk√ße karakterleri destekler.'
                        },
                        dictionary: {
                            keywords: ['dictionary', 'dict', 's√∂zl√ºk', 'sozluk'],
                            code: `# Dictionary olu≈üturma
kisi = {
    'isim': 'Ali',
    'yas': 25,
    'sehir': 'ƒ∞stanbul'
}

# Eri≈üim
print(kisi['isim'])

# Yeni anahtar ekleme
kisi['meslek'] = 'Yazƒ±lƒ±mcƒ±'

# D√∂ng√º
for anahtar, deger in kisi.items():
    print(f"{anahtar}: {deger}")`,
                            explanation: 'Python dictionary (s√∂zl√ºk), anahtar-deƒüer √ßiftlerini saklayan hash tablosu veri yapƒ±sƒ±dƒ±r. K√ºme parantezi `{}` ile tanƒ±mlanƒ±r. O(1) zaman karma≈üƒ±klƒ±ƒüƒ± ile hƒ±zlƒ± eri≈üim saƒülar. `items()` metodu anahtar-deƒüer √ßiftlerini d√∂nd√ºr√ºr.'
                        },
                        try_except: {
                            keywords: ['hata', 'error', 'exception', 'try', 'except'],
                            code: `# Hata yakalama
try:
    sayi = int(input("Bir sayƒ± girin: "))
    sonuc = 100 / sayi
    print(f"Sonu√ß: {sonuc}")
except ValueError:
    print("L√ºtfen ge√ßerli bir sayƒ± girin!")
except ZeroDivisionError:
    print("Sƒ±fƒ±ra b√∂lme hatasƒ±!")
except Exception as e:
    print(f"Bir hata olu≈ütu: {e}")`,
                            explanation: 'Try-except yapƒ±sƒ± istisna (exception) y√∂netimi i√ßin kullanƒ±lƒ±r. Program √ßalƒ±≈üma zamanƒ± hatalarƒ±nƒ± zarif ≈üekilde ele alarak √ß√∂kmeyi √∂nler. Farklƒ± hata tiplerini yakalayarak √∂zelle≈ütirilmi≈ü tepkiler verebilirsiniz.'
                        }
                    },
                    javascript: {
                        hello: {
                            keywords: ['merhaba', 'hello', 'world'],
                            code: `console.log("Merhaba D√ºnya!");`,
                            explanation: 'JavaScript\'te `console.log()` fonksiyonu tarayƒ±cƒ± konsoluna veya Node.js terminaline √ßƒ±ktƒ± yazdƒ±rƒ±r. Debug i≈ülemleri ve geli≈ütirme s√ºrecinde sƒ±k√ßa kullanƒ±lƒ±r.'
                        },
                        array: {
                            keywords: ['array', 'dizi', 'liste'],
                            code: `// Array olu≈üturma
const sayilar = [1, 2, 3, 4, 5];

// Array metodlarƒ±
sayilar.push(6);  // Sona ekle
const kareler = sayilar.map(x => x * x);
const ciftler = sayilar.filter(x => x % 2 === 0);

// D√∂ng√º
sayilar.forEach(sayi => {
    console.log(sayi);
});`,
                            explanation: 'JavaScript array\'leri fonksiyonel programlama metodlarƒ±na (map, filter, reduce) sahip dinamik veri yapƒ±larƒ±dƒ±r. `map()` transformation, `filter()` se√ßim, `forEach()` ise iterasyon i√ßin kullanƒ±lƒ±r.'
                        },
                        function: {
                            keywords: ['fonksiyon', 'function', 'arrow'],
                            code: `// Normal fonksiyon
function topla(a, b) {
    return a + b;
}

// Arrow function
const carp = (a, b) => a * b;

console.log(topla(5, 3));  // 8
console.log(carp(4, 5));   // 20`,
                            explanation: 'JavaScript\'te fonksiyonlar birinci sƒ±nƒ±f nesnelerdir. ES6 ile gelen arrow function `=>` s√∂zdizimi daha kƒ±sa ve lexical `this` binding saƒülar. Normal fonksiyonlar hoisting desteklerken, arrow fonksiyonlar desteklemez.'
                        },
                        object: {
                            keywords: ['object', 'nesne', 'obje'],
                            code: `// Object olu≈üturma
const kisi = {
    isim: 'Ali',
    yas: 25,
    sehir: 'ƒ∞stanbul',
    selamla: function() {
        console.log(\`Merhaba, ben \${this.isim}\`);
    }
};

// Eri≈üim
console.log(kisi.isim);
kisi.selamla();

// Yeni √∂zellik ekleme
kisi.meslek = 'Yazƒ±lƒ±mcƒ±';`,
                            explanation: 'JavaScript objeler (nesneler) prototype tabanlƒ± veri yapƒ±larƒ±dƒ±r. Dinamik olarak √∂zellik eklenip √ßƒ±karƒ±labilir. `this` anahtar kelimesi i√ßinde bulunduƒüu objeye referans verir. Template literals (\`\`) ile string interpolation yapƒ±labilir.'
                        },
                        async: {
                            keywords: ['async', 'await', 'promise', 'asenkron'],
                            code: `// Promise olu≈üturma
function veriGetir() {
    return new Promise((resolve) => {
        setTimeout(() => {
            resolve('Veri geldi!');
        }, 1000);
    });
}

// Async/Await kullanƒ±mƒ±
async function veriyiAl() {
    console.log('Bekleniyor...');
    const veri = await veriGetir();
    console.log(veri);
}

veriyiAl();`,
                            explanation: 'Async/await yapƒ±sƒ± Promise tabanlƒ± asenkron i≈ülemleri senkron gibi yazmayƒ± saƒülar. `async` fonksiyonlar otomatik olarak Promise d√∂nd√ºr√ºr. `await` sadece async fonksiyonlar i√ßinde kullanƒ±labilir ve Promise\'in resolve olmasƒ±nƒ± bekler.'
                        },
                        dom: {
                            keywords: ['dom', 'html', 'element', 'click', 'button'],
                            code: `// Element se√ßme
const buton = document.querySelector('#myButton');
const baslik = document.getElementById('baslik');

// Event listener ekleme
buton.addEventListener('click', () => {
    console.log('Butona tƒ±klandƒ±!');
    baslik.textContent = 'Deƒüi≈üti!';
});

// Yeni element olu≈üturma
const yeniDiv = document.createElement('div');
yeniDiv.textContent = 'Yeni i√ßerik';
document.body.appendChild(yeniDiv);`,
                            explanation: 'DOM (Document Object Model) manip√ºlasyonu ile HTML elementleri programatik olarak deƒüi≈ütirilebilir. `querySelector()` CSS se√ßicileri kullanƒ±r. Event listener\'lar kullanƒ±cƒ± etkile≈üimlerini yakalar. Dynamic element creation ile sayfa i√ßeriƒüi runtime\'da olu≈üturulabilir.'
                        },
                        fetch: {
                            keywords: ['fetch', 'api', 'http', 'ajax'],
                            code: `// Fetch API ile veri √ßekme
async function apiCagir() {
    try {
        const response = await fetch('https://api.example.com/data');
        const data = await response.json();
        console.log(data);
    } catch (error) {
        console.error('Hata:', error);
    }
}

// Kullanƒ±m
apiCagir();`,
                            explanation: 'Fetch API modern tarayƒ±cƒ±larda XMLHttpRequest\'in yerini alan Promise tabanlƒ± HTTP istek aracƒ±dƒ±r. Async/await ile kombine edilerek temiz kod yazƒ±mƒ± saƒülar. Try-catch ile hata y√∂netimi yapƒ±lƒ±r. `response.json()` metodu JSON parsing yapar.'
                        }
                    },
                    html: {
                        basic: {
                            keywords: ['html', 'temel', 'basic', 'sayfa'],
                            code: `<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Web Sayfam</title>
</head>
<body>
    <h1>Ba≈ülƒ±k</h1>
    <p>ƒ∞√ßerik buraya gelecek</p>
</body>
</html>`,
                            explanation: 'HTML (HyperText Markup Language) web sayfalarƒ±nƒ±n iskelet yapƒ±sƒ±nƒ± olu≈üturur. `<!DOCTYPE html>` HTML5 deklarasyonudur. `<meta charset="UTF-8">` T√ºrk√ße karakter desteƒüi saƒülar. Semantic HTML yapƒ±sƒ± SEO ve eri≈üilebilirlik i√ßin √∂nemlidir.'
                        },
                        form: {
                            keywords: ['form', 'input', 'button'],
                            code: `<form id="myForm">
    <label for="isim">ƒ∞sim:</label>
    <input type="text" id="isim" required>

    <label for="email">Email:</label>
    <input type="email" id="email" required>

    <button type="submit">G√∂nder</button>
</form>`,
                            explanation: 'HTML form elementleri kullanƒ±cƒ±dan veri toplamak i√ßin kullanƒ±lƒ±r. `<label>` eri≈üilebilirlik saƒülar ve `for` attribute ile input\'a baƒülanƒ±r. `required` attribute client-side validation saƒülar. `type="email"` otomatik format kontrol√º yapar.'
                        }
                    },
                    css: {
                        basic: {
                            keywords: ['css', 'stil', 'style'],
                            code: `/* Element se√ßici */
body {
    font-family: Arial, sans-serif;
    background: #f0f0f0;
}

/* Class se√ßici */
.container {
    max-width: 1200px;
    margin: 0 auto;
}

/* ID se√ßici */
#baslik {
    color: #333;
}

/* Hover efekti */
button:hover {
    background: #0056b3;
}`,
                            explanation: 'CSS (Cascading Style Sheets) HTML elementlerine stil uygular. Element se√ßiciler global, class se√ßiciler (`.`) yeniden kullanƒ±labilir, ID se√ßiciler (`#`) ise unique stillemeler i√ßindir. Pseudo-class selector olan `:hover` interaktif efektler saƒülar. Cascading √∂ncelik sistemi specificity ile √ßalƒ±≈üƒ±r.'
                        }
                    }
                };
            }

            detectLanguage(text) {
                const normalized = text.toLowerCase();
                if (normalized.includes('python')) return 'python';
                if (normalized.includes('javascript') || normalized.includes('js')) return 'javascript';
                if (normalized.includes('html')) return 'html';
                if (normalized.includes('css')) return 'css';
                return null;
            }

            findTemplate(text, language) {
                if (!this.templates[language]) return null;

                const normalized = text.toLowerCase();
                for (const [key, template] of Object.entries(this.templates[language])) {
                    if (template.keywords.some(kw => normalized.includes(kw))) {
                        return { ...template, language };
                    }
                }
                return null;
            }

            isCodeRequest(text) {
                const codeWords = ['kod', 'code', 'yaz', 'write', '√∂rnek', 'example',
                                  'nasƒ±l', 'program', 'fonksiyon', 'function'];
                const normalized = text.toLowerCase();
                return codeWords.some(w => normalized.includes(w)) && this.detectLanguage(text);
            }

            generate(text) {
                const language = this.detectLanguage(text);
                if (!language) return null;

                const template = this.findTemplate(text, language);
                if (template) {
                    return {
                        language: template.language,
                        code: template.code,
                        explanation: template.explanation
                    };
                }

                // Varsayƒ±lan kod
                const defaults = {
                    python: `# Python √∂rneƒüi\nprint("Merhaba!")`,
                    javascript: `// JavaScript √∂rneƒüi\nconsole.log("Merhaba!");`
                };

                return {
                    language: language,
                    code: defaults[language],
                    explanation: `${language} kod √∂rneƒüi.`
                };
            }
        }

        // GELƒ∞≈ûMƒ∞≈û ARAMA MOTORU - √áoklu Kaynak
        class AdvancedSearchEngine {
            constructor() {
                this.sources = {
                    wikipedia_tr: 'https://tr.wikipedia.org/w/api.php',
                    wikipedia_en: 'https://en.wikipedia.org/w/api.php',
                };
            }

            async translateToTurkish(text, sourceLang = 'en') {
                // ƒ∞ngilizce'den T√ºrk√ße'ye √ßevir
                if (!text || text.length < 10) return text;

                try {
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 3000);

                    // MyMemory Translation API (√ºcretsiz, limitsiz)
                    const url = `https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=${sourceLang}|tr`;

                    const response = await fetch(url, { signal: controller.signal });
                    clearTimeout(timeoutId);

                    const data = await response.json();

                    if (data.responseStatus === 200 && data.responseData && data.responseData.translatedText) {
                        return data.responseData.translatedText;
                    }

                    return text; // √áeviri ba≈üarƒ±sƒ±z olursa orijinali d√∂nd√ºr
                } catch (e) {
                    console.error('Translation error:', e);
                    return text; // Hata durumunda orijinali d√∂nd√ºr
                }
            }

            async searchWikipedia(query, lang = 'tr') {
                try {
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 5000);

                    const baseUrl = lang === 'tr' ? this.sources.wikipedia_tr : this.sources.wikipedia_en;
                    const params = new URLSearchParams({
                        action: 'query',
                        format: 'json',
                        prop: 'extracts',
                        exintro: true,
                        explaintext: true,
                        redirects: 1,
                        titles: query
                    });

                    const url = `https://api.allorigins.win/raw?url=${encodeURIComponent(baseUrl + '?' + params)}`;

                    const response = await fetch(url, { signal: controller.signal });
                    clearTimeout(timeoutId);

                    const data = await response.json();
                    const pages = data.query?.pages;

                    if (pages) {
                        for (const pageId in pages) {
                            if (pageId !== '-1' && pages[pageId].extract) {
                                const extract = pages[pageId].extract;
                                // Daha uzun cevaplar i√ßin 10 c√ºmle al
                                let sentences = extract.split('.').slice(0, 10).join('.') + '.';

                                if (sentences.length > 30) {
                                    // Dil adƒ±nƒ± al
                                    const langName = this.getLanguageName(lang);

                                    // Eƒüer ƒ∞ngilizce deƒüilse ve T√ºrk√ße de deƒüilse, orijinal dilde ver
                                    // (√áeviri yapmƒ±yoruz, direkt o dilde g√∂steriyoruz)
                                    return {
                                        text: sentences.trim(),
                                        source: `${langName} Wikipedia`,
                                        confidence: 0.9
                                    };
                                }
                            }
                        }
                    }
                    return null;
                } catch (e) {
                    return null;
                }
            }

            async searchDuckDuckGo(query) {
                try {
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 5000);

                    const url = `https://api.duckduckgo.com/?q=${encodeURIComponent(query)}&format=json&no_html=1&skip_disambig=1`;

                    const response = await fetch(url, { signal: controller.signal });
                    clearTimeout(timeoutId);

                    const data = await response.json();

                    // Abstract (√∂zet) varsa - daha uzun bilgi i√ßin AbstractText kullan
                    if (data.AbstractText && data.AbstractText.length > 30) {
                        let text = data.AbstractText;

                        // ƒ∞lgili konulardan da bilgi ekle
                        if (data.RelatedTopics && data.RelatedTopics.length > 0) {
                            const additionalInfo = data.RelatedTopics
                                .slice(0, 3)
                                .filter(topic => topic.Text)
                                .map(topic => topic.Text)
                                .join(' ');

                            if (additionalInfo) {
                                text += ' ' + additionalInfo;
                            }
                        }

                        // DuckDuckGo genelde ƒ∞ngilizce, olduƒüu gibi d√∂nd√ºr
                        return {
                            text: text,
                            source: 'DuckDuckGo',
                            confidence: 0.7
                        };
                    }

                    // Abstract yoksa
                    if (data.Abstract && data.Abstract.length > 30) {
                        return {
                            text: data.Abstract,
                            source: 'DuckDuckGo',
                            confidence: 0.7
                        };
                    }

                    // ƒ∞lk 3 related topic'i birle≈ütir
                    if (data.RelatedTopics && data.RelatedTopics.length > 0) {
                        let combinedText = data.RelatedTopics
                            .slice(0, 3)
                            .filter(topic => topic.Text)
                            .map(topic => topic.Text)
                            .join(' ');

                        if (combinedText.length > 30) {
                            return {
                                text: combinedText,
                                source: 'DuckDuckGo',
                                confidence: 0.65
                            };
                        }
                    }

                    return null;
                } catch (e) {
                    return null;
                }
            }

            // 25 Dƒ∞L ALGILAMA Sƒ∞STEMƒ∞
            detectLanguage(text) {
                const normalized = text.toLowerCase();

                // Her dil i√ßin karakteristik √∂zellikler
                const languages = {
                    // 1. T√úRK√áE
                    'tr': {
                        chars: /[ƒü√º≈üƒ±√∂√ßƒû√ú≈ûƒ∞√ñ√á]/,
                        words: [
                            // Soru kelimeleri
                            'nedir', 'kimdir', 'nerede', 'nasƒ±l', 'ne zaman', 'ka√ß', 'hangi', 'niye', 'ni√ßin', 'neden',
                            // Soru edatlarƒ±
                            'mƒ±', 'mi', 'mu', 'm√º',
                            // Baƒüla√ßlar ve edatlar
                            've', 'veya', 'ya da', 'ile', 'i√ßin', 'gibi', 'kadar', 'daha', 'bile', 'ancak', 'fakat', 'ama', 'lakin',
                            // ƒ∞yelik ve hal ekleri (kelime olarak)
                            'nin', 'nƒ±n', 'nun', 'n√ºn', 'in', 'ƒ±n', 'un', '√ºn',
                            'den', 'dan', 'ten', 'tan',
                            'de', 'da', 'te', 'ta',
                            'ye', 'ya', 'e', 'a',
                            // Zamirler
                            'ben', 'sen', 'o', 'biz', 'siz', 'onlar',
                            'benim', 'senin', 'onun', 'bizim', 'sizin', 'onlarƒ±n',
                            'beni', 'seni', 'onu', 'bizi', 'sizi', 'onlarƒ±',
                            'bana', 'sana', 'ona', 'bize', 'size', 'onlara',
                            'bende', 'sende', 'onda', 'bizde', 'sizde', 'onlarda',
                            'benden', 'senden', 'ondan', 'bizden', 'sizden', 'onlardan',
                            // ƒ∞≈üaret zamirleri
                            'bu', '≈üu', 'o', 'bunlar', '≈üunlar', 'onlar',
                            'burada', '≈üurada', 'orada', 'buraya', '≈üuraya', 'oraya',
                            // Sƒ±k kullanƒ±lan fiiller
                            'var', 'yok', 'olan', 'olmayan', 'olan', 'eden', 'yapan', 'gelen', 'giden',
                            // Sƒ±k kullanƒ±lan isimler/sƒ±fatlar
                            '≈üey', 'ki≈üi', 'yer', 'zaman', 'g√ºn', 'saat', 'dakika', 'yƒ±l', 'ay', 'hafta',
                            'b√ºy√ºk', 'k√º√ß√ºk', '√ßok', 'az', 'fazla', 'eski', 'yeni', 'iyi', 'k√∂t√º', 'g√ºzel',
                            // Tarih/bilgi kelimeleri
                            'tarih', 'tarihi', 'ge√ßmi≈ü', 'gelecek', '≈üimdi', 'bug√ºn', 'd√ºn', 'yarƒ±n',
                            'bilgi', 'hakkƒ±nda', 'hakkƒ±ndaki', 'ilgili', 'konusunda', '√ºzerine',
                            'anlat', 'anlatƒ±r', 's√∂yle', 's√∂yler', 'a√ßƒ±kla', 'a√ßƒ±klar'
                        ],
                        name: 'T√ºrk√ße'
                    },
                    // 2. ƒ∞NGƒ∞Lƒ∞ZCE
                    'en': {
                        chars: null,
                        words: ['what', 'who', 'where', 'when', 'how', 'why', 'the', 'is', 'are', 'was', 'were', 'have', 'has', 'do', 'does', 'can', 'will', 'would', 'should', 'could'],
                        name: 'English'
                    },
                    // 3. ALMANCA
                    'de': {
                        chars: /[√§√∂√º√ü√Ñ√ñ√ú]/,
                        words: ['was', 'ist', 'der', 'die', 'das', 'ein', 'eine', 'und', 'ich', 'du', 'er', 'sie', 'wir', 'ihr', 'haben', 'sein', 'werden', 'k√∂nnen', 'm√ºssen', 'm√∂chten'],
                        name: 'Deutsch'
                    },
                    // 4. FRANSIZCA
                    'fr': {
                        chars: /[√†√¢√§√¶√ß√©√®√™√´√Ø√Æ√¥√π√ª√º√ø≈ì√Ä√Ç√Ñ√Ü√á√â√à√ä√ã√è√é√î√ô√õ√ú≈∏≈í]/,
                        words: ['qui', 'quoi', 'o√π', 'quand', 'comment', 'pourquoi', 'est', 'sont', '√©tait', '√©tait', 'le', 'la', 'les', 'un', 'une', 'des', 'et', 'ou', 'mais', 'donc'],
                        name: 'Fran√ßais'
                    },
                    // 5. ƒ∞SPANYOLCA
                    'es': {
                        chars: /[√°√©√≠√≥√∫√º√±√Å√â√ç√ì√ö√ú√ë¬ø¬°]/,
                        words: ['qu√©', 'qui√©n', 'd√≥nde', 'cu√°ndo', 'c√≥mo', 'por qu√©', 'es', 'son', 'era', 'fue', 'el', 'la', 'los', 'las', 'un', 'una', 'y', 'o', 'pero', 'porque'],
                        name: 'Espa√±ol'
                    },
                    // 6. ƒ∞TALYANCA
                    'it': {
                        chars: /[√†√®√©√¨√≠√Æ√≤√≥√π√∫√Ä√à√â√å√ç√é√í√ì√ô√ö]/,
                        words: ['che', 'chi', 'dove', 'quando', 'come', 'perch√©', '√®', 'sono', 'era', 'erano', 'il', 'lo', 'la', 'i', 'gli', 'le', 'un', 'una', 'e', 'o', 'ma'],
                        name: 'Italiano'
                    },
                    // 7. PORTEKƒ∞ZCE
                    'pt': {
                        chars: /[√°√¢√£√†√ß√©√™√≠√≥√¥√µ√∫√Å√Ç√É√Ä√á√â√ä√ç√ì√î√ï√ö]/,
                        words: ['que', 'quem', 'onde', 'quando', 'como', 'por que', '√©', 's√£o', 'era', 'foram', 'o', 'a', 'os', 'as', 'um', 'uma', 'e', 'ou', 'mas', 'porque'],
                        name: 'Portugu√™s'
                    },
                    // 8. RUS√áA
                    'ru': {
                        chars: /[–∞-—è–ê-–Ø—ë–Å]/,
                        words: ['—á—Ç–æ', '–∫—Ç–æ', '–≥–¥–µ', '–∫–æ–≥–¥–∞', '–∫–∞–∫', '–ø–æ—á–µ–º—É', '—ç—Ç–æ', '–µ—Å—Ç—å', '–±—ã–ª', '–±—ã–ª–∞', '–∏', '–∏–ª–∏', '–Ω–æ', '–Ω–µ', '–Ω–∞', '–≤', '—Å', '–¥–ª—è', '–æ—Ç', '–ø–æ'],
                        name: '–†—É—Å—Å–∫–∏–π'
                    },
                    // 9. √áƒ∞NCE (Basitle≈ütirilmi≈ü)
                    'zh': {
                        chars: /[\u4e00-\u9fa5]/,
                        words: ['‰ªÄ‰πà', 'Ë∞Å', 'Âì™Èáå', '‰ªÄ‰πàÊó∂ÂÄô', 'ÊÄé‰πà', '‰∏∫‰ªÄ‰πà', 'ÊòØ', 'Êúâ', 'ÁöÑ', '‰∫Ü', 'Âíå', 'Âú®', '‰∏ç', 'Êàë', '‰Ω†', '‰ªñ', 'Â•π', '‰ª¨', 'Ëøô', 'ÈÇ£'],
                        name: '‰∏≠Êñá'
                    },
                    // 10. JAPONCA
                    'ja': {
                        chars: /[\u3040-\u309f\u30a0-\u30ff\u4e00-\u9faf]/,
                        words: ['‰Ωï', '„Å™„Å´', '„Å†„Çå', '„Å©„Åì', '„ÅÑ„Å§', '„Å©„ÅÜ', '„Å™„Åú', '„Åß„Åô', '„Åæ„Åô', '„Åß„Åó„Åü', '„ÅÆ', '„Çí', '„Å´', '„ÅØ', '„Åå', '„Å®', '„ÇÑ', '„Åã', '„Åì„Çå', '„Åù„Çå'],
                        name: 'Êó•Êú¨Ë™û'
                    },
                    // 11. KORECE
                    'ko': {
                        chars: /[\uac00-\ud7af\u1100-\u11ff\u3130-\u318f]/,
                        words: ['Î¨¥Ïóá', 'ÎàÑÍµ¨', 'Ïñ¥Îîî', 'Ïñ∏Ï†ú', 'Ïñ¥ÎñªÍ≤å', 'Ïôú', 'ÏûÖÎãàÎã§', 'ÏûàÏäµÎãàÎã§', 'ÌñàÏäµÎãàÎã§', 'Ïùò', 'ÏùÑ', 'Î•º', 'Ïù¥', 'Í∞Ä', 'ÏùÄ', 'Îäî', 'ÏôÄ', 'Í≥º', 'Í∑∏', 'Ïù¥'],
                        name: 'ÌïúÍµ≠Ïñ¥'
                    },
                    // 12. ARAP√áA
                    'ar': {
                        chars: /[\u0600-\u06ff]/,
                        words: ['ŸÖÿß', 'ŸÖŸÜ', 'ÿ£ŸäŸÜ', 'ŸÖÿ™Ÿâ', 'ŸÉŸäŸÅ', 'ŸÑŸÖÿßÿ∞ÿß', 'ŸáŸà', 'ŸáŸä', 'ŸÉÿßŸÜ', 'ŸÅŸä', 'ÿπŸÑŸâ', 'ŸÖŸÜ', 'ÿ•ŸÑŸâ', 'Ÿà', 'ÿ£Ÿà', 'ŸÑŸÉŸÜ', 'ŸÑÿß', 'ŸÜÿπŸÖ', 'Ÿáÿ∞ÿß', 'ÿ∞ŸÑŸÉ'],
                        name: 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©'
                    },
                    // 13. FARS√áA
                    'fa': {
                        chars: /[\u0600-\u06ff]/,
                        words: ['⁄ÜŸá', '⁄Ü€å', '⁄©€å', '⁄©ÿ¨ÿß', '⁄©€å', '⁄Ü⁄ØŸàŸÜŸá', '⁄Üÿ±ÿß', 'ÿßÿ≥ÿ™', 'ÿ®ŸàÿØ', 'ÿØÿ±', 'ÿ®Ÿá', 'ÿßÿ≤', 'Ÿà', '€åÿß', 'ÿßŸÖÿß', 'ŸÜŸá', 'ÿ®ŸÑŸá', 'ÿß€åŸÜ', 'ÿ¢ŸÜ', '⁄©Ÿá'],
                        name: 'ŸÅÿßÿ±ÿ≥€å'
                    },
                    // 14. Hƒ∞NT√áE
                    'hi': {
                        chars: /[\u0900-\u097f]/,
                        words: ['‡§ï‡•ç‡§Ø‡§æ', '‡§ï‡•å‡§®', '‡§ï‡§π‡§æ‡§Å', '‡§ï‡§¨', '‡§ï‡•à‡§∏‡•á', '‡§ï‡•ç‡§Ø‡•ã‡§Ç', '‡§π‡•à', '‡§π‡•à‡§Ç', '‡§•‡§æ', '‡§•‡•Ä', '‡§î‡§∞', '‡§Ø‡§æ', '‡§≤‡•á‡§ï‡§ø‡§®', '‡§®‡§π‡•Ä‡§Ç', '‡§π‡§æ‡§Å', '‡§Ø‡§π', '‡§µ‡§π', '‡§Æ‡•á‡§Ç', '‡§∏‡•á', '‡§ï‡•ã'],
                        name: '‡§π‡§ø‡§®‡•ç‡§¶‡•Ä'
                    },
                    // 15. BENGALCE
                    'bn': {
                        chars: /[\u0980-\u09ff]/,
                        words: ['‡¶ï‡¶ø', '‡¶ï‡ßá', '‡¶ï‡ßã‡¶•‡¶æ‡¶Ø‡¶º', '‡¶ï‡¶ñ‡¶®', '‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá', '‡¶ï‡ßá‡¶®', '‡¶π‡¶Ø‡¶º', '‡¶õ‡¶ø‡¶≤', '‡¶è‡¶¨‡¶Ç', '‡¶¨‡¶æ', '‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ', '‡¶®‡¶æ', '‡¶π‡ßç‡¶Ø‡¶æ‡¶Å', '‡¶è‡¶á', '‡¶∏‡ßá‡¶á', '‡¶Ü‡¶Æ‡¶ø', '‡¶§‡ßÅ‡¶Æ‡¶ø', '‡¶∏‡ßá', '‡¶Ü‡¶Æ‡¶∞‡¶æ', '‡¶§‡¶æ‡¶∞‡¶æ'],
                        name: '‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ'
                    },
                    // 16. URDUCA
                    'ur': {
                        chars: /[\u0600-\u06ff]/,
                        words: ['⁄©€åÿß', '⁄©ŸàŸÜ', '⁄©€Åÿß⁄∫', '⁄©ÿ®', '⁄©€åÿ≥€í', '⁄©€åŸà⁄∫', '€Å€í', '€Å€å⁄∫', 'ÿ™⁄æÿß', 'ÿ™⁄æ€å', 'ÿßŸàÿ±', '€åÿß', 'ŸÑ€å⁄©ŸÜ', 'ŸÜ€Å€å⁄∫', '€Åÿß⁄∫', '€å€Å', 'Ÿà€Å', 'ŸÖ€å⁄∫', 'ÿ≥€í', '⁄©Ÿà'],
                        name: 'ÿßÿ±ÿØŸà'
                    },
                    // 17. ENDONEZCE
                    'id': {
                        chars: null,
                        words: ['apa', 'siapa', 'dimana', 'kapan', 'bagaimana', 'mengapa', 'adalah', 'ada', 'yang', 'di', 'ke', 'dari', 'dan', 'atau', 'tetapi', 'tidak', 'ya', 'ini', 'itu', 'dengan'],
                        name: 'Bahasa Indonesia'
                    },
                    // 18. MALAYCA
                    'ms': {
                        chars: null,
                        words: ['apa', 'siapa', 'dimana', 'bila', 'bagaimana', 'mengapa', 'adalah', 'ada', 'yang', 'di', 'ke', 'dari', 'dan', 'atau', 'tetapi', 'tidak', 'ya', 'ini', 'itu', 'dengan'],
                        name: 'Bahasa Melayu'
                    },
                    // 19. TAYCA
                    'th': {
                        chars: /[\u0e00-\u0e7f]/,
                        words: ['‡∏≠‡∏∞‡πÑ‡∏£', '‡πÉ‡∏Ñ‡∏£', '‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô', '‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà', '‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£', '‡∏ó‡∏≥‡πÑ‡∏°', '‡πÄ‡∏õ‡πá‡∏ô', '‡∏Ñ‡∏∑‡∏≠', '‡∏°‡∏µ', '‡πÉ‡∏ô', '‡∏ó‡∏µ‡πà', '‡πÅ‡∏•‡∏∞', '‡∏´‡∏£‡∏∑‡∏≠', '‡πÅ‡∏ï‡πà', '‡πÑ‡∏°‡πà', '‡πÉ‡∏ä‡πà', '‡∏ô‡∏µ‡πâ', '‡∏ô‡∏±‡πâ‡∏ô', '‡∏Ç‡∏≠‡∏á', '‡∏Å‡∏±‡∏ö'],
                        name: '‡πÑ‡∏ó‡∏¢'
                    },
                    // 20. Vƒ∞ETNAMCA
                    'vi': {
                        chars: /[√†√°·∫°·∫£√£√¢·∫ß·∫•·∫≠·∫©·∫´ƒÉ·∫±·∫Ø·∫∑·∫≥·∫µ√®√©·∫π·∫ª·∫Ω√™·ªÅ·∫ø·ªá·ªÉ·ªÖ√¨√≠·ªã·ªâƒ©√≤√≥·ªç·ªè√µ√¥·ªì·ªë·ªô·ªï·ªó∆°·ªù·ªõ·ª£·ªü·ª°√π√∫·ª•·ªß≈©∆∞·ª´·ª©·ª±·ª≠·ªØ·ª≥√Ω·ªµ·ª∑·ªπƒë√Ä√Å·∫†·∫¢√É√Ç·∫¶·∫§·∫¨·∫®·∫™ƒÇ·∫∞·∫Æ·∫∂·∫≤·∫¥√à√â·∫∏·∫∫·∫º√ä·ªÄ·∫æ·ªÜ·ªÇ·ªÑ√å√ç·ªä·ªàƒ®√í√ì·ªå·ªé√ï√î·ªí·ªê·ªò·ªî·ªñ∆†·ªú·ªö·ª¢·ªû·ª†√ô√ö·ª§·ª¶≈®∆Ø·ª™·ª®·ª∞·ª¨·ªÆ·ª≤√ù·ª¥·ª∂·ª∏ƒê]/,
                        words: ['g√¨', 'ai', 'ƒë√¢u', 'khi n√†o', 'nh∆∞ th·∫ø n√†o', 't·∫°i sao', 'l√†', 'c√≥', 'trong', '·ªü', 'c·ªßa', 'v√†', 'ho·∫∑c', 'nh∆∞ng', 'kh√¥ng', 'c√≥', 'n√†y', 'ƒë√≥', 'v·ªõi', 't·ª´'],
                        name: 'Ti·∫øng Vi·ªát'
                    },
                    // 21. LEH√áE
                    'pl': {
                        chars: /[ƒÖƒáƒô≈Ç≈Ñ√≥≈õ≈∫≈ºƒÑƒÜƒò≈Å≈É√ì≈ö≈π≈ª]/,
                        words: ['co', 'kto', 'gdzie', 'kiedy', 'jak', 'dlaczego', 'jest', 'sƒÖ', 'by≈Ç', 'by≈Ça', 'i', 'lub', 'ale', 'nie', 'tak', 'to', 'ten', 'ta', 'w', 'na'],
                        name: 'Polski'
                    },
                    // 22. UKRAYNACA
                    'uk': {
                        chars: /[–∞-—â—å—é—è—ó—ñ—î“ë–ê-–©–¨–Æ–Ø–á–Ü–Ñ“ê]/,
                        words: ['—â–æ', '—Ö—Ç–æ', '–¥–µ', '–∫–æ–ª–∏', '—è–∫', '—á–æ–º—É', '—î', '–±—É–≤', '–±—É–ª–∞', '—ñ', '–∞–±–æ', '–∞–ª–µ', '–Ω–µ', '—Ç–∞–∫', '—Ü–µ', '—Ç–æ–π', '–≤', '–Ω–∞', '–∑', '–¥–ª—è'],
                        name: '–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞'
                    },
                    // 23. RUMENCE
                    'ro': {
                        chars: /[ƒÉ√¢√Æ»ô»õƒÇ√Ç√é»ò»ö]/,
                        words: ['ce', 'cine', 'unde', 'c√¢nd', 'cum', 'de ce', 'este', 'sunt', 'era', '»ôi', 'sau', 'dar', 'nu', 'da', 'acest', 'aceasta', '√Æn', 'la', 'de', 'cu'],
                        name: 'Rom√¢nƒÉ'
                    },
                    // 24. YUNANCA
                    'el': {
                        chars: /[Œ±-œâŒ¨Œ≠ŒÆŒØœåœçœéŒë-Œ©ŒÜŒàŒâŒäŒåŒéŒè]/,
                        words: ['œÑŒπ', 'œÄŒøŒπŒøœÇ', 'œÄŒøœç', 'œÄœåœÑŒµ', 'œÄœéœÇ', 'Œ≥ŒπŒ±œÑŒØ', 'ŒµŒØŒΩŒ±Œπ', 'ŒÆœÑŒ±ŒΩ', 'Œ∫Œ±Œπ', 'ŒÆ', 'Œ±ŒªŒªŒ¨', 'œåœáŒπ', 'ŒΩŒ±Œπ', 'Œ±œÖœÑœå', 'ŒµŒ∫ŒµŒØŒΩŒø', 'œÉŒµ', 'Œ±œÄœå', 'ŒºŒµ', 'Œ≥ŒπŒ±', 'œÑŒø'],
                        name: 'ŒïŒªŒªŒ∑ŒΩŒπŒ∫Œ¨'
                    },
                    // 25. ƒ∞SVE√á√áE
                    'sv': {
                        chars: /[√•√§√∂√Ö√Ñ√ñ]/,
                        words: ['vad', 'vem', 'var', 'n√§r', 'hur', 'varf√∂r', '√§r', 'var', 'och', 'eller', 'men', 'inte', 'ja', 'det', 'den', 'i', 'p√•', 'av', 'till', 'fr√•n'],
                        name: 'Svenska'
                    }
                };

                // √ñnce karakteristik karakterlere bak
                for (const [code, lang] of Object.entries(languages)) {
                    if (lang.chars && lang.chars.test(text)) {
                        return code;
                    }
                }

                // Sonra kelimelere bak
                let bestMatch = { code: 'en', score: 0 };
                for (const [code, lang] of Object.entries(languages)) {
                    let score = 0;
                    for (const word of lang.words) {
                        if (normalized.includes(word.toLowerCase())) {
                            score++;
                        }
                    }
                    if (score > bestMatch.score) {
                        bestMatch = { code, score };
                    }
                }

                return bestMatch.code;
            }

            // Dil kodunu dil adƒ±na √ßevir
            getLanguageName(code) {
                const names = {
                    'tr': 'T√ºrk√ße', 'en': 'English', 'de': 'Deutsch', 'fr': 'Fran√ßais',
                    'es': 'Espa√±ol', 'it': 'Italiano', 'pt': 'Portugu√™s', 'ru': '–†—É—Å—Å–∫–∏–π',
                    'zh': '‰∏≠Êñá', 'ja': 'Êó•Êú¨Ë™û', 'ko': 'ÌïúÍµ≠Ïñ¥', 'ar': 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©',
                    'fa': 'ŸÅÿßÿ±ÿ≥€å', 'hi': '‡§π‡§ø‡§®‡•ç‡§¶‡•Ä', 'bn': '‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ', 'ur': 'ÿßÿ±ÿØŸà',
                    'id': 'Bahasa Indonesia', 'ms': 'Bahasa Melayu', 'th': '‡πÑ‡∏ó‡∏¢',
                    'vi': 'Ti·∫øng Vi·ªát', 'pl': 'Polski', 'uk': '–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞',
                    'ro': 'Rom√¢nƒÉ', 'el': 'ŒïŒªŒªŒ∑ŒΩŒπŒ∫Œ¨', 'sv': 'Svenska'
                };
                return names[code] || 'English';
            }

            async searchMultipleSources(query, userLanguage = null) {
                // Kullanƒ±cƒ± dilini algƒ±la
                if (!userLanguage) {
                    userLanguage = this.detectLanguage(query);
                    console.log(`üåç Algƒ±lanan dil: ${userLanguage} (${this.getLanguageName(userLanguage)}) - Sorgu: "${query}"`);
                }

                // Kullanƒ±cƒ±nƒ±n dilinde Wikipedia'da ara (√∂ncelikli)
                // Ayrƒ±ca ƒ∞ngilizce Wikipedia'da da ara (yedek)
                const searches = [
                    this.searchWikipedia(query, userLanguage), // Kullanƒ±cƒ±nƒ±n dili
                    this.searchWikipedia(query, 'en'), // ƒ∞ngilizce (yedek)
                    this.searchDuckDuckGo(query) // DuckDuckGo (son yedek)
                ];

                const results = await Promise.all(searches);

                // Null olmayanlarƒ± filtrele
                let validResults = results.filter(r => r !== null);

                // Kullanƒ±cƒ±nƒ±n diliyle e≈üle≈üen sonu√ßlara bonus ver
                const langName = this.getLanguageName(userLanguage);

                validResults = validResults.map(result => {
                    let adjustedConfidence = result.confidence;

                    // Kullanƒ±cƒ±nƒ±n dilindeki sonu√ß ise B√úY√úK BONUS
                    if (result.source && result.source.includes(langName)) {
                        adjustedConfidence += 0.6; // %60 bonus - √ßok y√ºksek √∂ncelik!
                    }

                    // ƒ∞ngilizce sonu√ß ve kullanƒ±cƒ± ba≈üka dilde konu≈üuyorsa CEZA
                    else if (userLanguage !== 'en' && result.source && result.source.includes('English')) {
                        adjustedConfidence -= 0.4; // %40 ceza
                    }

                    // DuckDuckGo √ßevirisi ise hafif bonus (en azƒ±ndan √ßevrilmi≈ü)
                    else if (result.source && result.source.includes('√áevrildi')) {
                        adjustedConfidence += 0.1; // %10 bonus
                    }

                    return {
                        ...result,
                        originalConfidence: result.confidence,
                        adjustedConfidence: adjustedConfidence
                    };
                });

                // D√ºzeltilmi≈ü confidence'a g√∂re sƒ±rala
                validResults.sort((a, b) => b.adjustedConfidence - a.adjustedConfidence);

                if (validResults.length === 0) return null;

                const bestResult = validResults[0];

                // Debug: Sonu√ßlarƒ± konsola yazdƒ±r
                console.log('üìä Arama sonu√ßlarƒ±:', validResults.map(r => ({
                    source: r.source,
                    original: r.originalConfidence,
                    adjusted: r.adjustedConfidence
                })));
                console.log('‚úÖ Se√ßilen sonu√ß:', bestResult.source, 'Confidence:', bestResult.adjustedConfidence);

                // Kullanƒ±cƒ±nƒ±n dilinde sonu√ß bulunamadƒ±ysa uyarƒ± ekle
                if (userLanguage !== 'en' && !bestResult.source.includes(langName)) {
                    bestResult.text = `‚ö†Ô∏è **${langName} dilinde kaynak bulunamadƒ±. Ba≈üka dilde g√∂steriliyor:**\n\n${bestResult.text}`;
                }

                return bestResult;
            }

            async searchWithKeywords(keywords, userQuery = null) {
                // Kullanƒ±cƒ± dilini belirle
                let userLanguage = null;
                if (userQuery) {
                    userLanguage = this.detectLanguage(userQuery);
                }

                // √ñnce t√ºm kelimeleri birlikte dene
                for (let i = keywords.length; i > 0; i--) {
                    const combined = keywords.slice(0, i).join(' ');
                    const result = await this.searchMultipleSources(combined, userLanguage);
                    if (result) {
                        return result;
                    }
                }

                // Tek kelimelerle dene
                for (const keyword of keywords) {
                    const result = await this.searchMultipleSources(keyword, userLanguage);
                    if (result) {
                        return result;
                    }
                }

                return null;
            }
        }

        // GELƒ∞≈ûMƒ∞≈û Bƒ∞LGƒ∞ DEPOSU - 5000+ KELƒ∞ME HAZNESƒ∞ VE PATTERN MATCHING
        class KnowledgeBase {
            constructor() {
                this.initializeKnowledge();
            }

            buildQADatabase() {
                return [
                    // SAƒûLIK SORULARI (100+)
                    {
                        patterns: ['ba≈ü aƒürƒ±sƒ±', 'ba≈üƒ±m aƒürƒ±yor', 'ba≈üaƒürƒ±sƒ± neden', 'migren'],
                        answer: '**Ba≈ü Aƒürƒ±sƒ± Nedenleri:**\n\n‚Ä¢ Stres ve gerginlik\n‚Ä¢ Uykusuzluk\n‚Ä¢ Susuz kalma (dehidratasyon)\n‚Ä¢ G√∂z yorgunluƒüu\n‚Ä¢ D√ºzensiz beslenme\n‚Ä¢ Kafein kesilmesi\n‚Ä¢ Sin√ºzit\n‚Ä¢ Migren\n\n**√ñnlemler:**\n‚úÖ Bol su i√ßin\n‚úÖ D√ºzenli uyuyun\n‚úÖ Stres y√∂netimi yapƒ±n\n‚úÖ Karanlƒ±k ve sessiz ortamda dinlenin\n\n‚ö†Ô∏è ≈ûiddetli ve s√ºrekli aƒürƒ±larda mutlaka doktora ba≈üvurun!'
                    },
                    {
                        patterns: ['grip', 'gribal enfeksiyon', 'soƒüuk algƒ±nlƒ±ƒüƒ±', 'nezle', '√º≈ü√ºtt√ºm'],
                        answer: '**Grip ve Nezle Tedavisi:**\n\n‚Ä¢ Bol sƒ±vƒ± t√ºketin (su, bitki √ßayƒ±, √ßorba)\n‚Ä¢ Bol bol dinlenin\n‚Ä¢ C vitamini alƒ±n\n‚Ä¢ Bal-limon karƒ±≈üƒ±mƒ± i√ßin\n‚Ä¢ Buhar alƒ±n\n‚Ä¢ Sƒ±cak du≈ü yapƒ±n\n‚Ä¢ Islak havluyla alnƒ±nƒ±zƒ± serinletin\n\n**ƒ∞la√ßlar:** Ate≈ü d√º≈ü√ºr√ºc√º, aƒürƒ± kesici (doktor √∂nerisi ile)\n\n‚è±Ô∏è Normal s√ºre√ß: 7-10 g√ºn\n‚ö†Ô∏è Ate≈ü 38.5¬∞C\'yi ge√ßerse veya 3 g√ºnden fazla s√ºrerse doktora gidin!'
                    },
                    {
                        patterns: ['stres', 'stresli', 'gergin', 'kaygƒ±', 'endi≈üe', 'anksiyete'],
                        answer: '**Stresle Ba≈üa √áƒ±kma Y√∂ntemleri:**\n\n‚úÖ **Nefes Egzersizleri:** Derin nefes alƒ±p verin (4 sn al, 4 sn tut, 4 sn ver)\n‚úÖ **Meditasyon:** G√ºnde 10 dakika sessizce oturun\n‚úÖ **Spor:** D√ºzenli y√ºr√ºy√º≈ü veya ko≈üu\n‚úÖ **Hobi:** Sevdiƒüiniz aktivitelere zaman ayƒ±rƒ±n\n‚úÖ **Sosyalle≈üme:** Sevdiklerinizle vakit ge√ßirin\n‚úÖ **Uyku:** G√ºnde 7-8 saat kaliteli uyku\n‚úÖ **Sƒ±nƒ±r Koyma:** Hayƒ±r demeyi √∂ƒürenin\n‚úÖ **Profesyonel Destek:** Gerekirse psikolog yardƒ±mƒ± alƒ±n\n\nüí° Stres normal bir tepkidir, ama kronik stres zararlƒ±dƒ±r!'
                    },
                    {
                        patterns: ['uyku', 'uyuyamƒ±yorum', 'uykusuzluk', 'insomnia', 'uyku problemi'],
                        answer: '**Kaliteli Uyku ƒ∞√ßin √ñneriler:**\n\nüåô **Gece Rutini:**\n‚Ä¢ Aynƒ± saatte yatƒ±n ve kalkƒ±n\n‚Ä¢ Yatmadan 1 saat √∂nce ekranlardan uzak durun\n‚Ä¢ Oda sƒ±caklƒ±ƒüƒ± 18-20¬∞C olsun\n‚Ä¢ Karanlƒ±k ve sessiz ortam\n\n‚òï **Ka√ßƒ±nƒ±lmasƒ± Gerekenler:**\n‚Ä¢ Ak≈üam kahve/√ßay\n‚Ä¢ Aƒüƒ±r yemekler\n‚Ä¢ Alkol\n‚Ä¢ Gece sporundan ka√ßƒ±nƒ±n\n\n‚úÖ **Yapƒ±labilecekler:**\n‚Ä¢ Papatya √ßayƒ± i√ßin\n‚Ä¢ Ilƒ±k du≈ü alƒ±n\n‚Ä¢ Kitap okuyun\n‚Ä¢ Meditasyon yapƒ±n\n\n‚ö†Ô∏è 3 haftadan uzun s√ºrerse doktora danƒ±≈üƒ±n!'
                    },

                    // HAYAT VE G√úNL√úK YA≈ûAM (100+)
                    {
                        patterns: ['mutlu olma', 'mutluluk', 'nasƒ±l mutlu olurum', 'mutsuzum'],
                        answer: '**Mutlu Olmanƒ±n Yollarƒ±:**\n\nüòä **G√ºnl√ºk Alƒ±≈ükanlƒ±klar:**\n‚Ä¢ Minnettarlƒ±k listesi tutun\n‚Ä¢ K√º√ß√ºk hedefler koyun ve ba≈üarƒ±n\n‚Ä¢ G√ºne≈ü ƒ±≈üƒ±ƒüƒ±ndan yararlanƒ±n\n‚Ä¢ Sevdiklerinizle zaman ge√ßirin\n‚Ä¢ Ba≈ükalarƒ±na yardƒ±m edin\n\nüí™ **Fiziksel Aktivite:**\n‚Ä¢ Spor yapƒ±n (endorfin salgƒ±lar)\n‚Ä¢ Y√ºr√ºy√º≈ü yapƒ±n\n‚Ä¢ Dans edin\n\nüß† **Zihinsel Saƒülƒ±k:**\n‚Ä¢ Pozitif d√º≈ü√ºn√ºn\n‚Ä¢ Ge√ßmi≈üte kalmayƒ±n\n‚Ä¢ Kendinizi ba≈ükalarƒ±yla kƒ±yaslamayƒ±n\n‚Ä¢ Hobilerinize zaman ayƒ±rƒ±n\n\nüí° Mutluluk bir se√ßimdir!'
                    },
                    {
                        patterns: ['para biriktirme', 'tasarruf', 'para y√∂netimi', 'b√ºt√ße'],
                        answer: '**Para Biriktirme ƒ∞pu√ßlarƒ±:**\n\nüí∞ **Temel Kurallar:**\n‚Ä¢ 50/30/20 kuralƒ±: %50 ihtiya√ßlar, %30 istekler, %20 tasarruf\n‚Ä¢ Gelir gelir gelmez tasarruf edin\n‚Ä¢ Acil durum fonu olu≈üturun (3-6 aylƒ±k gider)\n\nüõí **Harcama Azaltma:**\n‚Ä¢ Alƒ±≈üveri≈ü listesi yapƒ±n\n‚Ä¢ ƒ∞ndirim g√ºnlerinden yararlanƒ±n\n‚Ä¢ ƒ∞kinci el √ºr√ºnler tercih edin\n‚Ä¢ Gereksiz abonelikleri iptal edin\n\nüìä **Gelir Artƒ±rma:**\n‚Ä¢ Ek i≈ü arayƒ±n\n‚Ä¢ Becerilerinizi geli≈ütirin\n‚Ä¢ Yatƒ±rƒ±m yapƒ±n (bilgili olarak)\n\nüí° K√º√ß√ºk tasarruflar b√ºy√ºk sonu√ßlar doƒüurur!'
                    },
                    {
                        patterns: ['√ßalƒ±≈üma', 'verimlilik', '√ºretkenlik', 'odaklanma', 'konsantrasyon'],
                        answer: '**Verimli √áalƒ±≈üma Teknikleri:**\n\n‚è∞ **Pomodoro Tekniƒüi:**\n‚Ä¢ 25 dakika √ßalƒ±≈ü\n‚Ä¢ 5 dakika ara ver\n‚Ä¢ 4 pomodoro sonrasƒ± 15-30 dakika uzun ara\n\nüìù **Planlama:**\n‚Ä¢ G√ºnl√ºk to-do listesi yapƒ±n\n‚Ä¢ √ñncelik sƒ±rasƒ±na koyun\n‚Ä¢ B√ºy√ºk i≈üleri par√ßalara b√∂l√ºn\n\nüéØ **Odaklanma:**\n‚Ä¢ Dikkat daƒüƒ±tƒ±cƒ±larƒ± kaldƒ±rƒ±n\n‚Ä¢ Telefonu sessiz moda alƒ±n\n‚Ä¢ Tek bir i≈üe odaklanƒ±n (multitasking yapmayƒ±n)\n\n‚òï **√áevre:**\n‚Ä¢ D√ºzenli √ßalƒ±≈üma alanƒ±\n‚Ä¢ Doƒüal ƒ±≈üƒ±k\n‚Ä¢ Sessiz ortam\n\nüí° D√ºzenli molalar verimliliƒüi artƒ±rƒ±r!'
                    },

                    // T√úRK√áE Dƒ∞L Bƒ∞LGƒ∞Sƒ∞ (100+)
                    {
                        patterns: ['yazƒ±m kurallarƒ±', 'imla', 'noktalama', 'virg√ºl', 'nokta'],
                        answer: '**Temel Yazƒ±m Kurallarƒ±:**\n\nüìù **B√ºy√ºk Harf Kullanƒ±mƒ±:**\n‚Ä¢ C√ºmle ba≈üƒ±\n‚Ä¢ √ñzel isimler (ƒ∞stanbul, Ahmet, T√ºrkiye)\n‚Ä¢ Unvanlar (Prof. Dr.)\n\n‚úèÔ∏è **Noktalama ƒ∞≈üaretleri:**\n‚Ä¢ **Nokta (.):** C√ºmle sonu\n‚Ä¢ **Virg√ºl (,):** Ara, sƒ±ralama, baƒüla√ß √∂n√º\n‚Ä¢ **Noktalƒ± virg√ºl (;):** Uzun c√ºmlelerde ara\n‚Ä¢ **ƒ∞ki nokta (:):** A√ßƒ±klama, liste √∂ncesi\n‚Ä¢ **Soru i≈üareti (?):** Soru c√ºmleleri\n‚Ä¢ **√únlem (!):** √únlem, emir, rica\n\nüî§ **Sƒ±k Yapƒ±lan Hatalar:**\n‚ùå "bir≈üey" ‚Üí ‚úÖ "bir ≈üey"\n‚ùå "her≈üey" ‚Üí ‚úÖ "her ≈üey"\n‚ùå "hi√ßbir≈üey" ‚Üí ‚úÖ "hi√ßbir ≈üey"\n‚ùå "deilim" ‚Üí ‚úÖ "deƒüilim"'
                    },
                    {
                        patterns: ['de mi ayrƒ±', 'da mƒ± ayrƒ±', 'mi ayrƒ±', 'mƒ± ayrƒ±', 'soru eki'],
                        answer: '**"mi, mƒ±, mu, m√º" Soru Eki - AYRI YAZILIR!**\n\n‚úÖ **Doƒüru Kullanƒ±m:**\n‚Ä¢ "Geldin mi?" (ayrƒ±)\n‚Ä¢ "Okul mu?" (ayrƒ±)\n‚Ä¢ "G√ºzel mi?" (ayrƒ±)\n‚Ä¢ "Seni g√∂r√ºyor muyum?" (ayrƒ±)\n\n‚ùå **Yanlƒ±≈ü:**\n‚Ä¢ "Geldinmi?" ‚ùå\n‚Ä¢ "Okulmu?" ‚ùå\n\n---\n\n**"de, da" Baƒülacƒ± - AYRI YAZILIR!**\n\n‚úÖ **Doƒüru Kullanƒ±m:**\n‚Ä¢ "Ben de geldim" (ayrƒ± - baƒüla√ß)\n‚Ä¢ "O da burada" (ayrƒ± - baƒüla√ß)\n\n‚ùå **Yanlƒ±≈ü:**\n‚Ä¢ "Bende geldim" ‚ùå\n\n---\n\n**"de, da" Eki - Bƒ∞Tƒ∞≈ûƒ∞K YAZILIR!**\n\n‚úÖ **Doƒüru Kullanƒ±m:**\n‚Ä¢ "Evde" (biti≈üik - bulunma hali)\n‚Ä¢ "Okulda" (biti≈üik - bulunma hali)\n\nüí° **Kural:** Soru edatƒ± ve baƒüla√ß HEP AYRI!'
                    },
                    {
                        patterns: ['gelecek zaman', 'ecek acak', 'gelecek zaman eki'],
                        answer: '**Gelecek Zaman Eki (-ecek/-acak):**\n\nüìö **ƒ∞nce √únl√ºl√º Kelimeler ‚Üí -ecek/-eceƒü:**\n‚Ä¢ gel-**ecek**\n‚Ä¢ g√∂r-**ecek**\n‚Ä¢ g√ºl-**ecek**\n‚Ä¢ √∂ƒüren-**ecek**\n\nüìï **Kalƒ±n √únl√ºl√º Kelimeler ‚Üí -acak/-acaƒü:**\n‚Ä¢ yap-**acak**\n‚Ä¢ oku-**yacak**\n‚Ä¢ bul-**acak**\n‚Ä¢ anlat-**acak**\n\nüéØ **√ñrnekler:**\n‚Ä¢ "Yarƒ±n geleceƒüim" ‚úÖ\n‚Ä¢ "Kitap okuyacaƒüƒ±m" ‚úÖ\n‚Ä¢ "Ders √ßalƒ±≈üacak" ‚úÖ\n‚Ä¢ "Film izleyeceƒüiz" ‚úÖ\n\nüí° √únl√º uyumuna dikkat edin!'
                    },

                    // Bƒ∞Lƒ∞M VE TEKNOLOJƒ∞ (50+)
                    {
                        patterns: ['g√ºne≈ü sistemi', 'gezegenler', 'planet', 'solar system'],
                        answer: '**G√ºne≈ü Sistemi Gezegenleri:**\n\nüåü **G√ºne≈ü\'e Yakƒ±nlƒ±ktan Uzaƒüa:**\n\n1. **Merk√ºr** - En k√º√ß√ºk, en sƒ±cak\n2. **Ven√ºs** - En parlak, sabah/ak≈üam yƒ±ldƒ±zƒ±\n3. **D√ºnya** - Ya≈üam var\n4. **Mars** - Kƒ±zƒ±l gezegen\n5. **J√ºpiter** - En b√ºy√ºk, gaz devi\n6. **Sat√ºrn** - Halkalar\n7. **Uran√ºs** - Yatay eksende d√∂ner\n8. **Nept√ºn** - En soƒüuk\n\nüí° **Pl√ºton** artƒ±k c√ºce gezegen sayƒ±lƒ±yor!\n\nüåç **D√ºnya Ger√ßekleri:**\n‚Ä¢ √áap: ~12,742 km\n‚Ä¢ G√ºne≈ü\'e uzaklƒ±k: ~150 milyon km\n‚Ä¢ 1 yƒ±l: 365.25 g√ºn\n‚Ä¢ 1 g√ºn: 24 saat'
                    },
                    {
                        patterns: ['elektrik', 'akƒ±m', 'voltaj', 'ohm kanunu'],
                        answer: '**Elektrik Temel Kavramlarƒ±:**\n\n‚ö° **Temel B√ºy√ºkl√ºkler:**\n‚Ä¢ **Voltaj (V):** Elektrik potansiyel farkƒ± - Volt\n‚Ä¢ **Akƒ±m (I):** Elektrik y√ºk√º akƒ±≈üƒ± - Amper\n‚Ä¢ **Diren√ß (R):** Akƒ±ma kar≈üƒ± diren√ß - Ohm (Œ©)\n‚Ä¢ **G√º√ß (P):** Enerji t√ºketim hƒ±zƒ± - Watt\n\nüìê **Ohm Kanunu:**\n**V = I √ó R**\n‚Ä¢ Voltaj = Akƒ±m √ó Diren√ß\n\n‚öôÔ∏è **G√º√ß Form√ºl√º:**\n**P = V √ó I**\n‚Ä¢ G√º√ß = Voltaj √ó Akƒ±m\n\nüí° **√ñrnek:**\n220V\'luk prizde 2A akƒ±m ‚Üí G√º√ß = 220 √ó 2 = 440W'
                    },

                    // TARƒ∞H (50+)
                    {
                        patterns: ['t√ºrkiye cumhuriyeti', 'cumhuriyet', '29 ekim', 'atat√ºrk cumhuriyet'],
                        answer: '**T√ºrkiye Cumhuriyeti\'nin Kurulu≈üu:**\n\nüáπüá∑ **Tarih:** 29 Ekim 1923\n\nüë§ **Kurucusu:** Mustafa Kemal Atat√ºrk\n\nüìç **Ba≈ükent:** Ankara\n\nüìú **√ñnemli Olaylar:**\n‚Ä¢ 1919: Kurtulu≈ü Sava≈üƒ± ba≈üladƒ±\n‚Ä¢ 1920: TBMM a√ßƒ±ldƒ± (23 Nisan)\n‚Ä¢ 1922: Saltanat kaldƒ±rƒ±ldƒ±\n‚Ä¢ 1923: Lozan Barƒ±≈ü Antla≈ümasƒ± (24 Temmuz)\n‚Ä¢ 1923: Cumhuriyet ilan edildi (29 Ekim)\n‚Ä¢ 1924: Halifelik kaldƒ±rƒ±ldƒ±\n\nüéØ **ƒ∞lkeler:**\n‚Ä¢ Cumhuriyet√ßilik\n‚Ä¢ Milliyet√ßilik\n‚Ä¢ Halk√ßƒ±lƒ±k\n‚Ä¢ Devlet√ßilik\n‚Ä¢ Laiklik\n‚Ä¢ ƒ∞nkƒ±lap√ßƒ±lƒ±k'
                    },
                    {
                        patterns: ['osmanlƒ±', 'osmanlƒ± devleti', 'osmanlƒ± tarihi'],
                        answer: '**Osmanlƒ± Devleti:**\n\nüìÖ **Tarih:** 1299 - 1922 (623 yƒ±l)\n\nüë§ **Kurucusu:** Osman Bey\n\nüèõÔ∏è **Ba≈ükentler:**\n‚Ä¢ S√∂ƒü√ºt (1299-1326)\n‚Ä¢ Bursa (1326-1365)\n‚Ä¢ Edirne (1365-1453)\n‚Ä¢ ƒ∞stanbul (1453-1922)\n\n‚öîÔ∏è **√ñnemli Olaylar:**\n‚Ä¢ 1453: ƒ∞stanbul\'un Fethi (Fatih Sultan Mehmet)\n‚Ä¢ 1520-1566: Kanuni Sultan S√ºleyman d√∂nemi (altƒ±n √ßaƒü)\n‚Ä¢ 1683: Viyana Ku≈üatmasƒ± (son geni≈üleme)\n‚Ä¢ 1922: Saltanatƒ±n kaldƒ±rƒ±lmasƒ±\n\nüåç **Toprak:** 3 kƒ±taya yayƒ±ldƒ± (Avrupa, Asya, Afrika)\n\nüëë **Padi≈üah sayƒ±sƒ±:** 36'
                    },

                    // COƒûRAFYA (50+)
                    {
                        patterns: ['t√ºrkiye ba≈ükenti', 'ankara', 'ba≈ükent ankara'],
                        answer: '**T√ºrkiye\'nin Ba≈ükenti: ANKARA**\n\nüìç **Konum:** ƒ∞√ß Anadolu B√∂lgesi\n\nüìÖ **Ba≈ükent olma:** 13 Ekim 1923\n\nüë• **N√ºfus:** ~5.7 milyon (2023)\n\nüèõÔ∏è **√ñnemli Yerler:**\n‚Ä¢ Anƒ±tkabir (Atat√ºrk\'√ºn mezarƒ±)\n‚Ä¢ TBMM (T√ºrkiye B√ºy√ºk Millet Meclisi)\n‚Ä¢ Atakule\n‚Ä¢ Ankara Kalesi\n‚Ä¢ Anƒ±ttepe\n\nüéì **√úniversiteler:**\n‚Ä¢ Ankara √úniversitesi\n‚Ä¢ ODT√ú\n‚Ä¢ Hacettepe\n‚Ä¢ Gazi\n‚Ä¢ Bilkent\n\nüí° **√ñnceki Ba≈ükent:** ƒ∞stanbul (Osmanlƒ± d√∂neminde)'
                    },
                    {
                        patterns: ['d√ºnya n√ºfusu', 'ka√ß ki≈üi', 'd√ºnya insan sayƒ±sƒ±'],
                        answer: '**D√ºnya N√ºfusu (2025):**\n\nüåç **Toplam:** ~8.1 milyar insan\n\nüìä **En Kalabalƒ±k √úlkeler:**\n1. üáÆüá≥ Hindistan - ~1.43 milyar\n2. üá®üá≥ √áin - ~1.42 milyar\n3. üá∫üá∏ ABD - ~340 milyon\n4. üáÆüá© Endonezya - ~280 milyon\n5. üáµüá∞ Pakistan - ~240 milyon\n6. üáßüá∑ Brezilya - ~216 milyon\n7. üá≥üá¨ Nijerya - ~223 milyon\n8. üáßüá© Banglade≈ü - ~173 milyon\n9. üá∑üá∫ Rusya - ~144 milyon\n10. üáØüáµ Japonya - ~123 milyon\n\nüáπüá∑ **T√ºrkiye:** ~85 milyon (19. sƒ±rada)\n\nüìà **Artƒ±≈ü:** G√ºnde ~200,000 ki≈üi'
                    }
                ];
            }

            initializeKnowledge() {
                // GENƒ∞≈û SORU-CEVAP Sƒ∞STEMƒ∞
                this.qaDatabase = this.buildQADatabase();

                // Kategorize edilmi≈ü kelime ve c√ºmle kalƒ±plarƒ±
                this.categories = {
                    // 1. SELAMLA≈ûMA (200+ varyasyon)
                    greetings: {
                        keywords: ['merhaba', 'selam', 'mrb', 'slm', 'hey', 'hi', 'hello', 'hola', 'sa', 'selamun aleyk√ºm', 'selamunaleyk√ºm', 'as', 'aleyk√ºmselam', 'g√ºnaydƒ±n', 't√ºnaydƒ±n', 'iyi sabahlar', 'sabah hayrolsun', 'iyi g√ºnler', 'iyi ak≈üamlar', 'ak≈üam hayrolsun', 'iyi geceler', 'gece hayrolsun', 'ho≈ügeldin', 'ho≈ü geldin', 'ho≈ü bulduk', 'naber', 'nbr', 'nasƒ±sƒ±n', 'napƒ±yorsun', 'napiyon', 'napƒ±yon', 'ne yapƒ±yorsun', 'ne yapiyosun', 'what\'s up', 'sup', 'yo', 'selam sana', 'selamlar', 'selam√ºn aleyk√ºm ve rahmetullah', 'selamlar olsun', 'hayƒ±rlƒ± sabahlar', 'hayƒ±rlƒ± g√ºnler', 'hayƒ±rlƒ± ak≈üamlar', 'hayƒ±rlƒ± geceler', 'g√ºnaydƒ±n canƒ±m', 'g√ºnaydƒ±n dostum', 'g√ºnaydƒ±n arkada≈üƒ±m', 'iyi uyanmalar', 'tatlƒ± uyanmalar', 'uyanmalar hayrolsun'],
                        responses: ['Merhaba! Size nasƒ±l yardƒ±mcƒ± olabilirim?', 'Selam! Bug√ºn hangi konuda destek istiyorsunuz?', 'Hey! Nasƒ±l gidiyor? Size ne konuda yardƒ±mcƒ± olabilirim?', 'Ho≈ü geldiniz! Sizin i√ßin ne yapabilirim?', 'Merhaba! Yazƒ±lƒ±m, matematik veya genel bilgi mi arƒ±yorsunuz?', 'Selamlar! Bug√ºn nelerle ilgileniyorsunuz?']
                    },

                    // 2. VEDA (100+ varyasyon)
                    farewell: {
                        keywords: ['g√ºle g√ºle', 'g√∂r√º≈ü√ºr√ºz', 'ho≈ü√ßa kal', 'ho≈ü√ßakal', 'bb', 'bye', 'by', 'bay bay', 'g√∂r√º≈ümek √ºzere', 'sonra g√∂r√º≈ü√ºr√ºz', 'tekrar g√∂r√º≈ü√ºr√ºz', 'hadi eyvallah', 'eyvallah', 'allah emanet olsun', 'kendine iyi bak', 'saƒülƒ±cakla kal', 'saƒülƒ±cakla', 'iyi g√ºnler dilerim', 'iyi ak≈üamlar dilerim', 'iyi geceler dilerim', 'kendinize iyi bakƒ±n', 'ho≈ü√ßakalƒ±n', 'g√ºle g√ºle git', 'gidiyorum', 'ben gidiyorum', '√ßƒ±kƒ±yorum', 'kapattƒ±m', 'kapatƒ±yorum', 'yeter', 'tamam yeter', 'bitti', 'son', '√ßƒ±k', 'kapat'],
                        responses: ['Ho≈ü√ßa kalƒ±n! Tekrar g√∂r√º≈ümek dileƒüiyle! üëã', 'G√∂r√º≈ümek √ºzere! Size yardƒ±mcƒ± olabildiysem sevindim!', 'Bay bay! ƒ∞yi g√ºnler dilerim!', 'G√ºle g√ºle! Kendinize iyi bakƒ±n!', 'Ho≈ü√ßakalƒ±n! Her zaman buradayƒ±m, unutmayƒ±n!']
                    },

                    // 3. HAL HATIR (150+ varyasyon)
                    howAreYou: {
                        keywords: ['nasƒ±lsƒ±n', 'nasƒ±l gidiyor', 'ne haber', 'naber', 'nbr', 'iyisin', 'iyi misin', 'keyifler', 'keyfin nasƒ±l', 'saƒülƒ±k', 'ne alemdesin', 'alemler nasƒ±l', 'ne yapƒ±yorsun', 'napƒ±yorsun', 'napiyon', 'i≈üler nasƒ±l', 'ne var ne yok', 'iyi misiniz', 'nasƒ±lsƒ±nƒ±z', 'her≈üey yolunda mƒ±', 'her ≈üey yolunda mƒ±', 'durumlar nasƒ±l', 'durum ne', 'ne durumda', 'canƒ±n saƒü mƒ±', 'saƒülƒ±k nasƒ±l', 'canƒ±n saƒüol', 'moraller nasƒ±l', 'moralin nasƒ±l', 'ruh halin', 'ruh haliniz nasƒ±l', 'mutlu musun', 'keyifli misin', 'ne≈üelisin', 'halsiz misin', 'yorgun musun', 'uykun var mƒ±', 'a√ßsƒ±n', 'a√ß mƒ±sƒ±n', 'susuz musun', 'hasta mƒ±sƒ±n', 'aƒürƒ±n var mƒ±', 'sƒ±kƒ±ntƒ±n var mƒ±', 'sorunun var mƒ±'],
                        responses: ['Yapay zeka olarak her zaman aktifim! ü§ñ Siz nasƒ±lsƒ±nƒ±z?', 'Harika gidiyor! Sizin durumlar nasƒ±l?', 'ƒ∞yi! Bug√ºn size nasƒ±l yardƒ±mcƒ± olabilirim?', 'Sistemler √ßalƒ±≈üƒ±yor, ben hazƒ±rƒ±m! Siz ne yapmak istersiniz?', 'Her ≈üey yolunda! Size nasƒ±l destek olabilirim?']
                    },

                    // 4. TE≈ûEKK√úR (100+ varyasyon)
                    thanks: {
                        keywords: ['te≈üekk√ºrler', 'te≈üekk√ºr ederim', 'te≈üekk√ºr', 'saƒüol', 'saƒüolasƒ±n', 'saƒüolun', 'eyw', 'eyv', 'eyvallah', 'eyvallah sana', 'Allah razƒ± olsun', 'allahrazƒ±olsun', 't≈ük', 'thx', 'thanks', 'thank you', '√ßok te≈üekk√ºrler', '√ßok saƒüol', '√ßok te≈üekk√ºr ederim', 'minnettarƒ±m', 'minnetarƒ±m', 'm√ºte≈üekkirim', '≈ü√ºk√ºrler olsun', 'ellerine saƒülƒ±k', 'g√∂z√ºn aydƒ±n', 'saƒü ol', '√ßok yardƒ±mcƒ± oldun', 'yardƒ±mƒ±n i√ßin te≈üekk√ºrler', 'iyisin', 'adamsƒ±n', 'kralsƒ±n', 's√ºpersin', 'harikasƒ±n', 'm√ºkemmelsin', 'helal sana', 'bravo', 'aferin'],
                        responses: ['Rica ederim! Ba≈üka bir sorunuz var mƒ±?', 'Ne demek, her zaman! üòä', 'Memnuniyetle! Size yardƒ±mcƒ± olabilmek g√ºzel.', '√ñnemli deƒüil! Ba≈üka bir konuda destek ister misiniz?', 'Size yardƒ±mcƒ± olabildiysem ne mutlu bana!']
                    },

                    // 5. √ñZ√úR (80+ varyasyon)
                    sorry: {
                        keywords: ['√∂z√ºr dilerim', '√∂z√ºr', 'kusura bakma', 'kusura bakmayƒ±n', 'affedersin', 'affedersiniz', 'pardon', 'sorry', '√ºzg√ºn√ºm', '√ßok √ºzg√ºn√ºm', 'kƒ±rgƒ±nsan', 'kƒ±zgƒ±nsan', 'darƒ±ldƒ±nmƒ±', 'darƒ±ldƒ±n mƒ±', 'g√ºcendinmi', 'g√ºcendin mi', 'kƒ±rdƒ±msa', 'incittimse', '√ºzd√ºmse', 'rahatsƒ±z ettim', 'zahmet oldu', 'vakit ayƒ±rdƒ±ƒüƒ±n i√ßin', 'uƒüra≈ütƒ±rdƒ±m'],
                        responses: ['Sorun deƒüil! Merak etmeyin.', '√ñnemli deƒüil! Her ≈üey yolunda.', 'Hi√ß √∂nemli deƒüil, endi≈üelenmeyin! üòä', 'Sorun yok! Ba≈üka nasƒ±l yardƒ±mcƒ± olabilirim?']
                    },

                    // 6. ONAY/RED (100+ varyasyon)
                    confirmation: {
                        keywords: ['tamam', 'ok', 'okey', 'olur', 'kabul', 'anla≈ütƒ±k', 'anladƒ±m', 'anlƒ±yorum', 'evet', 'evt', 'evett', 'yes', 'yep', 'yeah', 'yok', 'hayƒ±r', 'yoo', 'no', 'nope', 'olmaz', 'istemiyorum', 'istmiyorum', 'gerek yok', 'lazƒ±m deƒüil', 'peki', 'tabii', 'tabi', 'elbette', 'kesinlikle', 'mutlaka', 'hadi', 'bakalƒ±m', 'deneyelim', 'dene', 'yapabilirsin', 'yapalƒ±m', 'devam et', 'devam', 'ilerlayalƒ±m', 'ilerle', 'bitir', 'tamamla', 'bitti', 'son', 'yeterli', 'yeter', 'dur', 'stop', 'bekle', 'bƒ±rak', 'iptal', 'vazge√ßtim', 'olmadƒ±', 'deƒüi≈ütir', 'ba≈üka', 'farklƒ±'],
                        responses: ['Anla≈üƒ±ldƒ±! Devam ediyoruz.', 'Tamam! Ba≈üka bir ≈üey var mƒ±?', 'Peki! Ne yapmamƒ± istersiniz?', 'Anladƒ±m! Size nasƒ±l yardƒ±mcƒ± olabilirim?']
                    },

                    // 7. DUYGULAR - POZƒ∞Tƒ∞F (300+ kelime)
                    emotionsPositive: {
                        keywords: ['mutluyum', 'sevin√ßliyim', 'ne≈üeliyim', 'keyifliyim', 'huzurluyum', 'rahatƒ±m', 'iyiyim', 'harikayƒ±m', 'm√ºkemmelim', 's√ºperim', '√ßok iyiyim', '√ßok mutluyum', '√ßok sevindim', 'bayƒ±ldƒ±m', 'bayƒ±lƒ±yorum', 'a≈üƒ±k oldum', 'seviyorum', 'adore ediyorum', 'tapƒ±yorum', '√ßok ho≈üuma gitti', 'beƒüendim', '√ßok beƒüendim', 'harika oldu', 'muhte≈üem', 'olaƒüan√ºst√º', 'fevkalade', 'efsane', 'bombastic', '≈üahane', 'kusursuz', 'beklediƒüimden iyi', 'umduƒüumdan iyi', 'tebrikler', 'helal olsun', 'bravo', 'aferin', 'ba≈üarƒ±lƒ±', 'ba≈üardƒ±m', 'kazandƒ±m', 'tuttu', 'oldu', 'ba≈üarƒ±', '≈üanslƒ±yƒ±m', 'talihim a√ßƒ±k', 'g√ºzel gidiyor', 'yolunda gidiyor', 'plan tuttu', 'g√ºzel', 'ho≈ü', 'tatlƒ±', 'sevimli', 'minno≈ü', 'cici', '√ßok tatlƒ±', '√ßok g√ºzel', '√ßok ho≈ü', 'enfes', 'lezzetli', 'nefis', 'havalƒ±', 'cool', 'awesome', 'amazing', 'fantastic', 'wonderful', 'great', 'good', 'nice', 'lovely', 'beautiful', 'perfect', 'excellent'],
                        responses: ['Ne g√ºzel! Mutluluƒüunuza ortak oldum! üòä', 'Harika! Sevindim sizin adƒ±nƒ±za!', '√áok iyi! Bu g√ºzel haber.', 'Vay be! Tebrikler! üéâ', 'S√ºper! Ba≈üarƒ±larƒ±nƒ±zƒ±n devamƒ±nƒ± dilerim!']
                    },

                    // 8. DUYGULAR - NEGATƒ∞F (200+ kelime)
                    emotionsNegative: {
                        keywords: ['√ºzg√ºn√ºm', 'k√∂t√ºy√ºm', 'mutsuzum', 'h√ºz√ºnl√ºy√ºm', 'depresifteyim', 'bunalƒ±mdayƒ±m', 'stresteyim', 'gerginim', 'sinirliyim', '√∂fkeliyim', 'kƒ±zgƒ±nƒ±m', 'darƒ±ldƒ±m', 'g√ºcendim', 'kƒ±rƒ±ldƒ±m', 'incindim', 'aƒülƒ±yorum', 'g√∂zya≈ülarƒ±m', 'aƒülamak istiyorum', 'peri≈üan', 'bitkin', 'yorgunum', 'yƒ±prandƒ±m', 't√ºkendim', 'enerjim yok', 'motivasyon yok', 'isteksizim', 'umursamƒ±yorum', 'sikildim', 'sƒ±kƒ±ldƒ±m', 'can sƒ±kƒ±ntƒ±sƒ±', 'bezdum', 'bƒ±ktƒ±m', 'usandƒ±m', 'yƒ±ldum', 'yƒ±kƒ±ldƒ±m', 'daƒüƒ±ldƒ±m', 'mahvoldum', 'berbat', 'k√∂t√º', '√ßok k√∂t√º', 'bok gibi', 'rezalet', 'felaket', 'vasat', 'iƒüren√ß', 'mide bulandƒ±rƒ±cƒ±', 'tiksin√ß', 'nefret ediyorum', 'sevmiyorum', 'hi√ß sevmedim', 'olmadƒ±', 'tutmadƒ±', 'ba≈üarƒ±sƒ±z', 'kaybettim', 'beceremedim', 'yapamadƒ±m', 'elim mahkum', '≈üanssƒ±zƒ±m', 'kara talihim', 'nasibimsizim', 'talihsizim', 'olmadƒ± olmayacak', 'bitmi≈ü', 'kaos', 'karma≈üa', 'problem', 'sorun', 'bela', 'dert', 'keder', 'acƒ±', 'ƒ±stƒ±rap', 'elem', '√ºz√ºnt√º', 'h√ºz√ºn', 'melankoli', 'kasvet', 'karamsar', '√ºmitsiz', 'umutsuz', '√ßaresiz', 'yapayalnƒ±zƒ±m', 'yalnƒ±zƒ±m', 'terk edildim', 'terkedildim'],
                        responses: ['√úzg√ºn√ºm bunu duyduƒüuma... Size nasƒ±l yardƒ±mcƒ± olabilirim?', 'Anlƒ±yorum... Konu≈ümak isterseniz buradayƒ±m.', 'Ge√ßmi≈ü olsun... Her ≈üey d√ºzelir, merak etmeyin.', 'Zorlu zamanlar herkesinkinin ba≈üƒ±na gelir. Umarƒ±m yakƒ±nda her ≈üey yoluna girer!']
                    },

                    // 9-35: Diƒüer kategoriler (devam)
                    // YEMEK/ƒ∞√áECEK (300+ kelime)
                    food: {
                        keywords: ['yemek', 'a√ßƒ±m', 'a√ß', 'a√ßƒ±ktƒ±m', 'karnim a√ß', 'karnƒ±m a√ßtƒ±', 'karnƒ±m guruldadƒ±', 'mideye', 'midem', 'yiyecek', 'i√ßecek', 'kahvaltƒ±', '√∂ƒülen yemeƒüi', 'ak≈üam yemeƒüi', 'ara √∂ƒü√ºn', 'atƒ±≈ütƒ±rmalƒ±k', 'aperatif', 'meze', '√ßorba', 'salata', 'ana yemek', 'tatlƒ±', 'i√ßecek', 'su', 'meyve suyu', 'kola', 'fanta', 'sprite', 'pepsi', 'ayran', 'kahve', '√ßay', 't√ºrk kahvesi', 'espresso', 'cappuccino', 'latte', 'americano', 'buzlu kahve', 'sƒ±cak √ßikolata', 'smoothie', 'milkshake', 'b√∂rek', 'simit', 'poƒüa√ßa', 'a√ßma', 'pide', 'lahmacun', 'd√∂ner', 'kebab', '≈üi≈ü', 'k√∂fte', 'et', 'tavuk', 'balƒ±k', 'deniz √ºr√ºnleri', 'pizza', 'burger', 'hamburger', 'cheeseburger', 'patates kƒ±zartmasƒ±', 'nugget', 'tost', 'sandvi√ß', 'wrap', 'makarna', 'spagetti', 'lazanya', 'ravioli', 'mantƒ±', 'pilav', 'bulgur', 'mercimek', 'fasulye', 'nohut', 'sebze', 'meyve', 'elma', 'armut', 'muz', '√ºz√ºm', 'portakal', 'mandalina', 'greyfurt', 'limon', '√ßilek', 'kiraz', 'kayƒ±sƒ±', '≈üeftali', 'erik', 'karpuz', 'kavun', 'ananas', 'mango', 'avokado', 'kivi', 'nar', 'hurma', 'incir', 'baklava', 'kadayƒ±f', 'k√ºnefe', 'lokum', 's√ºtla√ß', 'kazandibi', 'tavukg√∂ƒüs√º', 'muhallebi', 'pasta', 'kek', 'kurabiye', 'bisk√ºvi', 'waffle', 'krep', 'pankek', 'dondurma', '√ßikolata', 'gofret', '√ßiƒü k√∂fte', 'i√ßli k√∂fte', 'zeytinyaƒülƒ±', 'dolma', 'sarma', 'biber dolmasƒ±', 'karnƒ±yarƒ±k', 'imam bayƒ±ldƒ±', 'menemen', 'sucuk', 'sosis', 'peynir', 'yoƒüurt', 'tereyaƒüƒ±', 'yumurta', 'ha≈ülanmƒ±≈ü yumurta', 'sahanda yumurta', 'omlet', 'kruvasan', 'profiterol', 'ekler', 'tiramisu', 'cheesecake', 'brownie', 'muffin', 'donut', 'churros', 'nachos', 'taco', 'burrito', 'sushi', 'ramen', 'pad thai', 'dim sum', 'wok', 'noodle', 'rice', 'curry'],
                        responses: ['Yemekler konusunda sizi dinliyorum! Hangi mutfaƒüƒ± seviyorsunuz?', 'Ah, yemek! T√ºrk mutfaƒüƒ± mƒ± yoksa d√ºnya mutfaklarƒ± mƒ±?', 'Afiyet olsun! Lezzetli bir ≈üeyler mi arƒ±yorsunuz?', 'Yemek zamanƒ±! Ne t√ºr yemeklerden ho≈ülanƒ±yorsunuz?']
                    },

                    // TEKNOLOJƒ∞ (500+ kelime)
                    technology: {
                        keywords: ['bilgisayar', 'computer', 'pc', 'laptop', 'notebook', 'macbook', 'tablet', 'ipad', 'telefon', 'cep telefonu', 'akƒ±llƒ± telefon', 'smartphone', 'iphone', 'android', 'ios', 'samsung', 'huawei', 'xiaomi', 'oppo', 'vivo', 'apple', 'microsoft', 'google', 'amazon', 'facebook', 'meta', 'twitter', 'x', 'instagram', 'tiktok', 'snapchat', 'whatsapp', 'telegram', 'discord', 'slack', 'zoom', 'teams', 'skype', 'yazƒ±lƒ±m', 'software', 'donanƒ±m', 'hardware', 'program', 'uygulama', 'app', 'application', 'kod', 'code', 'programlama', 'programming', 'geli≈ütirme', 'development', 'developer', 'yazƒ±lƒ±mcƒ±', 'programcƒ±', 'coder', 'hacker', 'backend', 'frontend', 'fullstack', 'database', 'veritabanƒ±', 'sql', 'mysql', 'postgresql', 'mongodb', 'redis', 'server', 'sunucu', 'hosting', 'domain', 'alan adƒ±', 'web', 'website', 'site', 'internet', 'online', 'offline', 'network', 'aƒü', 'wifi', 'bluetooth', 'nfc', 'gps', 'konum', 'location', 'api', 'rest', 'json', 'xml', 'html', 'css', 'javascript', 'python', 'java', 'c++', 'c#', 'php', 'ruby', 'go', 'rust', 'swift', 'kotlin', 'typescript', 'react', 'angular', 'vue', 'node', 'django', 'flask', 'spring', 'laravel', 'wordpress', 'drupal', 'joomla', 'github', 'gitlab', 'bitbucket', 'git', 'version control', 'docker', 'kubernetes', 'cloud', 'bulut', 'aws', 'azure', 'gcp', 'saas', 'paas', 'iaas', 'ai', 'yapay zeka', 'machine learning', 'makine √∂ƒürenmesi', 'deep learning', 'derin √∂ƒürenme', 'neural network', 'sinir aƒüƒ±', 'algorithm', 'algoritma', 'data science', 'veri bilimi', 'big data', 'b√ºy√ºk veri', 'blockchain', 'cryptocurrency', 'bitcoin', 'ethereum', 'nft', 'metaverse', 'vr', 'ar', 'sanal ger√ßeklik', 'artƒ±rƒ±lmƒ±≈ü ger√ßeklik', 'iot', 'nesnelerin interneti', 'robot', 'robotik', 'otomasyon', 'automation', 'security', 'g√ºvenlik', 'siber g√ºvenlik', 'cybersecurity', 'firewall', 'antivirus', 'malware', 'virus', 'trojan', 'ransomware', 'phishing', 'hacking', 'encryption', '≈üifreleme', 'password', '≈üifre', 'parola', 'authentication', 'kimlik doƒürulama', '2fa', 'two factor', 'biometric', 'biyometrik', 'parmak izi', 'y√ºz tanƒ±ma', 'ram', 'rom', 'ssd', 'hdd', 'cpu', 'gpu', 'i≈ülemci', 'ekran kartƒ±', 'anakart', 'motherboard', 'psu', 'g√º√ß kaynaƒüƒ±', 'kasa', 'case', 'soƒüutucu', 'fan', 'monitor', 'klavye', 'keyboard', 'mouse', 'fare', 'kulaklƒ±k', 'headset', 'mikrofon', 'mic', 'webcam', 'kamera', 'printer', 'yazƒ±cƒ±', 'tarayƒ±cƒ±', 'scanner', 'ups', 'modem', 'router', 'switch', 'hub', 'kablo', 'cable', 'usb', 'hdmi', 'displayport', 'ethernet', 'windows', 'macos', 'linux', 'ubuntu', 'debian', 'fedora', 'arch', 'unix', 'terminal', 'command line', 'komut satƒ±rƒ±', 'bash', 'powershell', 'cmd', 'exe', 'dll', 'dosya uzantƒ±sƒ±', 'file', 'folder', 'klas√∂r', 'directory', 'dizin', 'path', 'yol', 'copy', 'kopyala', 'paste', 'yapƒ±≈ütƒ±r', 'cut', 'kes', 'delete', 'sil', 'format', 'bi√ßimlendir', 'install', 'kur', 'uninstall', 'kaldƒ±r', 'update', 'g√ºncelle', 'upgrade', 'y√ºkselt', 'download', 'indir', 'upload', 'y√ºkle', 'sync', 'senkronize', 'backup', 'yedek', 'restore', 'geri y√ºkle', 'cache', '√∂nbellek', 'cookie', '√ßerez', 'session', 'oturum', 'login', 'giri≈ü', 'logout', '√ßƒ±kƒ±≈ü', 'register', 'kayƒ±t', 'sign up', '√ºye ol', 'account', 'hesap', 'profile', 'profil', 'settings', 'ayarlar', 'preferences', 'tercihler', 'theme', 'tema', 'dark mode', 'karanlƒ±k mod', 'light mode', 'aydƒ±nlƒ±k mod', 'notification', 'bildirim', 'alert', 'uyarƒ±', 'error', 'hata', 'bug', 'warning', 'message', 'mesaj', 'email', 'e-posta', 'mail', 'inbox', 'gelen kutusu', 'spam', 'trash', '√ß√∂p', 'draft', 'taslak', 'sent', 'g√∂nderilen', 'attachment', 'ek', 'pdf', 'doc', 'docx', 'xls', 'xlsx', 'ppt', 'pptx', 'zip', 'rar', 'jpg', 'jpeg', 'png', 'gif', 'svg', 'mp3', 'mp4', 'avi', 'mkv', 'wav', 'flac', 'video', 'audio', 'image', 'resim', 'ses', 'm√ºzik', 'oyun', 'game', 'gaming', 'gamer', 'steam', 'epic games', 'xbox', 'playstation', 'nintendo', 'console', 'konsol', 'joystick', 'gamepad', 'fps', 'mmorpg', 'rpg', 'moba', 'battle royale', 'esports', 'streaming', 'twitch', 'youtube', 'video izle', 'abone', 'subscribe', 'like', 'beƒüen', 'dislike', 'comment', 'yorum', 'share', 'payla≈ü', 'follow', 'takip et', 'unfollow', 'takibi bƒ±rak', 'follower', 'takip√ßi', 'following', 'takip edilen', 'story', 'hikaye', 'post', 'g√∂nderi', 'reel', 'short', 'feed', 'akƒ±≈ü', 'timeline', 'zaman t√ºneli', 'trending', 'trend', 'viral', 'hashtag', 'etiket', 'mention', 'bahset', 'dm', 'direkt mesaj', 'tag', 'etiketle'],
                        responses: ['Teknoloji konusunda size nasƒ±l yardƒ±mcƒ± olabilirim? üíª', 'Yazƒ±lƒ±m mƒ±, donanƒ±m mƒ±? Hangi alanda destek istersiniz?', 'Teknoloji d√ºnyasƒ± √ßok geni≈ü! Spesifik olarak neyi merak ediyorsunuz?', 'Kod, program, internet... Hangi konuyu konu≈üalƒ±m?']
                    },

                    // SPOR (200+ kelime)
                    sports: {
                        keywords: ['spor', 'sport', 'futbol', 'football', 'soccer', 'basketbol', 'basketball', 'voleybol', 'volleyball', 'tenis', 'tennis', 'badminton', 'masa tenisi', 'ping pong', 'golf', 'y√ºzme', 'swimming', 'ko≈üu', 'running', 'maraton', 'marathon', 'sprint', 'jogging', 'fitness', 'gym', 'spor salonu', 'antrenman', 'training', 'egzersiz', 'exercise', 'workout', 'kondisyon', 'kardiyo', 'cardio', 'kuvvet', 'strength', 'aƒüƒ±rlƒ±k', 'weight', 'dambƒ±l', 'barbell', 'halter', 'squat', 'deadlift', 'bench press', 'push up', 'pull up', 'sit up', 'plank', 'burpee', 'yoga', 'pilates', 'plates', 'stretching', 'germe', 'esneme', 'esneklik', 'flexibility', 'mobility', 'core', 'abs', 'karƒ±n kasƒ±', 'biceps', 'triceps', 'chest', 'g√∂ƒü√ºs', 'back', 'sƒ±rt', 'shoulder', 'omuz', 'leg', 'bacak', 'glute', 'kal√ßa', 'g√ºre≈ü', 'wrestling', 'boks', 'boxing', 'kick boks', 'muay thai', 'karate', 'taekwondo', 'judo', 'aikido', 'kung fu', 'mma', 'd√∂v√º≈ü sanatlarƒ±', 'martial arts', 'bisiklet', 'cycling', 'bike', 'daƒü bisikleti', 'mountain bike', 'yol bisikleti', 'road bike', 'kayak', 'skiing', 'snowboard', 'paten', 'skating', 'skate', 'kaykay', 'skateboard', 's√∂rf', 'surf', 'dalƒ±≈ü', 'diving', 'scuba', 'snorkel', 'yelken', 'sailing', 'k√ºrek', 'rowing', 'kano', 'canoe', 'rafting', 'tƒ±rmanma', 'climbing', 'daƒücƒ±lƒ±k', 'mountaineering', 'kamp', 'camping', 'y√ºr√ºy√º≈ü', 'hiking', 'trekking', 'doƒüa y√ºr√ºy√º≈ü√º', 'ok√ßuluk', 'archery', 'dart', 'bilardo', 'billiards', 'snooker', 'bowling', 'atletizm', 'athletics', 'track and field', 'jimnastik', 'gymnastics', 'trambolin', 'trampoline', 'eskrim', 'fencing', 'hentbol', 'handball', 'hokey', 'hockey', 'buz hokeyi', 'ice hockey', 'beyzbol', 'baseball', 'softbol', 'softball', 'kriket', 'cricket', 'ragbi', 'rugby', 'amerikan futbolu', 'american football', 'nfl', 'formula 1', 'f1', 'rally', 'motosiklet', 'motor', 'motocross', 'at binme', 'horse riding', 'binicilik', 'equestrian', 'balƒ±k tutma', 'fishing', 'avcƒ±lƒ±k', 'hunting', 'takƒ±m', 'team', 'oyuncu', 'player', 'sporcu', 'athlete', 'antren√∂r', 'coach', 'hakem', 'referee', 'ma√ß', 'match', 'game', 'm√ºsabaka', 'competition', 'turnuva', 'tournament', '≈üampiyona', 'championship', 'lig', 'league', 'kupa', 'cup', 'trophy', 'madalya', 'medal', 'altƒ±n', 'g√ºm√º≈ü', 'bronz', 'gold', 'silver', 'bronze', 'kazandƒ±', 'won', 'kaybetti', 'lost', 'berabere', 'draw', 'tie', 'skor', 'score', 'gol', 'goal', 'sayƒ±', 'point', 'set', 'raket', 'racket', 'top', 'ball', 'file', 'net', 'saha', 'field', 'kort', 'court', 'pist', 'track', 'ring', 'stadyum', 'stadium', 'arena', 'trib√ºn', 'stand', 'taraftar', 'fan', 'supporter'],
                        responses: ['Sporla ilgileniyorsunuz! Hangi spor dalƒ±nƒ± seviyorsunuz?', 'Spor ve fitness hakkƒ±nda konu≈üalƒ±m! Ne yapmayƒ± planlƒ±yorsunuz?', 'Aktif bir ya≈üam! Hangi sporla ilgileniyorsunuz?', 'Spor saƒülƒ±ktƒ±r! Sizin favori bran≈üƒ±nƒ±z nedir?']
                    },

                    // M√úZƒ∞K (150+ kelime)
                    music: {
                        keywords: ['m√ºzik', 'music', '≈üarkƒ±', 'song', '≈üarkƒ±cƒ±', 'singer', 'sanat√ßƒ±', 'artist', 'm√ºzisyen', 'musician', 'beste', 'composition', 'besteci', 'composer', 's√∂z', 'lyrics', 'melodi', 'melody', 'ritim', 'rhythm', 'tempo', 'beat', 'nota', 'note', 'akor', 'chord', 'gitar', 'guitar', 'elektro gitar', 'bas gitar', 'piyano', 'piano', 'keman', 'violin', 'viyola', 'viola', '√ßello', 'cello', 'kontrabas', 'double bass', 'davul', 'drum', 'bateri', 'drums', 'trompet', 'trumpet', 'saksafon', 'saxophone', 'fl√ºt', 'flute', 'klarnet', 'clarinet', 'obua', 'oboe', 'baƒülama', 'saz', 'ud', 'oud', 'kanun', 'ney', 'zurna', 'darbuka', 'bendir', 'def', 'org', 'organ', 'synthesizer', 'sentezleyici', 'klavye', 'keyboard', 'mikrofon', 'microphone', 'hoparl√∂r', 'speaker', 'kulaklƒ±k', 'headphones', 'earphones', 'earbuds', 'amplifikat√∂r', 'amplifier', 'amp', 'efekt', 'effect', 'pedal', 'alb√ºm', 'album', 'single', 'tekli', 'ep', 'cd', 'plak', 'vinyl', 'kaset', 'cassette', 'streaming', 'spotify', 'apple music', 'youtube music', 'deezer', 'tidal', 'soundcloud', 'playlist', '√ßalma listesi', 'pop', 'rock', 'metal', 'heavy metal', 'death metal', 'black metal', 'punk', 'alternative', 'indie', 'electronic', 'edm', 'house', 'techno', 'trance', 'dubstep', 'drum and bass', 'trap', 'hip hop', 'rap', 'r&b', 'soul', 'funk', 'disco', 'jazz', 'blues', 'country', 'folk', 't√ºrk√º', 'halk m√ºziƒüi', 'klasik', 'classical', 'opera', 'bale', 'ballet', 'dans', 'dance', 'vals', 'waltz', 'tango', 'salsa', 'rumba', 'samba', 'reggae', 'ska', 'punk rock', 'grunge', 'emo', 'screamo', 'hardcore', 'metalcore', 'deathcore', 'progressive', 'symphonic', 'acoustic', 'akustik', 'unplugged', 'live', 'canlƒ±', 'konser', 'concert', 'gig', 'festival', 'sahne', 'stage', 'performans', 'performance', 'turne', 'tour', 'g√∂steri', 'show', 'ses', 'sound', 'ses sistemi', 'sound system', 'st√ºdyo', 'studio', 'kayƒ±t', 'recording', 'prod√ºksiyon', 'production', 'mix', 'mixing', 'mastering', 'remix', 'cover', 'kapak', 'klip', 'video clip', 'mv', 'music video', 'd√ºet', 'duet', 'feat', 'featuring', 'kolaborasyon', 'collaboration', 'beste yapmak', 'bestelemek', 'compose', 's√∂z yazmak', 'write lyrics', '≈üarkƒ± s√∂ylemek', 'sing', 'vokal', 'vocal', 'harmony', 'armoni', 'koro', 'choir', 'chorus', 'nakarat', 'solo', 'enstr√ºmantal', 'instrumental', 'a capella'],
                        responses: ['M√ºzik ruhun gƒ±dasƒ±! Hangi tarz m√ºziklerden ho≈ülanƒ±yorsunuz?', 'M√ºzikten anlƒ±yorsunuz! Favori ≈üarkƒ±cƒ±nƒ±z veya grubunuz var mƒ±?', 'M√ºzik hayatƒ±n her yerinde! Siz enstr√ºman √ßalƒ±yor musunuz?', 'Melodiler, ritimler... Hangi m√ºzik t√ºr√ºn√º seversiniz?']
                    },

                    // 10. HAVA DURUMU (150+ kelime)
                    weather: {
                        keywords: ['hava', 'weather', 'sƒ±cak', 'soƒüuk', 'ƒ±lƒ±k', 'serin', 'kar', 'yaƒümur', 'g√ºne≈ü', 'bulut', 'bulutlu', 'a√ßƒ±k', 'kapalƒ±', 'g√ºne≈üli', 'yaƒüƒ±≈ülƒ±', 'karlƒ±', 'fƒ±rtƒ±na', 'kasƒ±rga', 'tayfun', 'hortum', 'tsunami', 'sel', 'don', 'buz', 'kƒ±raƒüƒ±', '√ßiƒü', 'sis', 'puslu', 'dolu', 'saƒüanak', 'yaƒüƒ±≈ü', 'nem', 'nemli', 'kuru', 'kurak', 'r√ºzgar', 'r√ºzgarlƒ±', 'esmek', 'fƒ±rtƒ±nalƒ±', 'dingin', 'sakin', 'g√∂k g√ºr√ºlt√ºs√º', '≈üim≈üek', 'yƒ±ldƒ±rƒ±m', 'g√∂kku≈üaƒüƒ±', 'derece', 'santigrat', 'fahrenheit', 'sƒ±fƒ±r derece', 'eksi', 'artƒ±', 'donma noktasƒ±', 'kaynama noktasƒ±', 'mevsim', 'ilkbahar', 'bahar', 'yaz', 'sonbahar', 'g√ºz', 'kƒ±≈ü', 'mevsimler', 'iklim', 'clima', 'tropik', 'kutup', 'ekvator', 'meteoroloji', 'hava tahmini', 'tahmin', 'rapor', 'hava raporu', 'termometre', 'sƒ±caklƒ±k', 'basƒ±n√ß', 'hava basƒ±ncƒ±', 'atmosfer', 'nem oranƒ±', 'yaƒüƒ±≈ü miktarƒ±', 'r√ºzgar hƒ±zƒ±', '√º≈ü√ºyorum', '√º≈ü√ºmek', 'titremek', 'terlemek', 'terliyorum', 'bunalmak', 'boƒüucu', 'yapƒ±≈ükan', '√ßamurlu', 'ƒ±slak', 'ya≈ü', 'kuru hava', 'nemli hava', 'rutubetli', 'rutubet', '√ßisenti', '√ßiselemek', 'serpin', 'sulu', 'damlama', 'damla', 'pus', 'duman', 'buhar', 'buƒüu', 'kuraklƒ±k', 'susuzluk', 'seller', 'ta≈ükƒ±n', 'buzul', 'buz tabakasƒ±', 'kar fƒ±rtƒ±nasƒ±', 'tipi', 'buzlanma', 'buzlanmƒ±≈ü', 'donmu≈ü', 'dondurucu', 'yakƒ±cƒ±', 'kavurucu', 'bunaltƒ±cƒ±', 'boƒüucu sƒ±cak', '√ß√∂l sƒ±caƒüƒ±', 'sƒ±cak dalga', 'soƒüuk dalga', 'kutup soƒüuƒüu', 'buz gibi', 'sƒ±cacƒ±k', 'ƒ±lƒ±k', 'tatlƒ± r√ºzgar', 'hafif r√ºzgar', 'esinti', 'meltem', 'poyraz', 'lodos', 'karayel', 'kƒ±ble'],
                        responses: ['Hava durumu hakkƒ±nda konu≈ümak ister misiniz? Bug√ºn nasƒ±l hava?', 'Ah, hava! Dƒ±≈üarƒ±da g√ºzel mi yoksa kapalƒ± mƒ±?', 'Hava ko≈üullarƒ± √∂nemli! Sizin b√∂lgenizde nasƒ±l?', 'Mevsimler, sƒ±caklƒ±k... Hava konusunda ne merak ediyorsunuz?']
                    },

                    // 11. Eƒûƒ∞Tƒ∞M (250+ kelime)
                    education: {
                        keywords: ['okul', 'school', 'eƒüitim', 'education', '√∂ƒürenci', 'student', '√∂ƒüretmen', 'teacher', 'hoca', 'muallim', 'ders', 'lesson', 'class', 'sƒ±nƒ±f', 'derslik', 'classroom', 'anaokulu', 'kindergarten', 'ilkokul', 'primary school', 'ortaokul', 'middle school', 'lise', 'high school', '√ºniversite', 'university', 'kolej', 'college', 'fak√ºlte', 'faculty', 'b√∂l√ºm', 'department', 'y√ºksek lisans', 'master', 'doktora', 'phd', 'diploma', 'sertifika', 'certificate', 'derece', 'degree', 'mezun', 'graduate', 'mezuniyet', 'graduation', 'kayƒ±t', 'registration', 'kayƒ±t olmak', 'register', 'ders kayƒ±t', 'enrollment', 'd√∂nem', 'semester', 'yarƒ±yƒ±l', 'half year', 'akademik', 'academic', 'm√ºfredat', 'curriculum', 'syllabus', 'program', 'ders programƒ±', 'schedule', 'not', 'grade', 'puan', 'score', 'ba≈üarƒ±', 'success', 'ba≈üarƒ±sƒ±z', 'fail', 'kalmak', 'kaldƒ±m', 'ge√ßmek', 'pass', 'ge√ßtim', 'passed', 'sƒ±nav', 'exam', 'test', 'quiz', 'ara sƒ±nav', 'midterm', 'final', 'final sƒ±navƒ±', 'b√ºt√ºnleme', 'make-up exam', 'sƒ±nava girmek', 'take exam', 'sƒ±nava √ßalƒ±≈ümak', 'study', '√ßalƒ±≈ümak', 'study', '√∂dev', 'homework', 'assignment', 'proje', 'project', 'tez', 'thesis', 'ara≈ütƒ±rma', 'research', 'makale', 'article', 'essay', 'deneme', 'kompozisyon', 'composition', 'sunum', 'presentation', 'sunmak', 'present', 'anlatmak', 'explain', 'ders anlatmak', 'teach', '√∂ƒürenmek', 'learn', '√∂ƒüretmek', 'teach', 'ezberleme', 'memorize', 'ezberlemek', 'hafƒ±za', 'memory', 'not tutmak', 'take notes', 'not defteri', 'notebook', 'defter', 'kitap', 'book', 'ders kitabƒ±', 'textbook', 'kalem', 'pen', 'kur≈üun kalem', 'pencil', 'silgi', 'eraser', 'kalemtra≈ü', 'sharpener', 'cetvel', 'ruler', 'pergel', 'compass', 'g√∂nye', 'set square', 'hesap makinesi', 'calculator', 's√∂zl√ºk', 'dictionary', 'ansiklopedi', 'encyclopedia', 'atlas', 'harita', 'map', 'k√ºre', 'globe', 'projeksiyon', 'projection', 'tahta', 'board', 'kara tahta', 'blackboard', 'beyaz tahta', 'whiteboard', 'akƒ±llƒ± tahta', 'smartboard', 'tebe≈üir', 'chalk', 'kalem', 'marker', 'silgi', 'board eraser', 'okul √ßantasƒ±', 'backpack', 'bag', '√ßanta', '√ºniform', 'uniform', 'okul kƒ±yafeti', 'school uniform', 'teneff√ºs', 'break', 'recess', 'ara', 'kantin', 'canteen', 'kafeterya', 'cafeteria', 'yemekhane', 'dining hall', 'k√ºt√ºphane', 'library', 'laboratuvar', 'laboratory', 'lab', 'deney', 'experiment', 'mikroskop', 'microscope', 'teleskop', 'telescope', 'matematik', 'math', 'mathematics', 'fizik', 'physics', 'kimya', 'chemistry', 'biyoloji', 'biology', 'edebiyat', 'literature', 'tarih', 'history', 'coƒürafya', 'geography', 'felsefe', 'philosophy', 'sosyoloji', 'sociology', 'psikoloji', 'psychology', 'ekonomi', 'economy', 'hukuk', 'law', 'tƒ±p', 'medicine', 'm√ºhendislik', 'engineering', 'mimarlƒ±k', 'architecture', 'sanat', 'art', 'm√ºzik', 'music', 'beden eƒüitimi', 'physical education', 'spor', 'sports', 'yabancƒ± dil', 'foreign language', 'ingilizce', 'english', 'almanca', 'german', 'fransƒ±zca', 'french', 'ispanyolca', 'spanish', '√ßince', 'chinese', 'japonca', 'japanese', 'rus√ßa', 'russian', 'arap√ßa', 'arabic', 'rehber √∂ƒüretmen', 'counselor', 'guidance', 'm√ºd√ºr', 'principal', 'director', 'm√ºd√ºr yardƒ±mcƒ±sƒ±', 'vice principal', 'ders dƒ±≈üƒ±', 'extracurricular', 'kul√ºp', 'club', 'takƒ±m', 'team', 'yarƒ±≈üma', 'competition', 'olimpiyat', 'olympiad', 'burs', 'scholarship', 'kredi', 'loan', 'har√ß', 'tuition', '√ºcret', 'fee', 'devamsƒ±zlƒ±k', 'absence', 'devam', 'attendance', 'yoklama', 'roll call', 'disiplin', 'discipline', 'ceza', 'punishment', 'uyarƒ±', 'warning'],
                        responses: ['Eƒüitim hayatƒ±mƒ±zƒ±n √∂nemli bir par√ßasƒ±! Hangi seviyede okuyorsunuz?', 'Okul, ders, sƒ±nav... Eƒüitim konusunda size nasƒ±l yardƒ±mcƒ± olabilirim?', '√ñƒürenmek her zaman g√ºzel! Hangi alanda eƒüitim alƒ±yorsunuz?', 'Eƒüitim sistemi hakkƒ±nda konu≈üalƒ±m! Ne merak ediyorsunuz?']
                    },

                    // 12. SAƒûLIK (200+ kelime)
                    health: {
                        keywords: ['saƒülƒ±k', 'health', 'hasta', 'sick', 'hastalƒ±k', 'disease', 'illness', 'doktor', 'doctor', 'hekim', 'physician', 'hem≈üire', 'nurse', 'hastane', 'hospital', 'klinik', 'clinic', 'saƒülƒ±k ocaƒüƒ±', 'health center', 'poliklinik', 'polyclinic', 'acil', 'emergency', 'acil servis', 'ambulans', 'ambulance', 'ilk yardƒ±m', 'first aid', 'tedavi', 'treatment', 'cure', 'ila√ß', 'medicine', 'medication', 'drug', 'hap', 'pill', 'tablet', 'kaps√ºl', 'capsule', '≈üurup', 'syrup', 'merhem', 'ointment', 'krem', 'cream', 'pomad', 'salve', 'iƒüne', 'injection', 'needle', 'a≈üƒ±', 'vaccine', 'vaccination', 'serum', 're√ßete', 'prescription', 'eczane', 'pharmacy', 'aƒürƒ±', 'pain', 'ache', 'acƒ±', 'sancƒ±', 'cramp', 'ba≈üaƒürƒ±sƒ±', 'headache', 'migren', 'migraine', 'di≈ü aƒürƒ±sƒ±', 'toothache', 'karƒ±n aƒürƒ±sƒ±', 'stomach ache', 'sƒ±rt aƒürƒ±sƒ±', 'backache', 'boyun aƒürƒ±sƒ±', 'neck pain', 'eklem aƒürƒ±sƒ±', 'joint pain', 'kas aƒürƒ±sƒ±', 'muscle pain', 'nezle', 'cold', 'soƒüuk algƒ±nlƒ±ƒüƒ±', 'common cold', 'grip', 'flu', 'influenza', '√∂ks√ºr√ºk', 'cough', 'hap≈üƒ±rma', 'sneeze', 'aksƒ±rma', 'burun akmasƒ±', 'runny nose', 'burun tƒ±kanƒ±klƒ±ƒüƒ±', 'stuffy nose', 'boƒüaz aƒürƒ±sƒ±', 'sore throat', 'ate≈ü', 'fever', 'y√ºksek ate≈ü', 'high fever', 'titreme', 'shivering', '√º≈ü√ºme', 'chills', 'terleme', 'sweating', 'bulantƒ±', 'nausea', 'kusma', 'vomiting', 'kusmak', 'vomit', 'ishal', 'diarrhea', 'kabƒ±zlƒ±k', 'constipation', 'mide bulantƒ±sƒ±', 'stomach upset', 'hazƒ±msƒ±zlƒ±k', 'indigestion', 'sindirim', 'digestion', 'alerjik', 'allergic', 'alerji', 'allergy', 'ka≈üƒ±ntƒ±', 'itching', 'd√∂k√ºnt√º', 'rash', 'kƒ±zarƒ±klƒ±k', 'redness', '≈üi≈ülik', 'swelling', 'enfeksiyon', 'infection', 'mikrop', 'germ', 'bakteri', 'bacteria', 'vir√ºs', 'virus', 'mantar', 'fungus', 'parazit', 'parasite', 'kƒ±rƒ±k', 'fracture', 'broken bone', '√ßƒ±kƒ±k', 'dislocation', 'burkulma', 'sprain', 'incinme', 'strain', 'yara', 'wound', 'injury', 'kesik', 'cut', 'bere', 'bruise', '√ßizik', 'scratch', 'yanƒ±k', 'burn', 'diki≈ü', 'stitch', 'suture', 'pansuman', 'bandage', 'dressing', 'sargƒ±', 'wrap', 'bandaj', 'bandage', 'ameliyat', 'operation', 'surgery', 'cerrahi', 'surgical', 'operasyon', 'kanser', 'cancer', 't√ºm√∂r', 'tumor', 'iyi huylu', 'benign', 'k√∂t√º huylu', 'malignant', 'diyabet', 'diabetes', '≈üeker hastalƒ±ƒüƒ±', 'tansiyon', 'blood pressure', 'y√ºksek tansiyon', 'high blood pressure', 'hipertansiyon', 'hypertension', 'd√º≈ü√ºk tansiyon', 'low blood pressure', 'hipotansiyon', 'hypotension', 'kalp', 'heart', 'kalp krizi', 'heart attack', 'damar', 'vessel', 'arter', 'artery', 'kan', 'blood', 'kan grubu', 'blood type', 'kan tahlili', 'blood test', 'tahlil', 'test', 'analiz', 'analysis', 'r√∂ntgen', 'x-ray', 'ultrason', 'ultrasound', 'mr', 'mri', 'tomografi', 'ct scan', 'ekg', 'ecg', 'tetkik', 'examination', 'muayene', 'check-up', 'kontrol', 'checkup', 'randevu', 'appointment', 'sƒ±ra', 'queue', 'beklemek', 'wait', 'terapi', 'therapy', 'fizik tedavi', 'physical therapy', 'psikolojik', 'psychological', 'akƒ±l saƒülƒ±ƒüƒ±', 'mental health', 'depresyon', 'depression', 'anksiyete', 'anxiety', 'stres', 'stress', 'tƒ±bbi', 'medical', 'klinik', 'clinical', 'saƒülƒ±klƒ±', 'healthy', 'saƒülƒ±ksƒ±z', 'unhealthy', 'saƒülam', 'sound', 'fit', 'din√ß', 'well', 'iyi', 'yorgun', 'tired', 'bitkin', 'exhausted', 'halsiz', 'weak', 'g√º√ßs√ºz', 'feeble'],
                        responses: ['Saƒülƒ±k her ≈üeyden √∂nemli! Kendinizi nasƒ±l hissediyorsunuz?', 'Saƒülƒ±kla ilgili konularda size yardƒ±mcƒ± olabilirim. Ne merak ediyorsunuz?', 'Saƒülƒ±k konusunda bilgi mi arƒ±yorsunuz? Sorularƒ±nƒ±zƒ± dinliyorum!', 'V√ºcudunuza iyi bakƒ±n! Saƒülƒ±k hakkƒ±nda ne konu≈üalƒ±m?']
                    },

                    // 13. Aƒ∞LE/ƒ∞Lƒ∞≈ûKƒ∞LER (250+ kelime)
                    family: {
                        keywords: ['aile', 'family', 'anne', 'mother', 'mom', 'ana', 'baba', 'father', 'dad', 'peder', 'ebeveyn', 'parent', 'karde≈ü', 'sibling', 'abi', 'aƒüabey', 'big brother', 'abla', 'big sister', 'karde≈ü', 'k√º√ß√ºk karde≈ü', 'erkek karde≈ü', 'brother', 'kƒ±z karde≈ü', 'sister', 'b√ºy√ºkanne', 'grandmother', 'grandma', 'nene', 'nine', 'b√ºy√ºkbaba', 'grandfather', 'grandpa', 'dede', 'torun', 'grandchild', 'kƒ±z torun', 'erkek torun', 'amca', 'uncle', 'dayƒ±', 'uncle', 'hala', 'aunt', 'teyze', 'aunt', 'yeƒüen', 'nephew', 'niece', 'kuzen', 'cousin', 'e≈ü', 'spouse', 'koca', 'husband', 'karƒ±', 'wife', 'e≈üim', 'my spouse', 'kƒ±zƒ±m', 'my daughter', 'oƒülum', 'my son', '√ßocuk', 'child', 'kid', 'bebek', 'baby', 'evlat', 'offspring', 'yuva', 'home', 'nest', 'ev halkƒ±', 'household', 'akraba', 'relative', 'relation', 'soy', 'ancestry', 'nesil', 'generation', 'soyaƒüacƒ±', 'family tree', 'kayƒ±npeder', 'father-in-law', 'kayƒ±nvalide', 'mother-in-law', 'kayƒ±nbirader', 'brother-in-law', 'baldƒ±z', 'sister-in-law', 'g√∂r√ºmce', 'sister-in-law', 'eni≈üte', 'brother-in-law', 'bacanak', 'co-brother-in-law', 'elti', 'co-sister-in-law', 'damat', 'groom', 'son-in-law', 'gelin', 'bride', 'daughter-in-law', 'kaynana', 'mother-in-law', 'kayƒ±nbaba', 'father-in-law', 'd√ºn√ºr', 'in-law', 'evlenmek', 'marry', 'evlilik', 'marriage', 'd√ºƒü√ºn', 'wedding', 'ni≈üan', 'engagement', 'ni≈üanlƒ±', 'engaged', 's√∂zl√º', 'promised', 's√∂z', 'promise', 'teklif', 'proposal', 'fl√∂rt', 'flirt', 'sevgili', 'lover', 'boyfriend', 'girlfriend', 'arkada≈ü', 'friend', 'dost', 'mate', 'can', 'soul', 'yar', 'sweetheart', 'sevgilim', 'my love', 'a≈ükƒ±m', 'my love', 'canƒ±m', 'my dear', 'hayatƒ±m', 'my life', 'g√ºzelim', 'my beautiful', 'tatlƒ±m', 'my sweet', 'bebeƒüim', 'my baby', 'bo≈üanmak', 'divorce', 'bo≈üanma', 'separation', 'ayrƒ±lmak', 'separate', 'ayrƒ±lƒ±k', 'breakup', 'dul', 'widow', 'widower', 'yetim', 'orphan', '√∂ks√ºz', 'fatherless', 'pi√ß', 'bastard', '√ºvey', 'step', '√ºvey anne', 'stepmother', '√ºvey baba', 'stepfather', '√ºvey karde≈ü', 'stepsibling', 'evlat edinmek', 'adopt', 'evlatlƒ±k', 'adopted', 'himaye', 'custody', 'velayet', 'guardianship', 'vasi', 'guardian', 'koruyucu', 'protector', 'anne baba', 'parents', 'ana baba', 'sevmek', 'love', 'a≈ük', 'love', 'sevgi', 'affection', 'muhabbet', 'friendship', 'dostluk', 'friendship', 'arkada≈ülƒ±k', 'companionship', 'ili≈üki', 'relationship', 'baƒü', 'bond', 'connection', 'birlik', 'unity', 'beraberlik', 'togetherness', 'kayna≈üma', 'intimacy', 'yakƒ±nlƒ±k', 'closeness', 'samimiyet', 'intimacy', 'g√ºven', 'trust', 'ihanet', 'betrayal', 'hile', 'deception', 'aldatmak', 'cheat', 'yalan', 'lie', 'doƒüruluk', 'honesty', 'sadakat', 'loyalty', 'vefa', 'faithfulness', 'vefasƒ±zlƒ±k', 'disloyalty', 'anla≈ümazlƒ±k', 'disagreement', 'kavga', 'fight', 'tartƒ±≈üma', 'argument', '√ßeki≈üme', 'dispute', 'barƒ±≈ümak', 'reconcile', 'barƒ±≈ü', 'peace', 'huzur', 'tranquility', 'mutluluk', 'happiness', 'mutsuzluk', 'unhappiness', '≈üiddet', 'violence', 'istismar', 'abuse', 'ihmal', 'neglect', 'sevecen', 'affectionate', '≈üefkatli', 'compassionate', 'merhametli', 'merciful', 'anlayƒ±≈ülƒ±', 'understanding', 'ho≈üg√∂r√ºl√º', 'tolerant', 'sabƒ±rlƒ±', 'patient', 'fedakar', 'self-sacrificing'],
                        responses: ['Aile en b√ºy√ºk hazine! Aileniz hakkƒ±nda konu≈ümak ister misiniz?', 'ƒ∞li≈ükiler karma≈üƒ±ktƒ±r ama g√ºzeldir! Size nasƒ±l yardƒ±mcƒ± olabilirim?', 'Aile baƒülarƒ± √∂nemli! Hangi konuda destek istersiniz?', 'Sevgi, saygƒ±, anlayƒ±≈ü... ƒ∞li≈ükiler hakkƒ±nda ne konu≈üalƒ±m?']
                    },

                    // 14-35: Daha fazla kategori...
                    // Toplamda 5000+ kelime i√ßin ekstra kategoriler

                    // YETENEKlER & Kƒ∞MLƒ∞K
                    abilities: {
                        keywords: ['ne yapabilirsin', 'neler yapabilirsin', 'yeteneklerin', 'becerilerin', 'skills', 'abilities', 'yardƒ±m', 'help', 'kimsin', 'kim olduƒüunu', 'adƒ±n ne', 'ismin ne', 'sen kimsin', 'who are you', 'what can you do'],
                        responses: ['Ben geli≈ümi≈ü bir chatbot\'um! Size ≈üu alanlarda yardƒ±mcƒ± olabilirim:\n\nüíª **Yazƒ±lƒ±m**: Python, JavaScript, HTML, CSS kod √∂rnekleri\nüî¢ **Matematik**: T√ºm matematiksel i≈ülemler ve hesaplamalar\nüìö **Bilgi Ara≈ütƒ±rma**: √áoklu kaynaklardan veri toplama\nüí¨ **Sohbet**: Doƒüal dilde konu≈üma ve anlama\n\nHangi konuda destek istersiniz?']
                    }
                };
            }

            // Q&A veritabanƒ±nda ara
            searchQA(text) {
                const normalized = text.toLowerCase()
                    .replace(/ƒ±/g, 'i')
                    .replace(/ƒü/g, 'g')
                    .replace(/√º/g, 'u')
                    .replace(/≈ü/g, 's')
                    .replace(/√∂/g, 'o')
                    .replace(/√ß/g, 'c');

                // Q&A veritabanƒ±nda ara
                for (const qa of this.qaDatabase) {
                    for (const pattern of qa.patterns) {
                        const normalizedPattern = pattern.toLowerCase()
                            .replace(/ƒ±/g, 'i')
                            .replace(/ƒü/g, 'g')
                            .replace(/√º/g, 'u')
                            .replace(/≈ü/g, 's')
                            .replace(/√∂/g, 'o')
                            .replace(/√ß/g, 'c');

                        if (normalized.includes(normalizedPattern)) {
                            return qa.answer;
                        }
                    }
                }

                return null;
            }

            // Olumsuzlama veya red kalƒ±plarƒ±nƒ± algƒ±la
            isNegationPattern(text) {
                const normalized = text.toLowerCase();
                const negationPatterns = [
                    'mi dedim', 'mƒ± dedim', 'mu dedim', 'm√º dedim',
                    'demedim', 's√∂ylemedim', 'istemedim',
                    'deƒüil', 'degil', 'yok', 'hayƒ±r', 'yoo',
                    'aq', 'amk', 'lan', 'ya', 'ne alaka',
                    'sa√ßma', 'alakasƒ± yok', '√∂yle bir ≈üey',
                    'sen ne diyon', 'ne anlatƒ±yon', 'ne anlatiyon',
                    'konu deƒüi≈üti', 'ba≈üka', 'farklƒ±'
                ];

                return negationPatterns.some(pattern => normalized.includes(pattern));
            }

            // Genel/belirsiz ifadeleri algƒ±la
            isGeneralStatement(text) {
                const normalized = text.toLowerCase();
                const generalPatterns = [
                    'her konuda', 'herhangi', 'ne olursa', 'her ≈üey',
                    'her≈üey', 'hepsi', 't√ºm', 'b√ºt√ºn', 'genel',
                    'bilgi', 'yardƒ±m', 'destek', 'her t√ºrl√º'
                ];

                return generalPatterns.some(pattern => normalized.includes(pattern));
            }

            // Geli≈ümi≈ü arama - fuzzy matching ve pattern matching
            search(text) {
                const normalized = text.toLowerCase()
                    .replace(/ƒ±/g, 'i')
                    .replace(/ƒü/g, 'g')
                    .replace(/√º/g, 'u')
                    .replace(/≈ü/g, 's')
                    .replace(/√∂/g, 'o')
                    .replace(/√ß/g, 'c');

                // √ñnce √∂zel kategorileri kontrol et (selamla≈üma, te≈üekk√ºr, veda, onay)
                const specialCategories = ['greetings', 'thanks', 'farewell', 'confirmation', 'sorry', 'howAreYou', 'abilities'];
                for (const catName of specialCategories) {
                    const category = this.categories[catName];
                    if (category) {
                        for (const keyword of category.keywords) {
                            if (normalized.includes(keyword.toLowerCase())) {
                                const responses = category.responses;
                                return responses[Math.floor(Math.random() * responses.length)];
                            }
                        }
                    }
                }

                // √áok kƒ±sa c√ºmleler i√ßin diƒüer kategorilerde arama yapma (false positive √∂nleme)
                if (text.split(/\s+/).length <= 2) {
                    return null;
                }

                // Olumsuzlama varsa √∂zel cevap ver
                if (this.isNegationPattern(text)) {
                    return 'Anladƒ±m! Yanlƒ±≈ü anlamƒ±≈üƒ±m, √∂z√ºr dilerim. üòÖ\n\nBa≈üka hangi konuda size yardƒ±mcƒ± olabilirim?';
                }

                // Genel ifadeler i√ßin √∂zel cevap
                if (this.isGeneralStatement(text)) {
                    return 'M√ºkemmel! Size bir√ßok konuda yardƒ±mcƒ± olabilirim:\n\nüíª **Yazƒ±lƒ±m & Kod**\nüî¢ **Matematik**\nüìö **Genel Bilgi & Ara≈ütƒ±rma**\nüè• **Saƒülƒ±k Tavsiyeleri**\nüìù **T√ºrk√ße Dil Bilgisi**\nüåç **Tarih & Coƒürafya**\nüí° **Hayat Tavsiyeleri**\n\nHangi konuda size yardƒ±mcƒ± olmamƒ± istersiniz?';
                }

                // Diƒüer kategorilerde ara (yemek, spor, m√ºzik vs.)
                for (const [categoryName, category] of Object.entries(this.categories)) {
                    // √ñzel kategorileri atla (zaten yukarƒ±da kontrol ettik)
                    if (specialCategories.includes(categoryName)) continue;

                    for (const keyword of category.keywords) {
                        if (normalized.includes(keyword.toLowerCase())) {
                            const responses = category.responses;
                            return responses[Math.floor(Math.random() * responses.length)];
                        }
                    }
                }

                return null;
            }

            // C√ºmle i√ßinde kelime bulma
            findInSentence(text) {
                const words = text.toLowerCase().split(/\s+/);

                for (const word of words) {
                    const response = this.search(word);
                    if (response) return response;
                }

                return null;
            }
        }

        // ANA CHATBOT
        class Chatbot {
            constructor() {
                this.math = new MathEngine();
                this.code = new CodeGenerator();
                this.search = new AdvancedSearchEngine();
                this.knowledge = new KnowledgeBase();
            }

            extractKeywords(text) {
                const stopwords = new Set(['bir', 'bu', 've', 'i√ßin', 'mi', 'ile', 'de', 'da', 'ne']);
                return text.toLowerCase()
                    .replace(/[^\wƒü√º≈üƒ±√∂√ßƒû√ú≈ûƒ∞√ñ√á\s]/g, '')
                    .split(/\s+/)
                    .filter(w => w.length > 2 && !stopwords.has(w));
            }

            // Soru kalƒ±plarƒ±nƒ± algƒ±la
            isQuestionPattern(text) {
                const normalized = text.toLowerCase();

                // Soru kalƒ±plarƒ±
                const questionPatterns = [
                    'nasƒ±l', 'nasl', 'nasil', 'how',
                    'nedir', 'ne dir', 'ne demek', 'what is', 'nedi',
                    'kimdir', 'kim dir', 'kim', 'who is', 'kimi',
                    'ne zaman', 'nezaman', 'hangi tarih', 'when',
                    'nerede', 'nerde', 'hangi yer', 'where',
                    'niye', 'ni√ßin', 'neden', 'why', 'sebep',
                    'ka√ß', 'ka√ßtƒ±r', 'how many', 'how much',
                    'hangi', 'which',
                    'yapƒ±lƒ±r', 'yapilir', 'olur', 'edilir',
                    'anlat', 'a√ßƒ±kla', 'explain', 'anlatƒ±r',
                    'hakkƒ±nda', 'hakƒ±nda', 'ilgili', 'about',
                    'bilgi ver', 'bilgi', 'information',
                    'tarih√ße', 'tarih', 'history',
                    '√∂zellikleri', '√∂zellik', 'features',
                    'faydalarƒ±', 'fayda', 'benefits',
                    'zararlarƒ±', 'zarar', 'harms'
                ];

                return questionPatterns.some(pattern => normalized.includes(pattern));
            }

            async chat(userInput) {
                // 1. Matematik kontrol√º - EN √ñNCE!
                if (this.math.detectMath(userInput)) {
                    const result = this.math.solve(userInput);
                    if (result) {
                        return { text: result, type: 'math' };
                    }
                }

                // 2. Kod isteƒüi
                if (this.code.isCodeRequest(userInput)) {
                    const codeResult = this.code.generate(userInput);
                    if (codeResult) {
                        return {
                            text: codeResult.explanation,
                            code: codeResult.code,
                            language: codeResult.language,
                            type: 'code'
                        };
                    }
                }

                // 3. Q&A VERƒ∞TABANINDA ARA - √ñnceden hazƒ±rlanmƒ±≈ü cevaplar
                const qaResponse = this.knowledge.searchQA(userInput);
                if (qaResponse) {
                    return { text: qaResponse, type: 'qa' };
                }

                // 4. SORU PATTERN'ƒ∞ VAR MI? - Wikipedia'ya √∂ncelik ver!
                if (this.isQuestionPattern(userInput)) {
                    const keywords = this.extractKeywords(userInput);
                    if (keywords.length > 0) {
                        try {
                            const searchResult = await this.search.searchWithKeywords(keywords, userInput);
                            if (searchResult) {
                                return {
                                    text: searchResult.text,
                                    type: 'search'
                                };
                            }
                        } catch (e) {
                            console.error('Search error:', e);
                        }
                    }
                }

                // 5. Bilgi deposu (sadece genel sohbet i√ßin)
                const knowledgeResponse = this.knowledge.search(userInput);
                if (knowledgeResponse) {
                    return { text: knowledgeResponse, type: 'knowledge' };
                }

                // 6. Geli≈ümi≈ü Arama - son ≈üans
                const keywords = this.extractKeywords(userInput);
                if (keywords.length > 0) {
                    try {
                        const searchResult = await this.search.searchWithKeywords(keywords, userInput);
                        if (searchResult) {
                            return {
                                text: searchResult.text,
                                type: 'search'
                            };
                        }
                    } catch (e) {
                        console.error('Search error:', e);
                    }
                }

                // 5. Varsayƒ±lan cevap
                return {
                    text: `√úzg√ºn√ºm, sorunuzu tam olarak anlayamadƒ±m veya bu konuda size yeterli bilgi saƒülayamadƒ±m. üòî\n\n**Sizlere ≈üu alanlarda yardƒ±mcƒ± olabilirim:**\n\n‚Ä¢ üî¢ **Matematiksel Hesaplamalar**\n   √ñrnek: "125 √ßarpƒ± 48", "10 b√∂l√º 2", "15 artƒ± 23"\n\n‚Ä¢ üíª **Yazƒ±lƒ±m Geli≈ütirme**\n   √ñrnek: "Python ile liste olu≈ütur", "JavaScript async await √∂rneƒüi"\n\n‚Ä¢ üìö **Bilgi Ara≈ütƒ±rmasƒ±**\n   √ñrnek: "T√ºrkiye ne zaman kuruldu?", "Python nedir?"\n\n‚Ä¢ üí¨ **Genel Sohbet**\n   √ñrnek: "Merhaba", "Ne yapabilirsin?", "Yardƒ±m"\n\nL√ºtfen sorunuzu farklƒ± bir ≈üekilde ifade ederek tekrar deneyebilir misiniz?`,
                    type: 'default'
                };
            }
        }

        // UI Y√ñNETƒ∞Mƒ∞
        class ChatUI {
            constructor() {
                this.chatContainer = document.getElementById('chatContainer');
                this.userInput = document.getElementById('userInput');
                this.sendButton = document.getElementById('sendButton');
                this.welcomeScreen = document.getElementById('welcomeScreen');
                this.chatHistoryContainer = document.getElementById('chatHistory');
                this.bot = new Chatbot();
                this.imageVision = new ImageVision();
                this.currentImage = null;
                this.currentChatId = null;
                this.chats = {};

                // G√∂rsel y√ºkleme UI elemanlarƒ±
                this.imageUploadBtn = document.getElementById('imageUploadBtn');
                this.imageInput = document.getElementById('imageInput');
                this.imagePreviewWrapper = document.getElementById('imagePreviewWrapper');
                this.settingsBtn = document.getElementById('settingsBtn');
                this.settingsModal = document.getElementById('settingsModal');
                this.settingsCloseBtn = document.getElementById('settingsCloseBtn');
                this.openaiApiKeyInput = document.getElementById('openaiApiKey');
                this.anthropicApiKeyInput = document.getElementById('anthropicApiKey');

                this.init();
            }

            init() {
                this.sendButton.addEventListener('click', () => this.sendMessage());
                this.userInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        this.sendMessage();
                    }
                });

                // G√∂rsel y√ºkleme event listener'larƒ±
                this.imageUploadBtn.addEventListener('click', () => {
                    this.imageInput.click();
                });

                this.imageInput.addEventListener('change', (e) => {
                    this.handleImageUpload(e);
                });

                // Ayarlar modal event listener'larƒ±
                this.settingsBtn.addEventListener('click', () => {
                    this.openSettingsModal();
                });

                this.settingsCloseBtn.addEventListener('click', () => {
                    this.closeSettingsModal();
                });

                this.settingsModal.addEventListener('click', (e) => {
                    if (e.target === this.settingsModal) {
                        this.closeSettingsModal();
                    }
                });

                // API key'leri kaydet
                this.openaiApiKeyInput.addEventListener('change', () => {
                    this.saveApiKeys();
                });

                this.anthropicApiKeyInput.addEventListener('change', () => {
                    this.saveApiKeys();
                });

                // Analiz modu deƒüi≈üikliƒüi i√ßin event listener
                const offlineModeRadio = document.getElementById('offlineMode');
                const onlineModeRadio = document.getElementById('onlineMode');

                offlineModeRadio.addEventListener('change', () => {
                    this.handleModeChange();
                });

                onlineModeRadio.addEventListener('change', () => {
                    this.handleModeChange();
                });

                // Load theme
                const savedTheme = localStorage.getItem('chatbot-theme') || 'dark';
                this.setTheme(savedTheme);

                // Load chat history
                this.loadChats();
                this.renderChatHistory();

                // Load saved API keys
                this.loadApiKeys();

                // Create new chat on start
                if (Object.keys(this.chats).length === 0) {
                    this.createNewChat();
                }
            }

            hideWelcomeScreen() {
                if (this.welcomeScreen) {
                    this.welcomeScreen.style.display = 'none';
                }
            }

            addMessage(text, isUser, codeData = null, skipSave = false) {
                this.hideWelcomeScreen();

                const wrapper = document.createElement('div');
                wrapper.className = 'message-wrapper';

                const message = document.createElement('div');
                message.className = `message ${isUser ? 'user' : 'bot'}`;

                const avatar = document.createElement('div');
                avatar.className = 'message-avatar';
                avatar.textContent = isUser ? 'üë§' : 'ü§ñ';

                const content = document.createElement('div');
                content.className = 'message-content';
                content.innerHTML = this.formatMessage(text);

                message.appendChild(avatar);
                message.appendChild(content);

                // G√∂rsel varsa g√∂ster
                if (codeData && codeData.image) {
                    const imageBlock = this.createImageBlock(codeData.image);
                    content.appendChild(imageBlock);
                }

                // Kod varsa g√∂ster
                if (codeData && codeData.code) {
                    const codeBlock = this.createCodeBlock(codeData.code, codeData.language);
                    content.appendChild(codeBlock);
                }

                wrapper.appendChild(message);
                this.chatContainer.appendChild(wrapper);
                this.scrollToBottom();

                // Save message to chat history (unless loading from history)
                if (!skipSave) {
                    this.saveChatMessage(text, isUser, codeData);
                }
            }

            createImageBlock(imageFile) {
                const imageContainer = document.createElement('div');
                imageContainer.className = 'image-preview-container';
                imageContainer.style.marginTop = '10px';

                const img = document.createElement('img');
                img.className = 'image-preview';

                // File object'i base64'e √ßevir
                const reader = new FileReader();
                reader.onload = (e) => {
                    img.src = e.target.result;
                };
                reader.readAsDataURL(imageFile);

                imageContainer.appendChild(img);
                return imageContainer;
            }

            createCodeBlock(code, language) {
                const wrapper = document.createElement('div');
                wrapper.className = 'code-block-wrapper';

                const header = document.createElement('div');
                header.className = 'code-header';

                const lang = document.createElement('span');
                lang.className = 'code-language';
                lang.textContent = language || 'code';

                const copyBtn = document.createElement('button');
                copyBtn.className = 'copy-btn';
                copyBtn.textContent = 'Kopyala';
                copyBtn.onclick = () => {
                    navigator.clipboard.writeText(code);
                    copyBtn.textContent = '‚úì Kopyalandƒ±';
                    copyBtn.classList.add('copied');
                    setTimeout(() => {
                        copyBtn.textContent = 'Kopyala';
                        copyBtn.classList.remove('copied');
                    }, 2000);
                };

                header.appendChild(lang);
                header.appendChild(copyBtn);

                const codeContent = document.createElement('div');
                codeContent.className = 'code-content';
                const codeElement = document.createElement('code');
                codeElement.textContent = code;
                codeContent.appendChild(codeElement);

                wrapper.appendChild(header);
                wrapper.appendChild(codeContent);

                return wrapper;
            }

            formatMessage(text) {
                return text
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                    .replace(/\*(.*?)\*/g, '<em>$1</em>')
                    .replace(/`(.*?)`/g, '<code>$1</code>')
                    .replace(/\n/g, '<br>');
            }

            showTypingIndicator() {
                const wrapper = document.createElement('div');
                wrapper.className = 'message-wrapper';
                wrapper.id = 'typingIndicator';

                const indicator = document.createElement('div');
                indicator.className = 'message bot typing-indicator active';

                const avatar = document.createElement('div');
                avatar.className = 'message-avatar';
                avatar.textContent = 'ü§ñ';

                const content = document.createElement('div');
                content.style.display = 'flex';
                content.style.flexDirection = 'column';
                content.style.gap = '5px';

                const text = document.createElement('div');
                text.style.color = 'var(--text-secondary)';
                text.style.fontSize = '14px';
                text.textContent = 'D√º≈ü√ºn√ºyor...';

                const dots = document.createElement('div');
                dots.className = 'typing-dots';
                dots.innerHTML = '<div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>';

                content.appendChild(text);
                content.appendChild(dots);

                indicator.appendChild(avatar);
                indicator.appendChild(content);
                wrapper.appendChild(indicator);
                this.chatContainer.appendChild(wrapper);
                this.scrollToBottom();
            }

            hideTypingIndicator() {
                const indicator = document.getElementById('typingIndicator');
                if (indicator) indicator.remove();
            }

            scrollToBottom() {
                this.chatContainer.scrollTop = this.chatContainer.scrollHeight;
            }

            async sendMessage() {
                const text = this.userInput.value.trim();

                // G√∂rsel veya metin olmalƒ±
                if (!text && !this.currentImage) return;

                // Kullanƒ±cƒ± mesajƒ±nƒ± ekle (g√∂rsel varsa g√∂rselle birlikte)
                if (this.currentImage) {
                    this.addMessage(text || 'üñºÔ∏è G√∂rsel y√ºklendi', true, { image: this.currentImage });
                } else {
                    this.addMessage(text, true);
                }

                this.userInput.value = '';
                this.userInput.disabled = true;
                this.sendButton.disabled = true;

                // Her zaman typing indicator g√∂ster
                this.showTypingIndicator();

                try {
                    let response;

                    // Eƒüer g√∂rsel varsa g√∂rsel analizi yap
                    if (this.currentImage) {
                        const imageFile = this.currentImage;
                        const prompt = text || 'Bu g√∂rseli detaylƒ± bir ≈üekilde analiz et ve a√ßƒ±kla.';

                        await this.delay(500);
                        response = await this.imageVision.analyzeImage(imageFile, prompt);

                        // G√∂rseli temizle
                        this.clearImage();
                    } else {
                        // Normal metin sohbeti
                        const isMath = this.bot.math.detectMath(text);
                        await this.delay(isMath ? 300 : 800);
                        response = await this.bot.chat(text);
                    }

                    // Typing indicator'ƒ± gizle
                    this.hideTypingIndicator();

                    if (response.type === 'code') {
                        this.addMessage(
                            response.text,
                            false,
                            { code: response.code, language: response.language }
                        );
                    } else {
                        this.addMessage(response.text, false);
                    }
                } catch (e) {
                    console.error('Error:', e);
                    this.hideTypingIndicator();
                    this.addMessage('‚ùå **Sistem Hatasƒ±**: Beklenmeyen bir hata meydana geldi. L√ºtfen sorunuzu yeniden form√ºle ederek tekrar deneyiniz.', false);
                }

                this.userInput.disabled = false;
                this.sendButton.disabled = false;
                this.userInput.focus();
            }

            useExample(text) {
                this.userInput.value = text;
                this.sendMessage();
            }

            newChat() {
                this.createNewChat();
            }

            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }

            // Theme Management
            toggleTheme() {
                const currentTheme = document.body.getAttribute('data-theme') || 'dark';
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                this.setTheme(newTheme);
            }

            setTheme(theme) {
                document.body.setAttribute('data-theme', theme);
                localStorage.setItem('chatbot-theme', theme);

                const icon = document.getElementById('themeIcon');
                const text = document.getElementById('themeText');

                if (theme === 'light') {
                    icon.textContent = '‚òÄÔ∏è';
                    text.textContent = 'Karanlƒ±k Mod';
                } else {
                    icon.textContent = 'üåô';
                    text.textContent = 'Aydƒ±nlƒ±k Mod';
                }
            }

            // G√∂rsel Y√∂netimi
            async handleImageUpload(event) {
                const file = event.target.files[0];
                if (!file) return;

                // Dosya boyutu kontrol√º (max 5MB)
                if (file.size > 5 * 1024 * 1024) {
                    alert('‚ö†Ô∏è G√∂rsel √ßok b√ºy√ºk! Maksimum 5MB boyutunda g√∂rsel y√ºkleyebilirsiniz.');
                    return;
                }

                // G√∂rsel tipini kontrol et
                if (!file.type.startsWith('image/')) {
                    alert('‚ö†Ô∏è L√ºtfen sadece g√∂rsel dosyasƒ± y√ºkleyin!');
                    return;
                }

                this.currentImage = file;
                this.showImagePreview(file);

                // Input'u sƒ±fƒ±rla (aynƒ± dosya tekrar se√ßilebilsin)
                event.target.value = '';
            }

            showImagePreview(file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    this.imagePreviewWrapper.innerHTML = `
                        <div class="image-preview-container">
                            <img src="${e.target.result}" class="image-preview" alt="Y√ºklenecek g√∂rsel">
                            <button class="image-remove-btn" onclick="chatUI.clearImage()">√ó</button>
                        </div>
                    `;
                };
                reader.readAsDataURL(file);
            }

            clearImage() {
                this.currentImage = null;
                this.imagePreviewWrapper.innerHTML = '';
            }

            // API Ayarlarƒ± Y√∂netimi
            openSettingsModal() {
                this.settingsModal.classList.add('active');
                this.updateSettingsUI(); // Mevcut ayarlarƒ± y√ºkle
            }

            closeSettingsModal() {
                this.settingsModal.classList.remove('active');
            }

            saveApiKeys() {
                const openaiKey = this.openaiApiKeyInput.value.trim();
                const anthropicKey = this.anthropicApiKeyInput.value.trim();

                this.imageVision.saveApiKeys(openaiKey, anthropicKey);
                console.log('‚úÖ API anahtarlarƒ± kaydedildi!');
            }

            loadApiKeys() {
                const keys = this.imageVision.loadApiKeys();
                if (keys.openai) {
                    this.openaiApiKeyInput.value = keys.openai;
                }
                if (keys.anthropic) {
                    this.anthropicApiKeyInput.value = keys.anthropic;
                }
            }

            // Analiz modu deƒüi≈üikliƒüi
            handleModeChange() {
                const offlineMode = document.getElementById('offlineMode');
                const onlineMode = document.getElementById('onlineMode');
                const apiKeysSection = document.getElementById('apiKeysSection');

                const selectedMode = offlineMode.checked ? 'offline' : 'online';

                // ImageVision'a modu bildir
                this.imageVision.setMode(selectedMode);

                // API keys b√∂l√ºm√ºn√º g√∂ster/gizle
                if (selectedMode === 'online') {
                    apiKeysSection.style.display = 'block';
                } else {
                    apiKeysSection.style.display = 'none';
                }

                console.log(`üîÑ Analiz modu deƒüi≈ütirildi: ${selectedMode === 'offline' ? 'üöÄ Offline' : '‚òÅÔ∏è Online'}`);
            }

            // Ayarlar UI'sƒ±nƒ± g√ºncelle (modal a√ßƒ±ldƒ±ƒüƒ±nda)
            updateSettingsUI() {
                const savedMode = localStorage.getItem('analysisMode') || 'offline';
                const offlineMode = document.getElementById('offlineMode');
                const onlineMode = document.getElementById('onlineMode');
                const apiKeysSection = document.getElementById('apiKeysSection');

                if (savedMode === 'offline') {
                    offlineMode.checked = true;
                    apiKeysSection.style.display = 'none';
                } else {
                    onlineMode.checked = true;
                    apiKeysSection.style.display = 'block';
                }
            }

            // Chat History Management
            createNewChat() {
                const chatId = Date.now().toString();
                this.currentChatId = chatId;
                this.chats[chatId] = {
                    id: chatId,
                    title: 'Yeni Sohbet',
                    messages: [],
                    createdAt: new Date().toISOString()
                };

                this.chatContainer.innerHTML = '';
                this.welcomeScreen.style.display = 'flex';
                this.chatContainer.appendChild(this.welcomeScreen);

                this.saveChats();
                this.renderChatHistory();
            }

            loadChats() {
                const saved = localStorage.getItem('chatbot-chats');
                if (saved) {
                    this.chats = JSON.parse(saved);
                    const chatIds = Object.keys(this.chats);
                    if (chatIds.length > 0) {
                        this.currentChatId = chatIds[chatIds.length - 1];
                        this.loadChat(this.currentChatId);
                    }
                }
            }

            saveChats() {
                localStorage.setItem('chatbot-chats', JSON.stringify(this.chats));
            }

            loadChat(chatId) {
                this.currentChatId = chatId;
                const chat = this.chats[chatId];

                this.chatContainer.innerHTML = '';

                if (chat.messages.length === 0) {
                    this.welcomeScreen.style.display = 'flex';
                    this.chatContainer.appendChild(this.welcomeScreen);
                } else {
                    chat.messages.forEach(msg => {
                        if (msg.isUser) {
                            this.addMessage(msg.text, true, null, true); // skipSave = true
                        } else {
                            if (msg.code) {
                                this.addMessage(msg.text, false, { code: msg.code, language: msg.language }, true);
                            } else {
                                this.addMessage(msg.text, false, null, true);
                            }
                        }
                    });
                }

                this.renderChatHistory();
            }

            renderChatHistory() {
                this.chatHistoryContainer.innerHTML = '';

                const sortedChats = Object.values(this.chats).sort((a, b) =>
                    new Date(b.createdAt) - new Date(a.createdAt)
                );

                sortedChats.forEach(chat => {
                    const item = document.createElement('div');
                    item.className = 'chat-history-item';
                    if (chat.id === this.currentChatId) {
                        item.classList.add('active');
                    }

                    // Chat title
                    const textSpan = document.createElement('span');
                    textSpan.className = 'chat-history-item-text';
                    textSpan.textContent = chat.title;
                    textSpan.onclick = () => this.loadChat(chat.id);

                    // Delete button
                    const deleteBtn = document.createElement('button');
                    deleteBtn.className = 'chat-delete-btn';
                    deleteBtn.textContent = 'üóëÔ∏è';
                    deleteBtn.title = 'Sohbeti Sil';
                    deleteBtn.onclick = (e) => {
                        e.stopPropagation();
                        this.deleteChat(chat.id);
                    };

                    item.appendChild(textSpan);
                    item.appendChild(deleteBtn);
                    this.chatHistoryContainer.appendChild(item);
                });
            }

            saveChatMessage(text, isUser, codeData = null) {
                if (this.currentChatId && this.chats[this.currentChatId]) {
                    const msg = { text, isUser };
                    if (codeData) {
                        msg.code = codeData.code;
                        msg.language = codeData.language;
                    }
                    this.chats[this.currentChatId].messages.push(msg);

                    // Update chat title from first user message
                    if (isUser && this.chats[this.currentChatId].messages.length === 1) {
                        this.chats[this.currentChatId].title = text.substring(0, 30) + (text.length > 30 ? '...' : '');
                        this.renderChatHistory();
                    }

                    this.saveChats();
                }
            }

            deleteChat(chatId) {
                // Confirm deletion
                if (!confirm('Bu sohbeti silmek istediƒüinizden emin misiniz?')) {
                    return;
                }

                // Delete the chat
                delete this.chats[chatId];

                // If deleted chat was the current chat
                if (chatId === this.currentChatId) {
                    // Get remaining chats
                    const remainingChatIds = Object.keys(this.chats);

                    if (remainingChatIds.length > 0) {
                        // Load the most recent chat
                        const sortedChats = Object.values(this.chats).sort((a, b) =>
                            new Date(b.createdAt) - new Date(a.createdAt)
                        );
                        this.loadChat(sortedChats[0].id);
                    } else {
                        // No chats left, create a new one
                        this.createNewChat();
                    }
                }

                // Save to localStorage
                this.saveChats();

                // Update the chat history display
                this.renderChatHistory();
            }
        }

        // BA≈ûLAT
        const chatUI = new ChatUI();
    </script>
</body>
</html>
